{"componentChunkName":"component---src-templates-blog-post-js","path":"/nextjs-architecture/","result":{"data":{"site":{"siteMetadata":{"title":"공자윤의 기술블로그"}},"markdownRemark":{"id":"94a101dc-013e-5c20-882e-475571003995","excerpt":"V 컬러링은 2020년에 처음 만들어진 SPA(Single Application Application) 형태의 모바일 웹입니다.\n여러 번의 성능 최적화 작업을 통해 Client side rendering 방식을 사용하고 있음에도 불구하고 속도 측면에서 현재 Native…","html":"<p>V 컬러링은 2020년에 처음 만들어진 SPA(Single Application Application) 형태의 모바일 웹입니다.\n여러 번의 성능 최적화 작업을 통해 Client side rendering 방식을 사용하고 있음에도 불구하고 속도 측면에서 현재 Native 수준의 성능을 자랑하고 있지만, 3년 동안 수많은 운영 과제를 통해 코드 부채가 조금씩 쌓이면서 불필요한 코드도 많아지고 뭔가 좀더 잘 만들어 볼 수는 없을까? 하는 생각이 계속 과제처럼 따라다니고 있었습니다.</p>\n<h2>동기</h2>\n<p>운영과제만 하는 것이 지루해서 뭔가 혁신적으로 해볼 수 있는 게 없을까 계속 고민하다가 문득 (정말 갑자기) <code class=\"language-text\">Next.js</code>를 도입해 보는 것이 어떨까 하는 생각이 들었습니다.\n부분적으로 리팩토링을 하거나 신규 기능에 한해서 아키텍쳐를 새로 설계할 수도 있겠지만, 오래된 라이브러리를 변경하거나 테스트 코드를 추가하기 위해서는 확실히 전면 개편이 필요하다고 판단하였습니다.\n또한 코드를 모듈화하여 좀더 가독성 있고 유지보수가 쉽도록 만들고 싶었고, 무엇보다도 최초 아키텍쳐 설계를 제가 한 것이 아니었기 때문에 처음부터 끝까지 고민하여 정말 잘 설계된 V 컬러링을 스스로 만들어 보고 싶다는 욕심이 가장 컸습니다.</p>\n<p>정리하자면 <code class=\"language-text\">Next.js</code>를 선택한 이유는 다음과 같습니다.</p>\n<ol>\n<li><strong>SSR (또는 SSG) 와 CSR 방식을 모두 지원하는 프레임워크</strong>\n<ul>\n<li>홈의 초기 뷰포트에 나타나는 부분 및 비디오 화면, 마이 화면 등의 렌더링은 SSR을 사용하면 더 빠를 것이라는 추측에서 부분적으로 SSR을 적용할 예정입니다.</li>\n<li>하지만 홈 화면의 스크롤 하단 영역 및 기타 사용자와의 interaction이 많은 부분은 여전히 CSR을 적용하여 위험 부담을 줄일 예정입니다.</li>\n</ul>\n</li>\n<li><strong>기존 React 코드 호환 및 신규 라이브러리 적용 가능</strong>\n<ul>\n<li>기존의 코드를 최대한 재사용하면서도 api 공통이나 에러 처리 등은 새롭게 구현하고, swiper 등 오래된 모듈은 신규로 교체하여 사용성을 높일 예정입니다.</li>\n</ul>\n</li>\n<li><strong>테스트 코드 작성 가능</strong>\n<ul>\n<li>현재 버전에 붙이면 에러가 나는 테스트 코드들을 적용하기 위해 버전을 업데이트하고, 테스트 코드를 용이하게 작성하기 위해 기능을 세분화할 예정입니다.</li>\n</ul>\n</li>\n<li><strong>이미지 레이지 로딩 및 링크 등의 성능 최적화 기능 제공</strong>\n<ul>\n<li><code class=\"language-text\">Next.js</code>에서 자체적으로 제공하는 <code class=\"language-text\">Link</code> 및 <code class=\"language-text\">Image</code> 등의 기능을 통해 성능 최적화를 할 예정입니다.</li>\n</ul>\n</li>\n</ol>\n<h2>프로젝트 생성 및 환경 설정</h2>\n<p>기존의 프로젝트에 Next를 설치하는 방법도 있었지만 일단 처음 시작해 보는 만큼 신규 프로젝트를 생성하였습니다.\ntypescript를 이용한 <code class=\"language-text\">Next.js</code> 설치 명령어는 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">npx create<span class=\"token operator\">-</span>next<span class=\"token operator\">-</span>app <span class=\"token operator\">--</span>typescript vrbt<span class=\"token operator\">-</span>frontend<span class=\"token operator\">-</span>next</code></pre></div>\n<p>이렇게 하면 CRA를 생성할 때처럼 <code class=\"language-text\">next.js</code> 프로젝트가 생성됩니다.\n저는 초기 설치 단계에서 ChatGPT의 도움을 많이 받았습니다.</p>\n<p><code class=\"language-text\">Next.js</code>에서는 이전에 사용했던 <code class=\"language-text\">Gatsby</code>와 동일하게 기본적으로 파일시스템 기반의 라우팅 방식이 사용됩니다.\npages 폴더 내부의 <code class=\"language-text\">index.tsx</code> 파일이 root directory가 되고, <code class=\"language-text\">_document.tsx</code> 파일이 기본 index.html의 역할을 하며, <code class=\"language-text\">_app.tsx</code> 파일은 CRA에서의 app.tsx 파일과 동일한 역할을 합니다.</p>\n<p>라우터를 사용해야 하기 때문에 <code class=\"language-text\">_app.tsx</code> 파일 작성을 ChatGPT에 요청해 보았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c5dd0929b4237f1cfdc3261558630cd1/133ae/chatgpt_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 145.56962025316454%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEDklEQVR42qVWV1MjRxCeTdqcpJVABOl8yYBduI6Mq0CrLAHKOZHj8eInV/nFf/1zzUgEG92dj3v4qrd7dr7pr3tWLfJT7S/s7h2gWGyiUGwhl68jk60iX2gwS/1CsYm19QTWN/xvguyup7C9k8XmdhobWylsbqWxtZ1hPrNbaWxsjt/5L3Z2c9j5fYzdiSX+33/isDZCo3WOeuuc2VrjFPXmGVrdKzQ7l2g0zyaxc7Q6l8w22xcoHHSRzjb+BeKfXiBbaLPFXKGNbL6FXKGFfLH96BcOOsgXO8jRtXyLxSjSmTqS6Rryk/00RnKpBra2U3gT/4DFxfdYWHiHufm3WFh8z/wYtQvj58XYB8SeI/4R8fhHLC39xrC8sgZSOOxjafkTiBGC6nhYMEy8tW3YpgXBCoOYKohngdMVEEK+CikggxQOelheWQfvRuHYHt44Dmbn41AMG8QwQSIuSMgCCdvgdXUqEcdxzKqa8URIRBmSrMEiBIooQbdtGI4FxdDhBF3olglFUxEMBmEYBnief0GsqvqEcHkNRDERcGYQD3mYC4UQC4bwLhRGNBJByPNgmSY0TUM4HIZt2xAE4cuErIaEQFYUaJaFgKpCFUWokgRJkr5Zu+mEvADdchHVdMyqOqKmhRnDhGVZ0HUdukzgGDJkWYYwRe4LQk4Q4akuooKCmG5Ac0zohobAbAiaYyEaduBY2lSpUwkFgZ9a6C919aGzUwl/XvqEQEDCTCQCz/MQcYMwNBXE1sG5JrigCaIEEAmHEYvFEI1GmXVd92tN4SFq1tSTX9kUHoYbgiiKP0648ss6C0TCHlZXVzE3P4+AKMHhFbiSBk1R/1fmL+4hvbD0iqiqyq6GyknQhAAj/64M6aenKPKrpU4lZEGOZxecJxyEVxAqikYJu1j5dROC4UKxPUhOBEHNxJysQhAl8LwAQRAZeEFgGPtPcQqO42HQX6hMrolUpoaEf4T9xBGze34Je8ky/FQFfqqMRLKMfb+EJPMr8NnaOJ7wS8xPJEvMJ6lMHYelPs4v/0BvcIt27xr90Wf0h3cYHN+j07th8Qd0B7cYntyjN7jDYPQZ3f4Nhsf3KFVHoMkROljovOj2rtFqX+CoPES1cYpq/QS15hnK1REbSP3BLUqVIUqVsU/jdJDR9yjoPKHJsQyPygM2yRqTqTcY3TFLs+0Obtiko36nf82ypAfR2GB4h/6QZn7DbKV2PCakJ3R612NMNlHJ7e4Vk1SdjFWqot29ZBlSQkoyOqFluWKyaVJMMu00lb3v0+JW4adqSKbrbM6mMk8zlx7+/PkRz9bGkitD9Ed3TCorfP+Ggcqk2TD53avH4U8l0zjDpBwPfw4Y4cFRj21o967QaF+wBdoAeiLt3PfgH6loU/LkWNZHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chatgpt_1\"\n        title=\"\"\n        src=\"/static/c5dd0929b4237f1cfdc3261558630cd1/f058b/chatgpt_1.png\"\n        srcset=\"/static/c5dd0929b4237f1cfdc3261558630cd1/c26ae/chatgpt_1.png 158w,\n/static/c5dd0929b4237f1cfdc3261558630cd1/6bdcf/chatgpt_1.png 315w,\n/static/c5dd0929b4237f1cfdc3261558630cd1/f058b/chatgpt_1.png 630w,\n/static/c5dd0929b4237f1cfdc3261558630cd1/40601/chatgpt_1.png 945w,\n/static/c5dd0929b4237f1cfdc3261558630cd1/78612/chatgpt_1.png 1260w,\n/static/c5dd0929b4237f1cfdc3261558630cd1/133ae/chatgpt_1.png 1424w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>생각보다 상세한 설명과 함께 예제를 작성해 주었습니다.\n저는 여기에 공통으로 사용할 <Layout> 컴포넌트만 바깥에 감싸 주고, <Navbar />는 하단으로 옮기는 작업만 수행하였습니다.\n그리고 기존의 css 파일들을 import해 주었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../pages/components/Layout\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> AppProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/app\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/router\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"@/static/css/base.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"@/static/css/common.css\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"@/static/css/search.css\"</span>\n<span class=\"token keyword\">import</span> Navigation <span class=\"token keyword\">from</span> <span class=\"token string\">\"./components/Navigation\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> pageProps <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> AppProps</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">useRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// 라우팅 될 때마다 실행되는 함수</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleRouteChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Route changed:\"</span><span class=\"token punctuation\">,</span> url<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>router<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    router<span class=\"token punctuation\">.</span>events<span class=\"token operator\">?.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"routeChangeStart\"</span><span class=\"token punctuation\">,</span> handleRouteChange<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Component <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>pageProps<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Navigation router<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>router<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p>ChatGPT가 작성해준 코드와 별반 다를 것이 없죠? <code class=\"language-text\">Next.js</code>는 Hot reload 기능도 지원해 주기 때문에 결과가 바로 나타났습니다.\n그리고 기존 컴포넌트들이 들어 있는 <code class=\"language-text\">src</code> 폴더와, font, css, images 등이 들어 있는 <code class=\"language-text\">static</code> 폴더는 그대로 복사해 왔습니다.</p>\n<p>시험삼아 V 컬러링의 홈 부분 중 일부를 가져와 보았습니다. 헤더 부분과 하단 Navigation이 적용된 모습입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/110065297cbf4c97e28fdc11797a98b9/4971b/vcoloring_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 215.18987341772151%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeklEQVR42u2WzU7CUBCFL7SUhB0voTHxBUx8A3c+DAsCCS3yboQlhCWG0iIaI6XpLy3lmBl+bAUWalemk5xMz5253532biocxwXFdrs9isKyLCyXS3iex3Ich71t2+zTe5IkYW+aJgQ1HorpPBwO0e/3MR6PMRqN2A8GA16bTCaZ3gzQdV0ubJIECZ2219fpuwk2m2QPAfeSPyiK4zTQw8wwMV+8wly84XlqQDdeMDXmmM7mnN8/LITrCH4QIgjXJ/L8ADSrYRi7CcNwDQLTBiq6ns/PLD/gTTRFFJ1RHPNhYGDqG/4lvl3K6S3/VBdvOXdgTq9cAAtgASyABbAAFsAC+D+Bufx9rVY2L8Rx/GtF0e4PVtd1COQYNJxot9vQul2orRbUZhOaqkLTNKiqik6nw5n8JVEPqdd7QqPRgBBCgHV9C/HwiKMXAoqiZPw5lUql7FpFUVAWApWrGyh395AkGeVyGbIso16vo1arsZck6ayoXq1WGUz5E8tUsYfRsw3DAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vcoloring_1\"\n        title=\"\"\n        src=\"/static/110065297cbf4c97e28fdc11797a98b9/f058b/vcoloring_1.png\"\n        srcset=\"/static/110065297cbf4c97e28fdc11797a98b9/c26ae/vcoloring_1.png 158w,\n/static/110065297cbf4c97e28fdc11797a98b9/6bdcf/vcoloring_1.png 315w,\n/static/110065297cbf4c97e28fdc11797a98b9/f058b/vcoloring_1.png 630w,\n/static/110065297cbf4c97e28fdc11797a98b9/4971b/vcoloring_1.png 784w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아직 아무것도 없긴 하지만 어쨌든 성공적으로 렌더링된 모습을 볼 수 있습니다.</p>\n<h2>REST API를 활용하여 SSR 페이지 생성하기</h2>\n<p>이번에는 상단 메인 배너를 SSR을 사용하여 가져와 보도록 하겠습니다.\n역시나 ChatGPT에게 활용 방법을 물어보았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b06dace60fc8ca5713382855c4f4ca4c/c4451/chatgpt_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC0klEQVR42qWUWU/bQBSF7cTO7mwPkFLRVkBAxAlVyUpbBAmJlyxksZ0VstOmlFIqIaH++lPNOARSpVIlHj6dmTt3zlyPfc1Eit+QzjYgS3XIioZyuQVF1VEsNVGutJHO5BFPnCKRzC5BYqtgxE864hkFmaM8MkcFHH2U5mqOSdJhnHCCw8Rc4ycrDyEw2VYHWVVHQdIhKQbykoaCrKMgG3Quq01IsgFFbS3mSrGFs4KG01wV2VxtCabwcA+5PUSjPkTDGKOmmaoZY+itKfTmFLXGkGpdIzpBs32FUqVHTfOSvgSTy9WRyzdQqnShGRO6mZgR02pjQMd1bWQeYEwgqy2c5mpLZpLcRIFigCEBMklnzhCLJSGKCYjRJKLRJNX9aIqqGEshEk1hPxJHJJIw2Y8jIiYQTxwjlSb3ewyGVKcUOwhtvAPj9IIXguDcPrCeIOxOL0JWHn6eR5DjsW6zIxDwg3PYwVhYMJwFDMMsYFnWNFRLXYRCm2AcAgLrr7G2tgarPwSfEMSmR4A34IPdL8DqssPq84D1OMF4nLAILthstidDi2Ve4aOhlYfD64fgccNid4F3ueF2OCDwPDiOW6pmFZZHQ1LhOjG08PA4/eD/Y/MqWPa54atNGgxvvIVXEF5uGAq9Acdz4O2Pd8LSS6YXTWD+Dc2hj2x99pbnFb4Y8oFKShMf4p+xvSNid+8AO+EYwrsx7O69p3My3toW6TrRre3IXEXshKPznAOaTz9sUiVpreH4Du3uDL3La/SHP9Drf8dwcofB6BZXX+8xnv6izK4fqF7f/MZF/8bMG/+kexeGDX1EjYzWFO3uF/SHN7RnK7VLk+oFbUWi57U+zmuXtLfVUgdKsY3yeQ/FcufJkPTqYHxLTdu9GToXM3R6M7Ov9RHdTJRQrZs9ToxJvNYY0Dg5bGFIFkhFi4ZXDHq3BPK7Ij+Fv5HUJtRSe7FOcv8Ax6U21v/+xw8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chatgpt_2\"\n        title=\"\"\n        src=\"/static/b06dace60fc8ca5713382855c4f4ca4c/f058b/chatgpt_2.png\"\n        srcset=\"/static/b06dace60fc8ca5713382855c4f4ca4c/c26ae/chatgpt_2.png 158w,\n/static/b06dace60fc8ca5713382855c4f4ca4c/6bdcf/chatgpt_2.png 315w,\n/static/b06dace60fc8ca5713382855c4f4ca4c/f058b/chatgpt_2.png 630w,\n/static/b06dace60fc8ca5713382855c4f4ca4c/40601/chatgpt_2.png 945w,\n/static/b06dace60fc8ca5713382855c4f4ca4c/78612/chatgpt_2.png 1260w,\n/static/b06dace60fc8ca5713382855c4f4ca4c/c4451/chatgpt_2.png 1450w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/371de14dab87bd99efafa66864cb9644/acf8f/chatgpt_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD5klEQVR42qVW+XMSWRB+cwGDwwBCYFOBRYMESFU0RjeHW2WiAh6RIxzDzXDkTsy61v7/31b3AOJatSaVH77qfv0m/fr7+vE64uNhG63OGerNYzSax+j0LtjWrQnHG60TVOsjtLvnOCx28DZXxbt8jTHzCx8sRr7QgNh/U8bGxjay6U2spTfxJLuFVHoTqbVnSKefI53ZQib7Atn1n5HJbmHj6Q62tw/w8o/XePFyH2J3LwfZ7YXsj8DUDcRdboSDQfy2vIxAIABVVSGEuBUeGCbE7qs8hKzAG4nDZwahCgFFlqGoKiRJunUygmH4Ifb+LPDCb/oQj8fxMByGaZoIBoOMuyR1Er5yEmqahlQqhWQyiVgshkQiwQdEo9Fb0+aEu9OEgUAQkUgEiqIwXbaKwsluWyUn3NnLw+Nxs2530et/KsxDUjUIRYOkuiAUFRL5igq3JMEtJHgYAm6qWpJ/kZCujW5CC63ACC9DDyxBDccQ0H1I6l74fQYePvAi4jMQWgrBEw5CeFwQhg5N90D6OWEeQpIhGyGsrKwgGolA9kcR8AexbJoIBwNQTQNClSFc6nd4XFDdrh/0nVMWQoJw6dA8OmTSUpIhyQpkSYImJMh3uzZ55x4aESz5QlAU+X5NmV1sr+ZCIhZ3KrxflwucxGeaUDWN6ZMud4NThM8XgNjZzUFV7n8HCR7dC/H6oIjkk3U8Xs0yEo/SbFeT63j0OMNYXNP+ajI7jZF1Yr8nUljLbEK8/9hEu3eBVvcCw/FfOD75hm7/iv32NNbpXWI4+YqefY3R5CsGoxv0h19wfPoP75UqNorlAT597kLQS9u3r9DpnfPLXK0PYbXo9Z7wy02xStVGzRqzX2t8t/Sqs2+NeV0s9yFyhTqq9TFKlT4O3law/6byg10Eve4HC/uLawKNBFE+GqDWmOCo5syNdveMqx0Mr3lNc+W/tm9fz9dW64SZ0Jrmk2h2zlinbv8S9uiGhxR9WOeBdT4fYM3OKcfpj52Dnb3GdLi1e+c4qo8gDotd5k+USauj2hAUo/JnU23m/wrvcjUISkINIHFbnVPUGk4TSIqGNWHbnFZCTZg1o2ZN2FKcYkSdvhUUIL16g0umQH53cMnUifJwfAN7RFfkG4ajLxyn7zr9C9ayP3TgJLQhDktdPoUrtSZsq40xN4q6T9otVkeS0D79A1CbVlqu2nN5RIm7PHYS1Ue8yZ23JihVBtx9Svy51JtrTPeNMJNmMS7oZHt8g2b7lGmQpY4TbbIzetTVycnfTJ98pmpfT6W5QM++YiZ8DxfbT1QoKcV6g6u54B8+tUA/ghny7xtzn6jO/H8BybJ5DJpwrhQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chatgpt_3\"\n        title=\"\"\n        src=\"/static/371de14dab87bd99efafa66864cb9644/f058b/chatgpt_3.png\"\n        srcset=\"/static/371de14dab87bd99efafa66864cb9644/c26ae/chatgpt_3.png 158w,\n/static/371de14dab87bd99efafa66864cb9644/6bdcf/chatgpt_3.png 315w,\n/static/371de14dab87bd99efafa66864cb9644/f058b/chatgpt_3.png 630w,\n/static/371de14dab87bd99efafa66864cb9644/40601/chatgpt_3.png 945w,\n/static/371de14dab87bd99efafa66864cb9644/78612/chatgpt_3.png 1260w,\n/static/371de14dab87bd99efafa66864cb9644/acf8f/chatgpt_3.png 1340w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이미 공식 문서에서도 읽어보긴 했지만, SSR을 이용하기 위해서는 <code class=\"language-text\">getServerSideProps</code> 함수를 사용하면 됩니다.\n이 함수를 사용하면 서버 사이드에서 외부 API를 호출할 수 있습니다.\n또한 위 설명에도 나와 있듯이 이 함수 내에서는 <code class=\"language-text\">fetch</code>를 포함한 어떤 비동기 작업도 수행할 수 있습니다.</p>\n<p>ChatGPT가 작성해 준 코드를 활용하여 배너를 가져오는 코드를 만들어 보았습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">getServerSideProps</span><span class=\"token operator\">:</span> GetServerSideProps<span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>baseURL<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/v1/배너 가져오는 주소</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">\"POST\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string-property property\">\"Content-Type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application/json\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">body</span><span class=\"token operator\">:</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token string\">\"DURING\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> data <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아직 <code class=\"language-text\">fetch</code>의 공통 함수는 작성하기 전이라 우선적으로 위와 같이 작성하였습니다.</p>\n<p>다음으로는 컴포넌트에서 받아온 <code class=\"language-text\">data</code>를 이용하여 UI를 그리는 작업을 수행하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// index.tsx</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Home</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> bannersGroups <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"wrap\"</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"flx-sti-wrap\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Header <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">\"sch-main-cont\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">\"container\"</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>bannersGroups<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span>\n          <span class=\"token operator\">&lt;</span>MainBanner bannersGroups<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>bannersGroups<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// MainBanner.tsx</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MainBanner</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> bannersGroups <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">{</span>bannersGroups<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span>\n    bannersGroups<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Image className<span class=\"token operator\">=</span><span class=\"token string\">\"item-banner\"</span> src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>imgUrl<span class=\"token punctuation\">}</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span> <span class=\"token operator\">...</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>MainBanner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>API 요청이 성공적으로 수행되어, bannersGroups의 갯수만큼 이미지가 잘 출력되는 것을 확인할 수 있었습니다.</p>\n<h2>swiper library 설치</h2>\n<p>기존에 사용 중이던 <code class=\"language-text\">react-id-swiper</code> 라이브러리는 너무 오래된 버전이라 새로운 버전으로의 교체가 필요했습니다. <code class=\"language-text\">next.js</code>에서 사용하기 위해 이번에도 ChatGPT에게 물어보았습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b44e2957c8d1fd32a2f14e6425edd7a1/07a9c/chatgpt_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC6ElEQVR42pWTa1PaQBiFN0YgJORCCCogxXpBpeqoqKNVQ0hCQLwAuaDOdLzrn+jn/u7T2QWqjo7WD8+c3Te7J9mzb8iSd4/dgyM4zhlst4O6fQbH7aDh+QyvSbWH7R0b1S0LW9v1DyHLzi129jyYZhv7By0cmm0cHB4xDs0BtE7NNqu1N9D6S4jVOkWtfgar3oFld2DRsd1B3emiTtUeqO32YDtdpk7DZ0rXmdbpK4j15zeO/SsE4R16wS386A5d/xp+eIcgukN08Yigf4/o/BF+eIuQjR8Ynd4VXC9iNJoR3GYE4jQCNukFN8yAGvYvn5gB3Uyf2a4Pum6E7T6PXS+E0wj/zcmouLvXwGbVHOYygIY8yMp8l42qydaZtTaDZk0GbwiQyxehyDL0tA5VVaHrOgghX0IUZWoYsE9e/lHFzPdFzM1XMDu3zChMz2G6OIfit3mm08Vn/VZaeAVdM7+wOjiy1+qj07tG17+FH94jPH9EEN0j7D8w7fo36F88sWf0ssL+I45Pf6HVvmQ02xdoUj26eM6w2YpYU9M+NK0T1uS0sd1GF2btGFb9lFF3zlCzTrD308POrovdPQ+2Q9usgxptm5FhLleCJMnQNB2KkkZSTCEWExCPJ5FIiEgkki8QISQlJIekUiokKQXDmAJxvJAZZiamEVcyENIq4oYKXhZBuK9dipAUh4aNANnCLPh0AZwqg5tMg6OmhSy4fAaxtIIxjgOhvGPEDeuSpDwbGrkSxpQsiJAA0WUQTQIxlIGKwv+1jSTTDEdHLoDQvOICMvw4FEWBkc1CVhRomoaMYbBaLBb7xHCYoZHNg6R0SEoG5XwBMzMzmJqcRF7WUVInUJzMQdU08Dz/sSFtbGo4NVUY5jEGPjYObriRJxzGaP3VZu6TDL0QaSMHwsdBEhJIXIRGb+2Lv54gJEd9GGBtYx8Ly5tYrFRRrlSxsrSOytI6FhbXUC6vMWWU31JeXMN8eRWVlW38BUo4MD2EPdR8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chatgpt_4\"\n        title=\"\"\n        src=\"/static/b44e2957c8d1fd32a2f14e6425edd7a1/f058b/chatgpt_4.png\"\n        srcset=\"/static/b44e2957c8d1fd32a2f14e6425edd7a1/c26ae/chatgpt_4.png 158w,\n/static/b44e2957c8d1fd32a2f14e6425edd7a1/6bdcf/chatgpt_4.png 315w,\n/static/b44e2957c8d1fd32a2f14e6425edd7a1/f058b/chatgpt_4.png 630w,\n/static/b44e2957c8d1fd32a2f14e6425edd7a1/40601/chatgpt_4.png 945w,\n/static/b44e2957c8d1fd32a2f14e6425edd7a1/78612/chatgpt_4.png 1260w,\n/static/b44e2957c8d1fd32a2f14e6425edd7a1/07a9c/chatgpt_4.png 1440w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/994d33faf83ae893251c6a2b6417a3de/acf8f/chatgpt_5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 122.78481012658229%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAADKElEQVR42p2US2/bRhRG58kZPkVSlCjLtGPFhq0iieJuatnaFI7sAEWBoIibpgkCdNEH0P+/PwVJtVbiFrW9+DCcGfLjuTP3XvHd9x949/Pv3Pz0K+/e/8b7D3/w8dOf/PD2F9ZXN1/obTe+ur7V+vqGq9c/dmMr8e3lG86Wl5yeXvCi04rF1ysWLy94tjjv9HwzPnvZPy8Wy04vni85PV1xsbpmtbpmeb5GnC3XKBdj4pxKW0bKkCpN4j0T6xjZgMwYJjag1pbMeXSYoZIEWSRoFyCFRAhBEHjE2dklJhvhx/uUUUgTxRRhSONCpspQGYvPhrgoweQxJk9RRYYyBqEkUvZmrawNWsLWsCIodpBZhK5ydJ5iQ490FhUYpNKIlkJJhNxoY7Ita11PqPIaPWwQRYzYKRHDFNFUiL0Rclwgtf5Xg7uGLeH5FV5KEqWJpCIyhiwIunkoFV6q7jnWGhcE/2/4zfkViVSUur+MgfNU7TlKRdquaUOhNHl7OWl6D8LlK4RPEEmJN667iDKM8El8rzDvGHa5IySDnSfUzR5S9ptaqUcaXlx1kzSOmY2mlDbGit5MPo6wN9RCcmByZrZgkGQ4H1KbhEKHZMpRxhnamvsbWqk4dEOO3JBDPyRpdhDe3n4gH0hojSWxntSGpNYTBK5P5MeGbIxh2uwymUwYTWpUG15LZTRCK4TaKDCdtFQo3e9Jre4attp/ss98dsS03sHXQ4QPkIMYkUaIJOxGmSeILCIxDh+1674rUyUlZvuWW8KjoyMODw+ZzWb4MOx/tF2/clPPbVMQm8awVdt3CHebhtl0j1FZoasBInI9UUuZRYgsRrbrZUpmQ8Kkpw2isMtbY7YIrbXM53NOvppzfHJCGj26Um4Jp7tTnu7uM67GmOEAEbp/zqw7xyxCDnvCNhPCOP5vwiAIOD4+5unBjHpcE6VJ/6PNTX4mJVFColQ/l0ptt691t5HnOVVV4bx/cKhf9MM13rnP61Y+LKH/fr8rhq59yTYsi2hbuAmIhCB8BGGX6Ber1wzGDXm9T17vkY8b9vKKg2JEmQ9J0pz0HoqTjKIc8ReoMUBZkErY5AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chatgpt_5\"\n        title=\"\"\n        src=\"/static/994d33faf83ae893251c6a2b6417a3de/f058b/chatgpt_5.png\"\n        srcset=\"/static/994d33faf83ae893251c6a2b6417a3de/c26ae/chatgpt_5.png 158w,\n/static/994d33faf83ae893251c6a2b6417a3de/6bdcf/chatgpt_5.png 315w,\n/static/994d33faf83ae893251c6a2b6417a3de/f058b/chatgpt_5.png 630w,\n/static/994d33faf83ae893251c6a2b6417a3de/40601/chatgpt_5.png 945w,\n/static/994d33faf83ae893251c6a2b6417a3de/78612/chatgpt_5.png 1260w,\n/static/994d33faf83ae893251c6a2b6417a3de/acf8f/chatgpt_5.png 1340w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/afee13b9e63ebbcef704c7ae65575f0e/9685e/chatgpt_6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.911392405063296%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABK0lEQVR42jVRa5OCMAzkt92pKIigvAp9QFEP397c/5/Zmw3yYadJdpsm20C1I+rmBzyVvkDbGxp9genuKKojWnMRUEOQb80VzadGjesfMO6Osj4hyMsBh8LDdg8hCdvd0bQjdpmFtlf0wwulcCdpVqmz6PhwvNNYhAWWYSkI4kSDSDKLJLXSPEmN1NgwTlpE21Zi1jexwjY1gnTvMN9PDx3WkULgj295qR/e8Kdf2P4h6xh3Q+ef6IaX8OfxD9S6fqpR2/kXtLuJPazv8x6B0qP44vxTfGSzfeGxWldYrAqEUY1o2yDc1FhtKpmCObEWrv3ESjTBLnMy+rwec4q42nROzXiB8ZxPqPC1OHyQ43uZI+DP0GB6xw9iPptOMCc3aQbZYs45CJtwkxn/q44bDNZdGjQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"chatgpt_6\"\n        title=\"\"\n        src=\"/static/afee13b9e63ebbcef704c7ae65575f0e/f058b/chatgpt_6.png\"\n        srcset=\"/static/afee13b9e63ebbcef704c7ae65575f0e/c26ae/chatgpt_6.png 158w,\n/static/afee13b9e63ebbcef704c7ae65575f0e/6bdcf/chatgpt_6.png 315w,\n/static/afee13b9e63ebbcef704c7ae65575f0e/f058b/chatgpt_6.png 630w,\n/static/afee13b9e63ebbcef704c7ae65575f0e/40601/chatgpt_6.png 945w,\n/static/afee13b9e63ebbcef704c7ae65575f0e/78612/chatgpt_6.png 1260w,\n/static/afee13b9e63ebbcef704c7ae65575f0e/9685e/chatgpt_6.png 1336w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">swiper</code> library를 설치하고 코드를 다음과 같이 변경하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">SwiperCore<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>Navigation<span class=\"token punctuation\">,</span> Pagination<span class=\"token punctuation\">,</span> Autoplay<span class=\"token punctuation\">,</span> Lazy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">MainBanner</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> bannersGroups <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Swiper\n      className<span class=\"token operator\">=</span><span class=\"token string\">\"swiper-container prog-box\"</span>\n      pagination<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">el</span><span class=\"token operator\">:</span> <span class=\"token string\">\".swiper-pagination\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">clickable</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      spaceBetween<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">16</span><span class=\"token punctuation\">}</span>\n      speed<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">500</span><span class=\"token punctuation\">}</span>\n      slidesPerView<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n      loop<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>\n      autoplay<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">delay</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">disableOnInteraction</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>bannersGroups<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span>\n        bannersGroups<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n            <span class=\"token operator\">&lt;</span>SwiperSlide key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>bannersGroupId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>div\n                data<span class=\"token operator\">-</span>reactid<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>item<span class=\"token punctuation\">.</span>bannersGroupId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">_</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n                className<span class=\"token operator\">=</span><span class=\"token string\">\"swiper-slide\"</span>\n              <span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>Image\n                  className<span class=\"token operator\">=</span><span class=\"token string\">\"item-banner\"</span>\n                  src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>imgUrl<span class=\"token punctuation\">}</span>\n                  alt<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>item<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span>\n                  width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">358</span><span class=\"token punctuation\">}</span>\n                  height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">232</span><span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>SwiperSlide<span class=\"token operator\">></span>\n          <span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Swiper<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>MainBanner<span class=\"token punctuation\">)</span></code></pre></div>\n<p>결과는 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/92c952da476a1e9e80099e1e671198d3/20982/vcoloring_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEmUlEQVR42u2Wf0xVZRjHL5C5ufmfWqNNTW22Vpakqzldzkl/2aTG5iKXZm5lrNlcM60tFaHCmptaWmgtURABQZSRYpmV7IohZA4SEPDCvXKvcH+ce37ce889l09734sXLmp/NP/k2b4753nP836f7/Oe933OsamqhrChoaEEhHk8HpxOJ36/H5/Ph9frxeVy4Xa7pT92zh3YVFUlbkOJIGHt7e00NTVx/fp1WltbaWtro6WlhebmZjo7O5NiR5tN0zSi0ShmNErUsohG4xCxIjwmMsvJI5PErYyzRmBZsbhCTdNx9PbhdPXTd8tNV08vPb1OehxOum/20e3ow317kFA4gm6EMUJxCH8sYrFYXKFlWXLAHFYajkSImGYckfhVKDKH1SeqsWLDsLBisZE1FIRyoshkhOUSiGwCd9bKNE0Zd+eZ8A0jRDgcJiIERCJxQkVRCPgVBgd9+H0BSdrf76brRhcd7R1cvfo3ra3/0H/LTXdXD72OPjo7b+DxDGCaURQliHdQ7AKfTBInDMThdLqw2+1UV1dTWVlJSUkJpSWlFB8+Qk3NaU6fquVEZRVHj5bw24XfqT9bT0d7J8Ggis/rTyYUmRw3HZJs3969HCwqIi8vj8LCXRQUfMb2bTs4dPAQe/bsoaCggPLyCvbvP8CVpmY0VZcqE4RBRZXliqsZjhAJhbl48SK1tbU0NNipq/uJ2to6Lv95RVZgv9Qo462ohRrUpDqfb5RCMaj4FYmA34+n30O/yyMX/fy5nzl39hccN7q42miXSkqLj9DR0SVLHRz0SvKkkjVVRQkoBAMKYl92tFzj1/IqBrx+Dny+nQ83vMu3XxXy9eYNuJwuSnbvZFd+PoqiEfAH7laoqxpqQEFVgih+P/YzZzi8K59LZ06yY+N6li58ho1rsnknK5MvC/Ip2v0FK5YvY9OmzSiBoCRLKAwGg4QMAy2ooqkaRlDh04+2kvP6Gv44f57Fzz/FwqdnsTYrk9yc15gz83EemZbOtKnpZC7LlG9ZLFnipQjCcMhA11R0TSOiqxTm7WTuk/M5WX2KjW/nsDhjLm+uXsfqrBV8kruO6Y9N543sbNr+apb79y6FkXCIkK5h6DpmSOe7fd8wb94iPt66jdy3VrHo2dlkrcxm6qMzyMnOYu7sJ1j04hJuewbldktaQ0kYCWEYGrquQswif1s+c+Zk8H7uBxRueY8t61ex9IUMli9ewtpXXyHjuQWkp8+kvv4coVCYgQFvvOSIGT/LsZiFaYrzGJZ9qqGhkYNFP9J0pYWgx4mvr5vWJjuu9mtcqDtNVVUNFRUnaGy8LM+1rukYhhHvNiMdm/s2zf+ysfGJjj26/YtMorPEZEuKMSQ7T9yPyWZqjXp+n0/Avb4P/wdJhA/CxgnHCccJxwnHCYcJxZ+XaOXiR/JBwMYDNltxcTHlFRWUFRdT9sP3HD9+XKKsrIzS0lKOHTuWGLsXxPPRMTabzYbEjFnYXnqZhG+zMXHiRFJTU5PGxiIlJSU5Jm3CBFJsNh6av4CHV2aTkpoq/bS0NKZMmcLkyZMTE8dCjE+aNElC3AvifwFgERWa9BlBdgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vcoloring_2\"\n        title=\"\"\n        src=\"/static/92c952da476a1e9e80099e1e671198d3/f058b/vcoloring_2.png\"\n        srcset=\"/static/92c952da476a1e9e80099e1e671198d3/c26ae/vcoloring_2.png 158w,\n/static/92c952da476a1e9e80099e1e671198d3/6bdcf/vcoloring_2.png 315w,\n/static/92c952da476a1e9e80099e1e671198d3/f058b/vcoloring_2.png 630w,\n/static/92c952da476a1e9e80099e1e671198d3/20982/vcoloring_2.png 778w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>실제 V 컬러링과 매우 유사한 형태의 홈 화면이 만들어졌습니다!</p>\n<p>다음 포스팅에서는 하단 네비게이션을 통한 라우팅 구현에 대해 알아보도록 하겠습니다.</p>","frontmatter":{"title":"Next.js 전환 과정 (1) - 기초 설계","date":"March 05, 2023","description":"React로 구현된 SPA (CSR) 프로젝트를 Next.js로 전환하는 과정","author":"jayoon"}},"previous":{"fields":{"slug":"/react-router-v6/"},"frontmatter":{"title":"react router v6에서 react testing libarary 사용하기"}},"next":{"fields":{"slug":"/nextjs-rendering/"},"frontmatter":{"title":"Next.js 전환 과정 (2) - 렌더링 방식 결정하기"}}},"pageContext":{"id":"94a101dc-013e-5c20-882e-475571003995","previousPostId":"287c9e25-615b-5666-8728-e8b24cf124da","nextPostId":"d66acc95-e450-5eed-85f5-b45bed52ce4d"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}