<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[공자윤의 기술블로그]]></description><link>https://jayoon-kong.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 29 Mar 2023 16:45:46 GMT</lastBuildDate><item><title><![CDATA[V 컬러링에 Next.js 도입하기 (4)]]></title><description><![CDATA[이번 포스팅에서는 공통 핸들러 처리에 대해 정리해 보도록 하겠습니다. 이전 포스트에서도 언급했듯이 현재 인증은 jwt 방식을 사용하고 있기 때문에 우선 공통적으로 토큰을 핸들링하는 과정이 필요했습니다.
또한 V 컬러링은 APP 여부 및 OS…]]></description><link>https://jayoon-kong.github.io/nextjs-4/</link><guid isPermaLink="false">https://jayoon-kong.github.io/nextjs-4/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Wed, 29 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이번 포스팅에서는 공통 핸들러 처리에 대해 정리해 보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;이전 포스트에서도 언급했듯이 현재 인증은 jwt 방식을 사용하고 있기 때문에 우선 공통적으로 &lt;strong&gt;토큰&lt;/strong&gt;을 핸들링하는 과정이 필요했습니다.
또한 V 컬러링은 APP 여부 및 OS 등의 정보에 종속되는 기능이 많기 때문에 &lt;strong&gt;userAgent&lt;/strong&gt; 관리 또한 필요했습니다.&lt;/p&gt;
&lt;p&gt;토큰 같은 경우 기존에는 쉽게 로컬스토리지에 저장했다가 꺼내 쓰면 되고 userAgent는 &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt; 객체로부터 손쉽게 가져올 수 있었지만, 개편된 구조에서는 SSR과 CSR 방식 모두에서 사용해야 했기 때문에 많은 고민이 필요했습니다.
토큰은 쿠키에 저장하긴 했지만 SSR과 CSR에서 가져오는 방식이 다르고, userAgent 역시 SSR인 경우 &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt; 객체에 접근할 수 없기 때문에 &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;에서 넘어오는 context의 req 내부의 header 정보에서 가져와야 합니다.&lt;/p&gt;
&lt;p&gt;고민 끝에 다음과 같이 도식화하였습니다. &lt;del&gt;(아날로그를 좋아하는 저는 아직 공책에 그림을 그립니다.)&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3a395bba6ed446a9272c7537c96f3a83/6d3de/architecture.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 164.55696202531647%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAhABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAEDBAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfRc6IxhnU4rqM4cxCLgH//EABsQAAICAwEAAAAAAAAAAAAAAAAQARECAxMy/9oACAEBAAEFAnEvE6HQui1s84L/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AV//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AV//xAAUEAEAAAAAAAAAAAAAAAAAAAAw/9oACAEBAAY/An//xAAbEAADAAIDAAAAAAAAAAAAAAAAAREQISAxcf/aAAgBAQABPyGiuHPPccOQ8E7s2dReA//aAAwDAQACAAMAAAAQ9BMw+C//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EF//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EF//xAAbEAEBAQADAQEAAAAAAAAAAAABABEhMWFRcf/aAAgBAQABPxDX1ktXcmYBZ0fHyyXL8mXH53DyZVuvbLJo+xwu26sdX//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;architecture&quot;
        title=&quot;&quot;
        src=&quot;/static/3a395bba6ed446a9272c7537c96f3a83/828fb/architecture.jpg&quot;
        srcset=&quot;/static/3a395bba6ed446a9272c7537c96f3a83/ff44c/architecture.jpg 158w,
/static/3a395bba6ed446a9272c7537c96f3a83/a6688/architecture.jpg 315w,
/static/3a395bba6ed446a9272c7537c96f3a83/828fb/architecture.jpg 630w,
/static/3a395bba6ed446a9272c7537c96f3a83/0ede0/architecture.jpg 945w,
/static/3a395bba6ed446a9272c7537c96f3a83/3ac88/architecture.jpg 1260w,
/static/3a395bba6ed446a9272c7537c96f3a83/6d3de/architecture.jpg 2446w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;서버 사이드 렌더링 시 데이터를 fetching할 경우 매번 토큰을 세팅하는 것이 번거로워, 우선 토큰 공통 처리를 하는 것부터 시작하였습니다.
처음에는 단순히 header의 config 정보에서 토큰을 처리하면 된다고 생각하여 axios instance에서 토큰 정보를 불러와서 다음과 같이 바로 세팅하는 방법을 사용하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// my.tsx&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;getServerSideProps&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;GetServerSideProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; req &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// 쿠키에서 토큰 정보를 추출한 뒤 header의 Authorization에 추가해 줍니다.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;defaults&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Authorization&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;token&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// axiosInstance.ts&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getToken&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; auth &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;defaults&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Authorization&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 디폴트 헤더 값을 먼저 가져옴&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; auth&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 없는 경우에 쿠키에서 직접 가져옴&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;token&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 요청 인터셉터&lt;/span&gt;
instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;interceptors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 요청 전에 수행할 작업&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;oauth&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Authorization &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 요청 오류 처리&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;하지만 이렇게 하니 매번 페이지에서 토큰을 추출하여 axios의 header에 직접 박아 주거나, 아니면 req 정보를 axios에서 가지고 있어야 하는 번거로움이 있있습니다.
&lt;strong&gt;페이지에서는 axios의 header에 접근할 필요가 없어야 하고, 또 API 핸들러에서는 토큰 정보를 가지고 있지 않도록 했으면 좋겠다&lt;/strong&gt;는 것이 설계의 가장 큰 목표였습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;에서 받아 오는 req 정보를 어디선가 처리하고 싶다는 생각을 하던 즈음 일단 다음 단계로 넘어가 보기로 하였습니다.
V 컬러링 API 호출 시 요청 header에 넣어야 하는 고유값 중에 APP과 mWeb의 구분이 반드시 필요한 값이 있는데, 이를 위해서는 userAgent 정보를 가져와야 합니다.
userAgent의 값도 앞에서 언급한 것처럼 req의 headers 정보로부터 받아올 수 있습니다.&lt;/p&gt;
&lt;p&gt;req 정보로부터 받아온 쿠키(토큰) 값과 헤더(userAgent) 값을 한번에 처리하면 좋겠다는 생각이 들어 RequestHandler를 구현하였습니다.
여기서는 단순히 req 값의 정보를 세팅하고 리턴하는 작업을 수행합니다.
그리고 공통 페이지인 &lt;code class=&quot;language-text&quot;&gt;_app.tsx&lt;/code&gt;에서 RequestHandler를 호출하여 토큰과 userAgent 값을 세팅하였습니다.&lt;/p&gt;
&lt;p&gt;여기서 받아온 토큰 값과 userAgent 값을 모두 API 핸들러에서 사용해야 하기 때문에(헤더에 저장), 렌더링 방식에 따라 값을 리턴해주는 TokenHelper와 UserAgentHelper를 구현하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TokenHelper&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RequestHandler&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getServerToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; Cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;token&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserAgentHelper&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RequestHandler&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getUserAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getServerUserAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;userAgent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;RequestHandler에서 가져온 토큰/userAgent 값이 있을 경우 (SSR) 해당 토큰 또는 userAgent를, 없을 경우 토큰은 쿠키의 토큰을 가져오고 userAgent는 &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt;의 값을 가져오도록 처리하였습니다.&lt;/p&gt;
&lt;p&gt;OS 정보를 가져오는 EnvChecker에서도 userAgent 값이 필수이기 때문에 위의 UserAgentHelper를 사용하도록 구현하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EnvChecker&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserAgentHelper&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isAndroid&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;android&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-flags&quot;&gt;i&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 API 핸들러에서 config 정보를 세팅하기 위해 토큰과 OS 정보를 가져오면 됩니다. axios의 instance를 관리하는 부분에서 다음과 같이 EnvChecker와 TokenHelper를 호출하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;AxiosRequestConfig&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; deviceInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvChecker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDeviceInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; isApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; EnvChecker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isApp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; TokenHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token string-property property&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isApp
        &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token string-property property&quot;&gt;&apos;...-APP-VERSION&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; deviceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;appVersion&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token string-property property&quot;&gt;&apos;...-MODEL-NAME&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; deviceInfo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;deviceModel&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;Authorization&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;token&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; Record&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; string&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DEFAULT_TIMEOUT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 axios의 instance에서 공통 처리를 하였기 때문에 API 호출부에서는 토큰 및 환경에 대한 어떤 관여도 없이 순수하게 API 호출만을 담당하도록 하였습니다.&lt;/p&gt;
&lt;p&gt;최종적으로 _app.tsx에서 initialize를 해 주었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;App&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;getInitialProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageProps&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ctx &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	RequestHandler&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setServerToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cookies&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  RequestHandler&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setServerAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headers &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; headers&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;user-agent&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;SSR과 CSR 환경에서 모든 정보를 잘 가져오는 것을 확인할 수 있었습니다.&lt;/p&gt;
&lt;h3&gt;이슈1&lt;/h3&gt;
&lt;p&gt;세션 정보를 가져오는 My 페이지에 진입했을 경우 아무 문제가 없었으나, Player 페이지에 진입했을 때 오류가 발생하였습니다.
user.ts에서 initialize가 되기 전에 API 핸들러가 호출된다는 내용이었는데, Player에서는 UserAPI를 호출하고 있지 않는 상태였기 때문에 이슈가 왜 발생하는지 의아했습니다.&lt;/p&gt;
&lt;p&gt;원인을 분석해 보니 Player 컴포넌트에서 부르고 있는 하위 컴포넌트에서 userInfo 정보를 가져오기 위해 UserAPI를 호출하고 있다는 사실을 확인했습니다.
그런데 Player의 경우 순수 CSR 컴포넌트이기 때문에 &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;를 사용하지 않고 있었고, &lt;code class=&quot;language-text&quot;&gt;_app.tsx&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;getInitialProps&lt;/code&gt;에서 리턴하는 props를 받지 못한 상태라 API 핸들러에서 사용하고자 하는 정보들을 가져오는 과정에서 오류가 발생한 것이었습니다.&lt;/p&gt;
&lt;p&gt;문제를 해결하기 위해 Player에서 getServerSideProps를 선언하여 props를 가져오도록 하였습니다.
그리고 결정적으로 모든 페이지에서 userInfo를 가져와야 하기 때문에 _app.tsx에서 initialize를 해 주는 과정에 userInfo를 받아 오는 작업을 추가해 주었습니다.
그리고 dehydratedState로 리턴하도록 처리하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;initialize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;req&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; cookies&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; headers &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ctx

  RequestHandler&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setServerToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cookies&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  RequestHandler&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setServerAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headers &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; headers&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;user-agent&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getQueryClientForUserInfo&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;prefetchQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;QueryKey&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GET_USER_INFO&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getUserInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; queryClient
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageProps &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; AppProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryClientProvider client&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Hydrate state&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;pageProps&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;dehydratedState&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToastManager bind&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;ToastHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Component &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;pageProps&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Navigation router&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Hydrate&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;QueryClientProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

App&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;getInitialProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageProps&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ctx &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;dehydratedState&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dehydrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getQueryClientForUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      Component&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;pageProps&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pageProps &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 각 페이지에서는 데이터를 따로 fetching하지 않아도 userInfo 값을 사용할 수 있게 됩니다.&lt;/p&gt;
&lt;h3&gt;이슈2&lt;/h3&gt;
&lt;p&gt;userAgent 값을 분기 처리할 때 &lt;code class=&quot;language-text&quot;&gt;typeof window !== &apos;undefined&apos;&lt;/code&gt;라는 조건으로 CSR 여부를 판단하면 된다고 ChatGPT가 알려주었으나 실제로는 &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt;를 찾을 수 없다는 오류가 계속해서 발생했습니다.
그래서 &lt;code class=&quot;language-text&quot;&gt;window&lt;/code&gt;의 type으로 표시되는 &lt;code class=&quot;language-text&quot;&gt;globalThis&lt;/code&gt; 조건을 추가하였더니 이슈가 해결되었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getUserAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getServerAgent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; globalThis
    &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; window &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;userAgent
      &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;이슈3&lt;/h3&gt;
&lt;p&gt;원래는 모든 클래스에서 static을 쓰지 않고 생성자를 따로 두어 new로 호출하려고 하였으나, 그렇게 하려면 모든 화면에서 req 정보를 가지고 있어야 한다는 번거로움이 있었습니다.
그리고 무엇보다도 API나 EnvChecker를 호출할 때마다 new로 생성을 해 주어야 해서 코드가 지저분해지는 느낌이 있어 static으로 변경하여 사용하도록 처리하였습니다.&lt;/p&gt;
&lt;p&gt;다음 포스팅에서는 레이어 처리 과정 및 결과를 정리할 예정입니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[V 컬러링에 Next.js 도입하기 (3)]]></title><description><![CDATA[본 포스팅에서는 로그인 여부에 따라 각자 다른 페이지를 리턴하고, 세션을 관리하는 방법에 대해 작성해 보도록 하겠습니다. 현재 V 컬러링에서는 JWT…]]></description><link>https://jayoon-kong.github.io/nextjs-3/</link><guid isPermaLink="false">https://jayoon-kong.github.io/nextjs-3/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Thu, 23 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;본 포스팅에서는 로그인 여부에 따라 각자 다른 페이지를 리턴하고, 세션을 관리하는 방법에 대해 작성해 보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;현재 V 컬러링에서는 &lt;strong&gt;JWT&lt;/strong&gt; 방식을 이용하여 세션 관리를 하고 있습니다. 사용자가 휴대폰 번호나 소셜 계정으로 로그인을 하면 서버에서는 거기에 맞는 &lt;code class=&quot;language-text&quot;&gt;access_token&lt;/code&gt;을 &lt;code class=&quot;language-text&quot;&gt;refresh_token&lt;/code&gt;과 함께 발급하고, API 호출 시 header에 &lt;code class=&quot;language-text&quot;&gt;access_token&lt;/code&gt;을 실어 보내서 인증을 하고 만료가 되면 &lt;code class=&quot;language-text&quot;&gt;refresh_token&lt;/code&gt;으로 다시 갱신을 하는 구조입니다.&lt;/p&gt;
&lt;p&gt;일반적으로 보안이 우수하다고 알려진 방식은 &lt;code class=&quot;language-text&quot;&gt;access_token&lt;/code&gt;은 받아서 바로 header의 default 값으로 세팅하고, &lt;code class=&quot;language-text&quot;&gt;refresh_token&lt;/code&gt;은 cookie의 &lt;code class=&quot;language-text&quot;&gt;httpOnly&lt;/code&gt; 속성을 사용하는 것입니다.&lt;/p&gt;
&lt;p&gt;기존의 V 컬러링은 그냥 로컬스토리지에 토큰을 저장하여 사용하고 있는데, 이번에 next.js를 도입하면서 세션을 서버 사이드 및 클라이언트 사이드 모두에서 사용할 수 있도록 변경해 보는 것이 좋겠다는 생각이 들었습니다. 특히 my 영역의 경우 APP에서도 웹뷰 형태로 제공되고 있기 때문에 초기 로딩 속도가 느려서, 서버사이드에서 세션 유무를 판단한 후 로그인을 하지 않은 사용자는 로그인 페이지를, 로그인한 사용자는 마이페이지를 바로 띄워 주기로 결정한 점이 가장 큰 이유입니다.&lt;/p&gt;
&lt;p&gt;여러 가지 방법을 검색해 보고 라이브러리도 찾아본 끝에, 결국 양쪽에서 자유롭게 사용하기 위해 토큰을 쿠키에 저장하는 것이 가장 좋겠다는 결론을 내렸습니다. httpOnly 속성을 서버에서 리턴해 주면 좋겠지만 현재 구조적으로 그렇게 설계되어 있지 않고, 또 SSR에서는 로컬스토리지에 접근할 수 없기 때문에 양쪽에서 모두 쓸 수 있는 쿠키로 선택하게 되었습니다.&lt;/p&gt;
&lt;p&gt;SSR과 CSR 모두에서 접근이 가능한 &lt;code class=&quot;language-text&quot;&gt;js-cookie&lt;/code&gt; 라이브러리를 설치하고 먼저 로그인 페이지에서 로그인을 하는 로직을 구현한 뒤, 로그인 성공 후 토큰을 쿠키에 저장하는 부분을 구현하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// set token&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Cookies &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;js-cookie&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;setToken&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;token&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;expires&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  Cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;refreshToken&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;refreshToken&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;expires&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  Cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;expired&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expired&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;expires&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//login&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;setUserInfoAfterLogin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/my&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;login&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;authKey&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; AuthApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; authKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;access_token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setUserInfoAfterLogin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 my.tsx에서 세션 유무를 체크하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;getServerSideProps&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;GetServerSideProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; req &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 쿠키에서 토큰 정보를 추출한 뒤 header의 Authorization에 추가해 줍니다.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;token
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;defaults&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Authorization&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;token&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; userInfo &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fetchQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;QueryKey&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GET_USER_INFO&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getUserInfo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;staleTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;cacheTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;destination&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/login?my&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;permanent&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dehydrateState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dehydrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      dehydrateState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      userInfo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;이슈&lt;/h3&gt;
&lt;p&gt;이렇게 구현했더니 새로고침 시에는 마이페이지가 정상적으로 로드되는데, 로그인 및 토큰을 셋팅한 직후에는 그대로 로그인 페이지에 머물러 있는 이슈가 발생했습니다. 로그를 찍어 보니 인증 오류 이슈였습니다.&lt;/p&gt;
&lt;p&gt;참고로 오류가 났을 때의 axios instance의 interceptor 코드입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 요청 인터셉터&lt;/span&gt;
instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;interceptors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token parameter&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 요청 전에 수행할 작업&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Cookies.get(&apos;token&apos;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Authorization &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; token
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token parameter&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 요청 오류 처리&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;axios의 interceptors에서는 토큰 값을 가져왔다 가져오지 못했다 하는 이슈가 있었습니다. 로그를 보며 현상을 파악해 보니 클라이언트 사이드에서 호출했을 때에만 Cookies.get(’token’)을 가져올 수 있다는 사실을 발견할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;그래서 코드를 다음과 같이 수정하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getToken&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; auth &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;defaults&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Authorization &lt;span class=&quot;token comment&quot;&gt;// 디폴트 헤더 값을 먼저 가져옴&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;auth&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; auth
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 없는 경우에 쿠키에서 직접 가져옴&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Bearer &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;token&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 요청 인터셉터&lt;/span&gt;
instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;interceptors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token parameter&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 요청 전에 수행할 작업&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;token &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;oauth&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      config&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Authorization &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; token
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token parameter&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 요청 오류 처리&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;서버사이드에서 &lt;code class=&quot;language-text&quot;&gt;req.cookies.token&lt;/code&gt; 으로 가져온 값을 디폴트 헤더에 넣었기 때문에 SSR인 경우 헤더 값이 있으므로 그 값을 사용하고, 없는 경우는 CSR이므로 쿠키에 접근하여 토큰을 가져오도록 처리하였습니다.&lt;/p&gt;
&lt;p&gt;이렇게 했더니 로그인 페이지에서 세션이 없는 경우에는 로그인 페이지가, 세션이 있는 경우에는 마이 페이지가 리턴되었습니다. 그리고 로그아웃 후 로그인 시에도 자연스럽게 화면이 전환되는 것을 확인할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;(next.js의 /api를 활용하여 쿠키를 httponly로 다시 세팅하여 이용하는 방법도 고민중입니다.)&lt;/p&gt;
&lt;p&gt;가장 삽질을 많이 했지만 많이 배울 수 있었던 경험이었습니다. 😊&lt;/p&gt;</content:encoded></item><item><title><![CDATA[V 컬러링에 Next.js 도입하기 (2)]]></title><description><![CDATA[본 포스팅에서는 비디오 상세 화면 라우터 처리 부분과, 실제 비디오 화면의 구조를 어떻게 개선하였는지를 중점적으로 다룰 예정입니다. 포스팅 내용을 미리 요약하면 다음과 같습니다. Architecture 구현에 대한 고민 rendering…]]></description><link>https://jayoon-kong.github.io/nextjs-2/</link><guid isPermaLink="false">https://jayoon-kong.github.io/nextjs-2/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Mon, 13 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;본 포스팅에서는 비디오 상세 화면 라우터 처리 부분과, 실제 비디오 화면의 구조를 어떻게 개선하였는지를 중점적으로 다룰 예정입니다.&lt;/p&gt;
&lt;p&gt;포스팅 내용을 미리 요약하면 다음과 같습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Architecture 구현에 대한 고민&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;rendering 처리&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;react query 적용&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;swiper library 업데이트&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Architecture&lt;/h2&gt;
&lt;p&gt;next.js를 도입하기로 결정한 뒤 가장 큰 숙제는 &lt;strong&gt;기존 프로젝트를 어떻게 하면 문제 없이 migration할 수 있을까&lt;/strong&gt; 하는 것이었습니다. 신규 프로젝트와 달리, 이미 운영 중인 서비스는 기능이 조금만 잘못되어도 아주 크리티컬한 결과로 이어지기 때문입니다. 특히 V컬러링 같은 경우 자사의 솔루션이 아니기 때문에 기존에 잘 돌아가는 프로젝트를 굳이 왜 건드려서? 라는 블레임으로부터 자유로울 수 없는 상황이라 더욱 많은 고민이 필요하였습니다.&lt;/p&gt;
&lt;p&gt;기존 프로젝트는 전체가 SPA(Single Page Application)로 구현되어 있어 모든 페이지가 CSR 방식으로 처리되고 있었습니다. 사용자와의 interaction이 많은 프로젝트의 성격상 CSR의 장점이 훨씬 많고, 특히 플레이어 같은 경우 스와이핑이 빈번하게 일어나기 때문에 여전히 플레이어 영역은 CSR로 구현되어야 한다는 생각에는 변함이 없었으나, 초기 진입 시 비디오를 로드하는 부분은 서버에서 가져오는 방식이 더 빠를 수도 있겠다는 생각이 들어 아키텍쳐를 어떻게 설계하는 것이 좋은지에 대해 아주 오랜 시간 동안 고민하였습니다.&lt;/p&gt;
&lt;p&gt;고민 끝에 비디오 플레이어 영역은 SSR과 CSR 방식을 혼합하여 사용하기로 결정했습니다. 최초 진입 시에는 서버로부터 컨텐츠 리스트를 받아오는 부분을 포함하여 가장 처음과 그 다음에 표시될 두 컨텐츠의 상세 정보까지 서버 사이드에서 처리하여 렌더링하고, 이후 사용자의 액션에 따라 slide change event가 발생하는 순간부터는 클라이언트 사이드에서 API를 호출하여 렌더링하는 방식을 사용하기로 하였습니다.&lt;/p&gt;
&lt;p&gt;또한 기존에는 redux를 사용하고 있어 데이터가 무겁고 리스트를 구성하는 방식을 reducer에서 일일이 찾아서 처리해야 하는 번거로움이 있었기 때문에, 데이터 fetching 처리를 &lt;strong&gt;react query를 사용&lt;/strong&gt;하도록 변경하였습니다. 서버 사이드 렌더링 시에도 react query를 사용할 수 있을지, 거기서 처리한 데이터를 클라이언트에서도 그대로 사용할 수 있을지에 대한 고민이 많았으나 다행히 react query에서 해당 기능을 지원하고 있어서 무리 없이 사용할 수 있었습니다.&lt;/p&gt;
&lt;h2&gt;rendering 처리&lt;/h2&gt;
&lt;p&gt;먼저 video 컴포넌트를 생성하였습니다. next.js는 파일 시스템 기반의 라우팅 방식을 적용하고 있기 때문에, pages 폴더 안에 ${이름}.tsx 파일을 생성하면 해당 이름으로 웹 페이지에서 접근할 수 있습니다.
현재 video 영역의 URL은 &lt;code class=&quot;language-text&quot;&gt;video/{id}&lt;/code&gt; 형태로 되어 있는데, 이렇게 하려면 video 폴더 하위에 컴포넌트 이름을 [id].tsx라고 지어주기만 하면 됩니다.&lt;/p&gt;
&lt;p&gt;pages 하위에 video 폴더와 [id].tsx 파일을 생성하였습니다.&lt;/p&gt;
&lt;h3&gt;getServerSideProps&lt;/h3&gt;
&lt;p&gt;컴포넌트 영역은 기존 React와 동일하게 작성하면 되지만, 서버 사이드 렌더링을 처리하기 위해서는 &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;라는 함수를 작성해야 합니다. 공식 문서에는 다음과 같이 기술되어 있습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you export a function called &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt; (Server-Side Rendering) from a page, Next.js will pre-render this page on each request using the data returned by &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;즉 Next.js에서 서버 사이드 렌더링을 사용하기 위해서 &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt;를 호출하면, 해당 함수의 데이터를 통해 페이지를 미리 렌더링할 수 있습니다.&lt;/p&gt;
&lt;p&gt;현재 비디오 플레이어 화면에서 필요한 (컨텐츠 관련) API는 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;URL의 id에 해당하는 컨텐츠 상세 정보 조회&lt;/li&gt;
&lt;li&gt;해당 컨텐츠에 매핑된 카테고리 이름 조회&lt;/li&gt;
&lt;li&gt;카테고리 이름으로 연관된 컨텐츠 id list 조회&lt;/li&gt;
&lt;li&gt;위로 스와이핑했을 경우 로드되는 이전 컨텐츠 상세 정보 조회&lt;/li&gt;
&lt;li&gt;아래로 스와이핑했을 경우 로드되는 이후 컨텐츠 상세 정보 조회&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;이 중에서 꼭 필요한 것은 &lt;strong&gt;현재 컨텐츠의 상세 정보를 조회&lt;/strong&gt;하는 API이기 때문에, 우선 부하를 줄이기 위해 서버사이드에서는 해당 API만 호출하고 나머지는 CSR로 처리하기로 결정하였습니다.&lt;/p&gt;
&lt;h2&gt;react query&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// fetch data&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;getServerSideProps&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;GetServerSideProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;id &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;prefetchQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;QueryKey&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GET_CONTENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; ContentsApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    &lt;span class=&quot;token literal-property property&quot;&gt;staleTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6000&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	    &lt;span class=&quot;token literal-property property&quot;&gt;cacheTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;
	  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dehydratedState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dehydrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      dehydratedState
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;QueryClient&lt;/code&gt;를 선언하고, param으로 넘어온 id로 컨텐츠 상세 정보를 조회합니다. 이렇게 하면 서버에서 HTML을 내리기 전 미리 prefetch된 데이터를 fetching하여 클라이언트로 전달할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// useContent hook&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useContent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; enabled&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; boolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;QueryKey&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GET_CONTENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; ContentsApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;staleTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;cacheTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      enabled&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; useContent&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Video&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useRouter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;query&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; contents &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; categoryNames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; contents&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;categories&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;contents&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; list &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;getContentsByCategories&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; categoryNames&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; ContentsApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContentsByCategories&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;categoryNames&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;staleTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6000&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;cacheTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;enabled&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;contents&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; idList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; list&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contentsList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contentsId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; handleContentChange &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/video/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;idList&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;CenterLoading &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;idList&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    idList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;splice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PlayerComponent
      list&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;idList &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;home&quot;&lt;/span&gt;
      id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      onContentChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleContentChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위에서 언급한 API를 순서대로 호출한 로직입니다.&lt;/p&gt;
&lt;p&gt;먼저 useContent(id) hook을 이용하여, &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt; 에서 받아온 데이터를 조회하였습니다.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;react query&lt;/strong&gt;를 사용할 때는 항상 &lt;code class=&quot;language-text&quot;&gt;useQuery&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;fetchQuery&lt;/code&gt;의 첫 번째 인자 값이 키가 되는데, 이 키를 바탕으로 현재 프로젝트가 해당 데이터를 최신으로 유지하고 있는지 여부를 판단합니다.
즉, [QueryKey.GET_CONTENT, id] 키로 한 번 조회한 데이터는 이후에 API를 다시 호출하더라도 데이터 상태가 stale하게 변경되지 않는 이상 fetching이 다시 일어나지 않습니다.&lt;/p&gt;
&lt;p&gt;데이터 상태의 신선도를 판단하거나 다시 호출하기 위해서는 &lt;code class=&quot;language-text&quot;&gt;staleTime&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;cacheTime&lt;/code&gt; 등의 옵션을 사용하면 되는데, 위 예제에서는 우선 &lt;code class=&quot;language-text&quot;&gt;staleTime&lt;/code&gt;을 설정하였습니다.
그렇게 되면 해당 시간 동안은 데이터가 fresh한 상태라고 판단하여 API 호출이 일어나더라도 실제로 fetching이 일어나지 않고 캐시된 데이터를 사용하게 됩니다. 이를 통해 불필요한 API 호출을 줄여 성능을 최적화할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이렇게 fetching된 데이터는 &lt;code class=&quot;language-text&quot;&gt;queryClient&lt;/code&gt;에 담기게 됩니다. 여기까지는 CSR 방식에서 &lt;strong&gt;react query&lt;/strong&gt;를 사용하는 방식과 동일합니다.
하지만 이번에는 서버에서 최초 데이터를 fetching하였기 때문에 이 부분을 클라이언트로 전송하는 방식에 대해 조사해 보았습니다.&lt;/p&gt;
&lt;h3&gt;hydrate&lt;/h3&gt;
&lt;p&gt;서버 사이드에서 fetching된 데이터는 queryClient에 담기고, 이것은 dehydrate라는 작업을 통해 전달할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;dehydratedState&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; DehydratedState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dehydrate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 이렇게 만들어진 dehydratedState를 prop으로 전달하면, _app.tsx에서 Hydrate로 감싸 전달받을 수 있고, 최종적으로 PageProps를 통해 각 컴포넌트로 전송됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// _app.tsx&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryClientProvider client&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Hydrate state&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;pageProps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dehydratedState&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Component &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;pageProps&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Navigation router&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Hydrate&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;QueryClientProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;쉽게 말하면 서버 사이드에서 말린 데이터를 클라이언트 사이드에서 받아, 사용하고자 하는 각 컴포넌트에서 다시 적셔서 사용한다고 볼 수 있습니다. 특별히 데이터를 전송하지 않았는데 어떻게 그 값을 판단하지? 라는 생각이 들 수 있는데, 앞에서 언급했듯이 react query에서 제공하는 키 값으로 데이터를 받아 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; contents &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;실제 컴포넌트에서는 위와 같이 사용할 수 있습니다. 이렇게 하면 키 값의 구분자가 되는 [QueryKey.GET_CONTENT, id] 값에 따라 기존에 호출되지 않았던 API에 대해서만 데이터 fetching이 일어나기 때문에, 컴포넌트에서 API를 호출하였지만 실제로는 서버에서 이미 받아온 컨텐츠의 데이터는 가져오지 않게 됩니다.
즉 이 예시를 적용하여 네트워크 탭을 확인해 보면 &lt;strong&gt;위 API가 클라이언트 사이드에서는 실제로 호출되지 않는다는 사실을 확인할 수 있습니다&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;그리고 서버 부하를 줄이고 더 나은 사용자 경험을 위해 나머지 API는 클라이언트에서 호출하도록 처리하였습니다.&lt;/p&gt;
&lt;p&gt;아래는 하위 컴포넌트(&lt;code class=&quot;language-text&quot;&gt;PlayerComponent&lt;/code&gt;)에서 처리하는 방식입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; currentData &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; prevData &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; nextData &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Swiper &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;swiperParams&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; direction&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;vertical&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;video&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SwiperSlide key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;video_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;video&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;index&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;reactid&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;video&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; current &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; current &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Content
            type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            contents&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              contents&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;contentsId &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; video&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;contentsFiles
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            isShown&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; current&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SwiperSlide&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Swiper&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;하위 컴포넌트 진입 시 빠른 렌더링을 위해 스와이프가 일어날 때 미리 직전/직후의 썸네일 및 동영상을 로드할 수 있도록 하였습니다.&lt;/p&gt;
&lt;h3&gt;routing&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; handleContentChange &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/video/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;shallow&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;swipe change event가 일어날 때에는 상위 컴포넌트에서 받아온 &lt;code class=&quot;language-text&quot;&gt;handleContentChange&lt;/code&gt; 함수가 호출되면서 &lt;code class=&quot;language-text&quot;&gt;video/${nextId}&lt;/code&gt; 또는 &lt;code class=&quot;language-text&quot;&gt;video/${prevId}&lt;/code&gt;로 URL이 변경되고 컴포넌트가 다시 실행됩니다.
여기서 중요한 부분은, &lt;code class=&quot;language-text&quot;&gt;**router.replace&lt;/code&gt;를 할 때 &lt;code class=&quot;language-text&quot;&gt;{ shallow: true }&lt;/code&gt; 옵션을 주었기 때문에 getServerSideProps가 다시 실행되지 않는다는 점**입니다.
이미 클라이언트 사이드에서 직전/직후의 동영상 정보를 가져왔기 때문에, 사용자는 문제없이 이전 동영상과 다음 동영상을 감상할 수 있습니다. 이렇게 함으로써 서버 부하를 줄일 수 있습니다.&lt;/p&gt;
&lt;p&gt;그리고 &lt;code class=&quot;language-text&quot;&gt;useQuery&lt;/code&gt;로 가져오는 키 값에 따라, 이미 가져온 데이터는 캐싱되어 다시 스와이핑이 되어도 fetching되지 않습니다.&lt;/p&gt;
&lt;h2&gt;Swiper library update&lt;/h2&gt;
&lt;p&gt;기존의 swiper library는 오래되기도 했고 next.js와 호환하기에는 몇 가지 문제가 있어 swiper library를 업데이트하였습니다. 사용법에 크게 차이가 없으나 달라진 점은 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Swiper&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; SwiperSlide &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;swiper/react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; SwiperCore&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Navigation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Pagination &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;swiper&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; type &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Swiper &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; SwiperType &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;swiper/types&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Navigation 및 Pagination 모듈을 초기화합니다.&lt;/span&gt;
SwiperCore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Navigation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Pagination&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// SwiperType을 따로 import하여, activeIndex를 가져올 때 swiper.activeIndex를 사용합니다.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 이렇게 하면 기존의 useRef로 swiper를 선언하지 않아도 됩니다.&lt;/span&gt;
&lt;span class=&quot;token function-variable function&quot;&gt;onSlideChange&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;swiper&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; SwiperType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; swiper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;activeIndex &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;setCurrent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 해서 기존과 동일한 UX로 player를 재구현해 보았습니다. 사실 체감상 속도가 크게 개선되었다고 느끼기는 어렵지만, architecture 설계에 대해 심도 있게 고민해 볼 수 있는 좋은 기회였다고 생각합니다.&lt;/p&gt;
&lt;p&gt;다음 포스팅에서는 사용자 세션을 적용한 결과를 리뷰해 보도록 하겠습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[V 컬러링에 Next.js 도입하기 (1)]]></title><description><![CDATA[V 컬러링은 2020년에 처음 만들어진 SPA(Single Application Application) 형태의 모바일 웹입니다.
여러 번의 성능 최적화 작업을 통해 Client side rendering…]]></description><link>https://jayoon-kong.github.io/nextjs-1/</link><guid isPermaLink="false">https://jayoon-kong.github.io/nextjs-1/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Sun, 05 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;V 컬러링은 2020년에 처음 만들어진 SPA(Single Application Application) 형태의 모바일 웹입니다.
여러 번의 성능 최적화 작업을 통해 Client side rendering 방식을 사용하고 있음에도 불구하고 속도 측면에서 현재 Native 수준의 성능을 자랑하고 있지만, 3년 동안 수많은 운영 과제를 통해 코드 부채가 조금씩 쌓이면서 불필요한 코드도 많아지고 뭔가 좀더 잘 만들어 볼 수는 없을까? 하는 생각이 계속 과제처럼 따라다니고 있었습니다.&lt;/p&gt;
&lt;h2&gt;동기&lt;/h2&gt;
&lt;p&gt;운영과제만 하는 것이 지루해서 뭔가 혁신적으로 해볼 수 있는 게 없을까 계속 고민하다가 문득 (정말 갑자기) &lt;code class=&quot;language-text&quot;&gt;Next.js&lt;/code&gt;를 도입해 보는 것이 어떨까 하는 생각이 들었습니다.
부분적으로 리팩토링을 하거나 신규 기능에 한해서 아키텍쳐를 새로 설계할 수도 있겠지만, 오래된 라이브러리를 변경하거나 테스트 코드를 추가하기 위해서는 확실히 전면 개편이 필요하다고 판단하였습니다.
또한 코드를 모듈화하여 좀더 가독성 있고 유지보수가 쉽도록 만들고 싶었고, 무엇보다도 최초 아키텍쳐 설계를 제가 한 것이 아니었기 때문에 처음부터 끝까지 고민하여 정말 잘 설계된 V 컬러링을 스스로 만들어 보고 싶다는 욕심이 가장 컸습니다.&lt;/p&gt;
&lt;p&gt;정리하자면 &lt;code class=&quot;language-text&quot;&gt;Next.js&lt;/code&gt;를 선택한 이유는 다음과 같습니다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;SSR (또는 SSG) 와 CSR 방식을 모두 지원하는 프레임워크&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;홈의 초기 뷰포트에 나타나는 부분 및 비디오 화면, 마이 화면 등의 렌더링은 SSR을 사용하면 더 빠를 것이라는 추측에서 부분적으로 SSR을 적용할 예정입니다.&lt;/li&gt;
&lt;li&gt;하지만 홈 화면의 스크롤 하단 영역 및 기타 사용자와의 interaction이 많은 부분은 여전히 CSR을 적용하여 위험 부담을 줄일 예정입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;기존 React 코드 호환 및 신규 라이브러리 적용 가능&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;기존의 코드를 최대한 재사용하면서도 api 공통이나 에러 처리 등은 새롭게 구현하고, swiper 등 오래된 모듈은 신규로 교체하여 사용성을 높일 예정입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;테스트 코드 작성 가능&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;현재 버전에 붙이면 에러가 나는 테스트 코드들을 적용하기 위해 버전을 업데이트하고, 테스트 코드를 용이하게 작성하기 위해 기능을 세분화할 예정입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;이미지 레이지 로딩 및 링크 등의 성능 최적화 기능 제공&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Next.js&lt;/code&gt;에서 자체적으로 제공하는 &lt;code class=&quot;language-text&quot;&gt;Link&lt;/code&gt; 및 &lt;code class=&quot;language-text&quot;&gt;Image&lt;/code&gt; 등의 기능을 통해 성능 최적화를 할 예정입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;프로젝트 생성 및 환경 설정&lt;/h2&gt;
&lt;p&gt;기존의 프로젝트에 Next를 설치하는 방법도 있었지만 일단 처음 시작해 보는 만큼 신규 프로젝트를 생성하였습니다.
typescript를 이용한 &lt;code class=&quot;language-text&quot;&gt;Next.js&lt;/code&gt; 설치 명령어는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;npx create&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;next&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;app &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;typescript vrbt&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;frontend&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;next&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 CRA를 생성할 때처럼 &lt;code class=&quot;language-text&quot;&gt;next.js&lt;/code&gt; 프로젝트가 생성됩니다.
저는 초기 설치 단계에서 ChatGPT의 도움을 많이 받았습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Next.js&lt;/code&gt;에서는 이전에 사용했던 &lt;code class=&quot;language-text&quot;&gt;Gatsby&lt;/code&gt;와 동일하게 기본적으로 파일시스템 기반의 라우팅 방식이 사용됩니다.
pages 폴더 내부의 &lt;code class=&quot;language-text&quot;&gt;index.tsx&lt;/code&gt; 파일이 root directory가 되고, &lt;code class=&quot;language-text&quot;&gt;_document.tsx&lt;/code&gt; 파일이 기본 index.html의 역할을 하며, &lt;code class=&quot;language-text&quot;&gt;_app.tsx&lt;/code&gt; 파일은 CRA에서의 app.tsx 파일과 동일한 역할을 합니다.&lt;/p&gt;
&lt;p&gt;라우터를 사용해야 하기 때문에 &lt;code class=&quot;language-text&quot;&gt;_app.tsx&lt;/code&gt; 파일 작성을 ChatGPT에 요청해 보았습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/c5dd0929b4237f1cfdc3261558630cd1/133ae/chatgpt_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 145.56962025316454%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEDklEQVR42qVWV1MjRxCeTdqcpJVABOl8yYBduI6Mq0CrLAHKOZHj8eInV/nFf/1zzUgEG92dj3v4qrd7dr7pr3tWLfJT7S/s7h2gWGyiUGwhl68jk60iX2gwS/1CsYm19QTWN/xvguyup7C9k8XmdhobWylsbqWxtZ1hPrNbaWxsjt/5L3Z2c9j5fYzdiSX+33/isDZCo3WOeuuc2VrjFPXmGVrdKzQ7l2g0zyaxc7Q6l8w22xcoHHSRzjb+BeKfXiBbaLPFXKGNbL6FXKGFfLH96BcOOsgXO8jRtXyLxSjSmTqS6Rryk/00RnKpBra2U3gT/4DFxfdYWHiHufm3WFh8z/wYtQvj58XYB8SeI/4R8fhHLC39xrC8sgZSOOxjafkTiBGC6nhYMEy8tW3YpgXBCoOYKohngdMVEEK+CikggxQOelheWQfvRuHYHt44Dmbn41AMG8QwQSIuSMgCCdvgdXUqEcdxzKqa8URIRBmSrMEiBIooQbdtGI4FxdDhBF3olglFUxEMBmEYBnief0GsqvqEcHkNRDERcGYQD3mYC4UQC4bwLhRGNBJByPNgmSY0TUM4HIZt2xAE4cuErIaEQFYUaJaFgKpCFUWokgRJkr5Zu+mEvADdchHVdMyqOqKmhRnDhGVZ0HUdukzgGDJkWYYwRe4LQk4Q4akuooKCmG5Ac0zohobAbAiaYyEaduBY2lSpUwkFgZ9a6C919aGzUwl/XvqEQEDCTCQCz/MQcYMwNBXE1sG5JrigCaIEEAmHEYvFEI1GmXVd92tN4SFq1tSTX9kUHoYbgiiKP0648ss6C0TCHlZXVzE3P4+AKMHhFbiSBk1R/1fmL+4hvbD0iqiqyq6GyknQhAAj/64M6aenKPKrpU4lZEGOZxecJxyEVxAqikYJu1j5dROC4UKxPUhOBEHNxJysQhAl8LwAQRAZeEFgGPtPcQqO42HQX6hMrolUpoaEf4T9xBGze34Je8ky/FQFfqqMRLKMfb+EJPMr8NnaOJ7wS8xPJEvMJ6lMHYelPs4v/0BvcIt27xr90Wf0h3cYHN+j07th8Qd0B7cYntyjN7jDYPQZ3f4Nhsf3KFVHoMkROljovOj2rtFqX+CoPES1cYpq/QS15hnK1REbSP3BLUqVIUqVsU/jdJDR9yjoPKHJsQyPygM2yRqTqTcY3TFLs+0Obtiko36nf82ypAfR2GB4h/6QZn7DbKV2PCakJ3R612NMNlHJ7e4Vk1SdjFWqot29ZBlSQkoyOqFluWKyaVJMMu00lb3v0+JW4adqSKbrbM6mMk8zlx7+/PkRz9bGkitD9Ed3TCorfP+Ggcqk2TD53avH4U8l0zjDpBwPfw4Y4cFRj21o967QaF+wBdoAeiLt3PfgH6loU/LkWNZHAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;chatgpt_1&quot;
        title=&quot;&quot;
        src=&quot;/static/c5dd0929b4237f1cfdc3261558630cd1/f058b/chatgpt_1.png&quot;
        srcset=&quot;/static/c5dd0929b4237f1cfdc3261558630cd1/c26ae/chatgpt_1.png 158w,
/static/c5dd0929b4237f1cfdc3261558630cd1/6bdcf/chatgpt_1.png 315w,
/static/c5dd0929b4237f1cfdc3261558630cd1/f058b/chatgpt_1.png 630w,
/static/c5dd0929b4237f1cfdc3261558630cd1/40601/chatgpt_1.png 945w,
/static/c5dd0929b4237f1cfdc3261558630cd1/78612/chatgpt_1.png 1260w,
/static/c5dd0929b4237f1cfdc3261558630cd1/133ae/chatgpt_1.png 1424w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;생각보다 상세한 설명과 함께 예제를 작성해 주었습니다.
저는 여기에 공통으로 사용할 &lt;Layout&gt; 컴포넌트만 바깥에 감싸 주고, &lt;Navbar /&gt;는 하단으로 옮기는 작업만 수행하였습니다.
그리고 기존의 css 파일들을 import해 주었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Layout &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../pages/components/Layout&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; AppProps &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;next/app&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useRouter &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;next/router&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@/static/css/base.css&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@/static/css/common.css&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;@/static/css/search.css&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Navigation &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./components/Navigation&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; pageProps &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; AppProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useRouter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 라우팅 될 때마다 실행되는 함수&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleRouteChange&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Route changed:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;events&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;routeChangeStart&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleRouteChange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Component &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;pageProps&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Layout&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Navigation router&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ChatGPT가 작성해준 코드와 별반 다를 것이 없죠? &lt;code class=&quot;language-text&quot;&gt;Next.js&lt;/code&gt;는 Hot reload 기능도 지원해 주기 때문에 결과가 바로 나타났습니다.
그리고 기존 컴포넌트들이 들어 있는 &lt;code class=&quot;language-text&quot;&gt;src&lt;/code&gt; 폴더와, font, css, images 등이 들어 있는 &lt;code class=&quot;language-text&quot;&gt;static&lt;/code&gt; 폴더는 그대로 복사해 왔습니다.&lt;/p&gt;
&lt;p&gt;시험삼아 V 컬러링의 홈 부분 중 일부를 가져와 보았습니다. 헤더 부분과 하단 Navigation이 적용된 모습입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/110065297cbf4c97e28fdc11797a98b9/4971b/vcoloring_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 215.18987341772151%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeklEQVR42u2WzU7CUBCFL7SUhB0voTHxBUx8A3c+DAsCCS3yboQlhCWG0iIaI6XpLy3lmBl+bAUWalemk5xMz5253532biocxwXFdrs9isKyLCyXS3iex3Ich71t2+zTe5IkYW+aJgQ1HorpPBwO0e/3MR6PMRqN2A8GA16bTCaZ3gzQdV0ubJIECZ2219fpuwk2m2QPAfeSPyiK4zTQw8wwMV+8wly84XlqQDdeMDXmmM7mnN8/LITrCH4QIgjXJ/L8ADSrYRi7CcNwDQLTBiq6ns/PLD/gTTRFFJ1RHPNhYGDqG/4lvl3K6S3/VBdvOXdgTq9cAAtgASyABbAAFsAC+D+Bufx9rVY2L8Rx/GtF0e4PVtd1COQYNJxot9vQul2orRbUZhOaqkLTNKiqik6nw5n8JVEPqdd7QqPRgBBCgHV9C/HwiKMXAoqiZPw5lUql7FpFUVAWApWrGyh395AkGeVyGbIso16vo1arsZck6ayoXq1WGUz5E8tUsYfRsw3DAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;vcoloring_1&quot;
        title=&quot;&quot;
        src=&quot;/static/110065297cbf4c97e28fdc11797a98b9/f058b/vcoloring_1.png&quot;
        srcset=&quot;/static/110065297cbf4c97e28fdc11797a98b9/c26ae/vcoloring_1.png 158w,
/static/110065297cbf4c97e28fdc11797a98b9/6bdcf/vcoloring_1.png 315w,
/static/110065297cbf4c97e28fdc11797a98b9/f058b/vcoloring_1.png 630w,
/static/110065297cbf4c97e28fdc11797a98b9/4971b/vcoloring_1.png 784w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;아직 아무것도 없긴 하지만 어쨌든 성공적으로 렌더링된 모습을 볼 수 있습니다.&lt;/p&gt;
&lt;h2&gt;REST API를 활용하여 SSR 페이지 생성하기&lt;/h2&gt;
&lt;p&gt;이번에는 상단 메인 배너를 SSR을 사용하여 가져와 보도록 하겠습니다.
역시나 ChatGPT에게 활용 방법을 물어보았습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b06dace60fc8ca5713382855c4f4ca4c/c4451/chatgpt_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 88.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC0klEQVR42qWUWU/bQBSF7cTO7mwPkFLRVkBAxAlVyUpbBAmJlyxksZ0VstOmlFIqIaH++lPNOARSpVIlHj6dmTt3zlyPfc1Eit+QzjYgS3XIioZyuQVF1VEsNVGutJHO5BFPnCKRzC5BYqtgxE864hkFmaM8MkcFHH2U5mqOSdJhnHCCw8Rc4ycrDyEw2VYHWVVHQdIhKQbykoaCrKMgG3Quq01IsgFFbS3mSrGFs4KG01wV2VxtCabwcA+5PUSjPkTDGKOmmaoZY+itKfTmFLXGkGpdIzpBs32FUqVHTfOSvgSTy9WRyzdQqnShGRO6mZgR02pjQMd1bWQeYEwgqy2c5mpLZpLcRIFigCEBMklnzhCLJSGKCYjRJKLRJNX9aIqqGEshEk1hPxJHJJIw2Y8jIiYQTxwjlSb3ewyGVKcUOwhtvAPj9IIXguDcPrCeIOxOL0JWHn6eR5DjsW6zIxDwg3PYwVhYMJwFDMMsYFnWNFRLXYRCm2AcAgLrr7G2tgarPwSfEMSmR4A34IPdL8DqssPq84D1OMF4nLAILthstidDi2Ve4aOhlYfD64fgccNid4F3ueF2OCDwPDiOW6pmFZZHQ1LhOjG08PA4/eD/Y/MqWPa54atNGgxvvIVXEF5uGAq9Acdz4O2Pd8LSS6YXTWD+Dc2hj2x99pbnFb4Y8oFKShMf4p+xvSNid+8AO+EYwrsx7O69p3My3toW6TrRre3IXEXshKPznAOaTz9sUiVpreH4Du3uDL3La/SHP9Drf8dwcofB6BZXX+8xnv6izK4fqF7f/MZF/8bMG/+kexeGDX1EjYzWFO3uF/SHN7RnK7VLk+oFbUWi57U+zmuXtLfVUgdKsY3yeQ/FcufJkPTqYHxLTdu9GToXM3R6M7Ov9RHdTJRQrZs9ToxJvNYY0Dg5bGFIFkhFi4ZXDHq3BPK7Ij+Fv5HUJtRSe7FOcv8Ax6U21v/+xw8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;chatgpt_2&quot;
        title=&quot;&quot;
        src=&quot;/static/b06dace60fc8ca5713382855c4f4ca4c/f058b/chatgpt_2.png&quot;
        srcset=&quot;/static/b06dace60fc8ca5713382855c4f4ca4c/c26ae/chatgpt_2.png 158w,
/static/b06dace60fc8ca5713382855c4f4ca4c/6bdcf/chatgpt_2.png 315w,
/static/b06dace60fc8ca5713382855c4f4ca4c/f058b/chatgpt_2.png 630w,
/static/b06dace60fc8ca5713382855c4f4ca4c/40601/chatgpt_2.png 945w,
/static/b06dace60fc8ca5713382855c4f4ca4c/78612/chatgpt_2.png 1260w,
/static/b06dace60fc8ca5713382855c4f4ca4c/c4451/chatgpt_2.png 1450w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/371de14dab87bd99efafa66864cb9644/acf8f/chatgpt_3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 143.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD5klEQVR42qVW+XMSWRB+cwGDwwBCYFOBRYMESFU0RjeHW2WiAh6RIxzDzXDkTsy61v7/31b3AOJatSaVH77qfv0m/fr7+vE64uNhG63OGerNYzSax+j0LtjWrQnHG60TVOsjtLvnOCx28DZXxbt8jTHzCx8sRr7QgNh/U8bGxjay6U2spTfxJLuFVHoTqbVnSKefI53ZQib7Atn1n5HJbmHj6Q62tw/w8o/XePFyH2J3LwfZ7YXsj8DUDcRdboSDQfy2vIxAIABVVSGEuBUeGCbE7qs8hKzAG4nDZwahCgFFlqGoKiRJunUygmH4Ifb+LPDCb/oQj8fxMByGaZoIBoOMuyR1Er5yEmqahlQqhWQyiVgshkQiwQdEo9Fb0+aEu9OEgUAQkUgEiqIwXbaKwsluWyUn3NnLw+Nxs2530et/KsxDUjUIRYOkuiAUFRL5igq3JMEtJHgYAm6qWpJ/kZCujW5CC63ACC9DDyxBDccQ0H1I6l74fQYePvAi4jMQWgrBEw5CeFwQhg5N90D6OWEeQpIhGyGsrKwgGolA9kcR8AexbJoIBwNQTQNClSFc6nd4XFDdrh/0nVMWQoJw6dA8OmTSUpIhyQpkSYImJMh3uzZ55x4aESz5QlAU+X5NmV1sr+ZCIhZ3KrxflwucxGeaUDWN6ZMud4NThM8XgNjZzUFV7n8HCR7dC/H6oIjkk3U8Xs0yEo/SbFeT63j0OMNYXNP+ajI7jZF1Yr8nUljLbEK8/9hEu3eBVvcCw/FfOD75hm7/iv32NNbpXWI4+YqefY3R5CsGoxv0h19wfPoP75UqNorlAT597kLQS9u3r9DpnfPLXK0PYbXo9Z7wy02xStVGzRqzX2t8t/Sqs2+NeV0s9yFyhTqq9TFKlT4O3law/6byg10Eve4HC/uLawKNBFE+GqDWmOCo5syNdveMqx0Mr3lNc+W/tm9fz9dW64SZ0Jrmk2h2zlinbv8S9uiGhxR9WOeBdT4fYM3OKcfpj52Dnb3GdLi1e+c4qo8gDotd5k+USauj2hAUo/JnU23m/wrvcjUISkINIHFbnVPUGk4TSIqGNWHbnFZCTZg1o2ZN2FKcYkSdvhUUIL16g0umQH53cMnUifJwfAN7RFfkG4ajLxyn7zr9C9ayP3TgJLQhDktdPoUrtSZsq40xN4q6T9otVkeS0D79A1CbVlqu2nN5RIm7PHYS1Ue8yZ23JihVBtx9Svy51JtrTPeNMJNmMS7oZHt8g2b7lGmQpY4TbbIzetTVycnfTJ98pmpfT6W5QM++YiZ8DxfbT1QoKcV6g6u54B8+tUA/ghny7xtzn6jO/H8BybJ5DJpwrhQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;chatgpt_3&quot;
        title=&quot;&quot;
        src=&quot;/static/371de14dab87bd99efafa66864cb9644/f058b/chatgpt_3.png&quot;
        srcset=&quot;/static/371de14dab87bd99efafa66864cb9644/c26ae/chatgpt_3.png 158w,
/static/371de14dab87bd99efafa66864cb9644/6bdcf/chatgpt_3.png 315w,
/static/371de14dab87bd99efafa66864cb9644/f058b/chatgpt_3.png 630w,
/static/371de14dab87bd99efafa66864cb9644/40601/chatgpt_3.png 945w,
/static/371de14dab87bd99efafa66864cb9644/78612/chatgpt_3.png 1260w,
/static/371de14dab87bd99efafa66864cb9644/acf8f/chatgpt_3.png 1340w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이미 공식 문서에서도 읽어보긴 했지만, SSR을 이용하기 위해서는 &lt;code class=&quot;language-text&quot;&gt;getServerSideProps&lt;/code&gt; 함수를 사용하면 됩니다.
이 함수를 사용하면 서버 사이드에서 외부 API를 호출할 수 있습니다.
또한 위 설명에도 나와 있듯이 이 함수 내에서는 &lt;code class=&quot;language-text&quot;&gt;fetch&lt;/code&gt;를 포함한 어떤 비동기 작업도 수행할 수 있습니다.&lt;/p&gt;
&lt;p&gt;ChatGPT가 작성해 준 코드를 활용하여 배너를 가져오는 코드를 만들어 보았습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;getServerSideProps&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; GetServerSideProps&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Props&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;baseURL&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/v1/배너 가져오는 주소&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;POST&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string-property property&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;DURING&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;아직 &lt;code class=&quot;language-text&quot;&gt;fetch&lt;/code&gt;의 공통 함수는 작성하기 전이라 우선적으로 위와 같이 작성하였습니다.&lt;/p&gt;
&lt;p&gt;다음으로는 컴포넌트에서 받아온 &lt;code class=&quot;language-text&quot;&gt;data&lt;/code&gt;를 이용하여 UI를 그리는 작업을 수행하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// index.tsx&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Home&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; bannersGroups &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;wrap&quot;&lt;/span&gt; className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;flx-sti-wrap&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Header &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;section className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sch-main-cont&quot;&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;container&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;bannersGroups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;MainBanner bannersGroups&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;bannersGroups&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;section&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// MainBanner.tsx&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;MainBanner&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; bannersGroups &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;bannersGroups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    bannersGroups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Image className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;item-banner&quot;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imgUrl&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MainBanner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;API 요청이 성공적으로 수행되어, bannersGroups의 갯수만큼 이미지가 잘 출력되는 것을 확인할 수 있었습니다.&lt;/p&gt;
&lt;h2&gt;swiper library 설치&lt;/h2&gt;
&lt;p&gt;기존에 사용 중이던 &lt;code class=&quot;language-text&quot;&gt;react-id-swiper&lt;/code&gt; 라이브러리는 너무 오래된 버전이라 새로운 버전으로의 교체가 필요했습니다. &lt;code class=&quot;language-text&quot;&gt;next.js&lt;/code&gt;에서 사용하기 위해 이번에도 ChatGPT에게 물어보았습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b44e2957c8d1fd32a2f14e6425edd7a1/07a9c/chatgpt_4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 94.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC6ElEQVR42pWTa1PaQBiFN0YgJORCCCogxXpBpeqoqKNVQ0hCQLwAuaDOdLzrn+jn/u7T2QWqjo7WD8+c3Te7J9mzb8iSd4/dgyM4zhlst4O6fQbH7aDh+QyvSbWH7R0b1S0LW9v1DyHLzi129jyYZhv7By0cmm0cHB4xDs0BtE7NNqu1N9D6S4jVOkWtfgar3oFld2DRsd1B3emiTtUeqO32YDtdpk7DZ0rXmdbpK4j15zeO/SsE4R16wS386A5d/xp+eIcgukN08Yigf4/o/BF+eIuQjR8Ynd4VXC9iNJoR3GYE4jQCNukFN8yAGvYvn5gB3Uyf2a4Pum6E7T6PXS+E0wj/zcmouLvXwGbVHOYygIY8yMp8l42qydaZtTaDZk0GbwiQyxehyDL0tA5VVaHrOgghX0IUZWoYsE9e/lHFzPdFzM1XMDu3zChMz2G6OIfit3mm08Vn/VZaeAVdM7+wOjiy1+qj07tG17+FH94jPH9EEN0j7D8w7fo36F88sWf0ssL+I45Pf6HVvmQ02xdoUj26eM6w2YpYU9M+NK0T1uS0sd1GF2btGFb9lFF3zlCzTrD308POrovdPQ+2Q9usgxptm5FhLleCJMnQNB2KkkZSTCEWExCPJ5FIiEgkki8QISQlJIekUiokKQXDmAJxvJAZZiamEVcyENIq4oYKXhZBuK9dipAUh4aNANnCLPh0AZwqg5tMg6OmhSy4fAaxtIIxjgOhvGPEDeuSpDwbGrkSxpQsiJAA0WUQTQIxlIGKwv+1jSTTDEdHLoDQvOICMvw4FEWBkc1CVhRomoaMYbBaLBb7xHCYoZHNg6R0SEoG5XwBMzMzmJqcRF7WUVInUJzMQdU08Dz/sSFtbGo4NVUY5jEGPjYObriRJxzGaP3VZu6TDL0QaSMHwsdBEhJIXIRGb+2Lv54gJEd9GGBtYx8Ly5tYrFRRrlSxsrSOytI6FhbXUC6vMWWU31JeXMN8eRWVlW38BUo4MD2EPdR8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;chatgpt_4&quot;
        title=&quot;&quot;
        src=&quot;/static/b44e2957c8d1fd32a2f14e6425edd7a1/f058b/chatgpt_4.png&quot;
        srcset=&quot;/static/b44e2957c8d1fd32a2f14e6425edd7a1/c26ae/chatgpt_4.png 158w,
/static/b44e2957c8d1fd32a2f14e6425edd7a1/6bdcf/chatgpt_4.png 315w,
/static/b44e2957c8d1fd32a2f14e6425edd7a1/f058b/chatgpt_4.png 630w,
/static/b44e2957c8d1fd32a2f14e6425edd7a1/40601/chatgpt_4.png 945w,
/static/b44e2957c8d1fd32a2f14e6425edd7a1/78612/chatgpt_4.png 1260w,
/static/b44e2957c8d1fd32a2f14e6425edd7a1/07a9c/chatgpt_4.png 1440w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/994d33faf83ae893251c6a2b6417a3de/acf8f/chatgpt_5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 122.78481012658229%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAADKElEQVR42p2US2/bRhRG58kZPkVSlCjLtGPFhq0iieJuatnaFI7sAEWBoIibpgkCdNEH0P+/PwVJtVbiFrW9+DCcGfLjuTP3XvHd9x949/Pv3Pz0K+/e/8b7D3/w8dOf/PD2F9ZXN1/obTe+ur7V+vqGq9c/dmMr8e3lG86Wl5yeXvCi04rF1ysWLy94tjjv9HwzPnvZPy8Wy04vni85PV1xsbpmtbpmeb5GnC3XKBdj4pxKW0bKkCpN4j0T6xjZgMwYJjag1pbMeXSYoZIEWSRoFyCFRAhBEHjE2dklJhvhx/uUUUgTxRRhSONCpspQGYvPhrgoweQxJk9RRYYyBqEkUvZmrawNWsLWsCIodpBZhK5ydJ5iQ490FhUYpNKIlkJJhNxoY7Ita11PqPIaPWwQRYzYKRHDFNFUiL0Rclwgtf5Xg7uGLeH5FV5KEqWJpCIyhiwIunkoFV6q7jnWGhcE/2/4zfkViVSUur+MgfNU7TlKRdquaUOhNHl7OWl6D8LlK4RPEEmJN667iDKM8El8rzDvGHa5IySDnSfUzR5S9ptaqUcaXlx1kzSOmY2mlDbGit5MPo6wN9RCcmByZrZgkGQ4H1KbhEKHZMpRxhnamvsbWqk4dEOO3JBDPyRpdhDe3n4gH0hojSWxntSGpNYTBK5P5MeGbIxh2uwymUwYTWpUG15LZTRCK4TaKDCdtFQo3e9Jre4attp/ss98dsS03sHXQ4QPkIMYkUaIJOxGmSeILCIxDh+1674rUyUlZvuWW8KjoyMODw+ZzWb4MOx/tF2/clPPbVMQm8awVdt3CHebhtl0j1FZoasBInI9UUuZRYgsRrbrZUpmQ8Kkpw2isMtbY7YIrbXM53NOvppzfHJCGj26Um4Jp7tTnu7uM67GmOEAEbp/zqw7xyxCDnvCNhPCOP5vwiAIOD4+5unBjHpcE6VJ/6PNTX4mJVFColQ/l0ptt691t5HnOVVV4bx/cKhf9MM13rnP61Y+LKH/fr8rhq59yTYsi2hbuAmIhCB8BGGX6Ber1wzGDXm9T17vkY8b9vKKg2JEmQ9J0pz0HoqTjKIc8ReoMUBZkErY5AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;chatgpt_5&quot;
        title=&quot;&quot;
        src=&quot;/static/994d33faf83ae893251c6a2b6417a3de/f058b/chatgpt_5.png&quot;
        srcset=&quot;/static/994d33faf83ae893251c6a2b6417a3de/c26ae/chatgpt_5.png 158w,
/static/994d33faf83ae893251c6a2b6417a3de/6bdcf/chatgpt_5.png 315w,
/static/994d33faf83ae893251c6a2b6417a3de/f058b/chatgpt_5.png 630w,
/static/994d33faf83ae893251c6a2b6417a3de/40601/chatgpt_5.png 945w,
/static/994d33faf83ae893251c6a2b6417a3de/78612/chatgpt_5.png 1260w,
/static/994d33faf83ae893251c6a2b6417a3de/acf8f/chatgpt_5.png 1340w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/afee13b9e63ebbcef704c7ae65575f0e/9685e/chatgpt_6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 32.911392405063296%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABK0lEQVR42jVRa5OCMAzkt92pKIigvAp9QFEP397c/5/Zmw3yYadJdpsm20C1I+rmBzyVvkDbGxp9genuKKojWnMRUEOQb80VzadGjesfMO6Osj4hyMsBh8LDdg8hCdvd0bQjdpmFtlf0wwulcCdpVqmz6PhwvNNYhAWWYSkI4kSDSDKLJLXSPEmN1NgwTlpE21Zi1jexwjY1gnTvMN9PDx3WkULgj295qR/e8Kdf2P4h6xh3Q+ef6IaX8OfxD9S6fqpR2/kXtLuJPazv8x6B0qP44vxTfGSzfeGxWldYrAqEUY1o2yDc1FhtKpmCObEWrv3ESjTBLnMy+rwec4q42nROzXiB8ZxPqPC1OHyQ43uZI+DP0GB6xw9iPptOMCc3aQbZYs45CJtwkxn/q44bDNZdGjQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;chatgpt_6&quot;
        title=&quot;&quot;
        src=&quot;/static/afee13b9e63ebbcef704c7ae65575f0e/f058b/chatgpt_6.png&quot;
        srcset=&quot;/static/afee13b9e63ebbcef704c7ae65575f0e/c26ae/chatgpt_6.png 158w,
/static/afee13b9e63ebbcef704c7ae65575f0e/6bdcf/chatgpt_6.png 315w,
/static/afee13b9e63ebbcef704c7ae65575f0e/f058b/chatgpt_6.png 630w,
/static/afee13b9e63ebbcef704c7ae65575f0e/40601/chatgpt_6.png 945w,
/static/afee13b9e63ebbcef704c7ae65575f0e/78612/chatgpt_6.png 1260w,
/static/afee13b9e63ebbcef704c7ae65575f0e/9685e/chatgpt_6.png 1336w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;swiper&lt;/code&gt; library를 설치하고 코드를 다음과 같이 변경하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;SwiperCore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Navigation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Pagination&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Autoplay&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Lazy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;MainBanner&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; bannersGroups &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Props&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Swiper
      className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;swiper-container prog-box&quot;&lt;/span&gt;
      pagination&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.swiper-pagination&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;clickable&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      spaceBetween&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      speed&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      slidesPerView&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      loop&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      autoplay&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;disableOnInteraction&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;bannersGroups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        bannersGroups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SwiperSlide key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bannersGroupId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;index&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div
                data&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;reactid&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bannersGroupId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;index&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;swiper-slide&quot;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Image
                  className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;item-banner&quot;&lt;/span&gt;
                  src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imgUrl&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                  alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                  width&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;358&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                  height&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;232&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SwiperSlide&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Swiper&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MainBanner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과는 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/92c952da476a1e9e80099e1e671198d3/20982/vcoloring_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 216.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAArCAYAAAB4pah1AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEmUlEQVR42u2Wf0xVZRjHL5C5ufmfWqNNTW22Vpakqzldzkl/2aTG5iKXZm5lrNlcM60tFaHCmptaWmgtURABQZSRYpmV7IohZA4SEPDCvXKvcH+ce37ce889l09734sXLmp/NP/k2b4753nP836f7/Oe933OsamqhrChoaEEhHk8HpxOJ36/H5/Ph9frxeVy4Xa7pT92zh3YVFUlbkOJIGHt7e00NTVx/fp1WltbaWtro6WlhebmZjo7O5NiR5tN0zSi0ShmNErUsohG4xCxIjwmMsvJI5PErYyzRmBZsbhCTdNx9PbhdPXTd8tNV08vPb1OehxOum/20e3ow317kFA4gm6EMUJxCH8sYrFYXKFlWXLAHFYajkSImGYckfhVKDKH1SeqsWLDsLBisZE1FIRyoshkhOUSiGwCd9bKNE0Zd+eZ8A0jRDgcJiIERCJxQkVRCPgVBgd9+H0BSdrf76brRhcd7R1cvfo3ra3/0H/LTXdXD72OPjo7b+DxDGCaURQliHdQ7AKfTBInDMThdLqw2+1UV1dTWVlJSUkJpSWlFB8+Qk3NaU6fquVEZRVHj5bw24XfqT9bT0d7J8Ggis/rTyYUmRw3HZJs3969HCwqIi8vj8LCXRQUfMb2bTs4dPAQe/bsoaCggPLyCvbvP8CVpmY0VZcqE4RBRZXliqsZjhAJhbl48SK1tbU0NNipq/uJ2to6Lv95RVZgv9Qo462ohRrUpDqfb5RCMaj4FYmA34+n30O/yyMX/fy5nzl39hccN7q42miXSkqLj9DR0SVLHRz0SvKkkjVVRQkoBAMKYl92tFzj1/IqBrx+Dny+nQ83vMu3XxXy9eYNuJwuSnbvZFd+PoqiEfAH7laoqxpqQEFVgih+P/YzZzi8K59LZ06yY+N6li58ho1rsnknK5MvC/Ip2v0FK5YvY9OmzSiBoCRLKAwGg4QMAy2ooqkaRlDh04+2kvP6Gv44f57Fzz/FwqdnsTYrk9yc15gz83EemZbOtKnpZC7LlG9ZLFnipQjCcMhA11R0TSOiqxTm7WTuk/M5WX2KjW/nsDhjLm+uXsfqrBV8kruO6Y9N543sbNr+apb79y6FkXCIkK5h6DpmSOe7fd8wb94iPt66jdy3VrHo2dlkrcxm6qMzyMnOYu7sJ1j04hJuewbldktaQ0kYCWEYGrquQswif1s+c+Zk8H7uBxRueY8t61ex9IUMli9ewtpXXyHjuQWkp8+kvv4coVCYgQFvvOSIGT/LsZiFaYrzGJZ9qqGhkYNFP9J0pYWgx4mvr5vWJjuu9mtcqDtNVVUNFRUnaGy8LM+1rukYhhHvNiMdm/s2zf+ysfGJjj26/YtMorPEZEuKMSQ7T9yPyWZqjXp+n0/Avb4P/wdJhA/CxgnHCccJxwnHCYcJxZ+XaOXiR/JBwMYDNltxcTHlFRWUFRdT9sP3HD9+XKKsrIzS0lKOHTuWGLsXxPPRMTabzYbEjFnYXnqZhG+zMXHiRFJTU5PGxiIlJSU5Jm3CBFJsNh6av4CHV2aTkpoq/bS0NKZMmcLkyZMTE8dCjE+aNElC3AvifwFgERWa9BlBdgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;vcoloring_2&quot;
        title=&quot;&quot;
        src=&quot;/static/92c952da476a1e9e80099e1e671198d3/f058b/vcoloring_2.png&quot;
        srcset=&quot;/static/92c952da476a1e9e80099e1e671198d3/c26ae/vcoloring_2.png 158w,
/static/92c952da476a1e9e80099e1e671198d3/6bdcf/vcoloring_2.png 315w,
/static/92c952da476a1e9e80099e1e671198d3/f058b/vcoloring_2.png 630w,
/static/92c952da476a1e9e80099e1e671198d3/20982/vcoloring_2.png 778w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;실제 V 컬러링과 매우 유사한 형태의 홈 화면이 만들어졌습니다!&lt;/p&gt;
&lt;p&gt;다음 포스팅에서는 하단 네비게이션을 통한 라우팅 구현에 대해 알아보도록 하겠습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[react router v6에서 react testing libarary 사용하기]]></title><description><![CDATA[현재 수행 중인 프로젝트(React)에 테스트 코드를 도입하기 위해서 공부하고 있습니다. react-testing-library라는, 이름에서도 유추할 수 있듯이 react…]]></description><link>https://jayoon-kong.github.io/react-router-v6/</link><guid isPermaLink="false">https://jayoon-kong.github.io/react-router-v6/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Sat, 28 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;현재 수행 중인 프로젝트(React)에 테스트 코드를 도입하기 위해서 공부하고 있습니다. react-testing-library라는, 이름에서도 유추할 수 있듯이 react에 최적화된 테스트용 라이브러리를 이용하여 스터디를 하고 있는데요, 자세한 내용은 추후 포스팅하도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;이번 포스팅을 시작하게 된 계기는, 위 스터디를 진행하면서 router와 관련된 테스트를 하다가 부딪힌 문제들에 대한 해결 방법을 기록해 두고 싶어서입니다. 현재 ‘스무디 한 잔 마시며 끝내는 리액트 + TDD’라는 책으로 공부 중인데요, 해당 책에서 예제로 나오는 부분은 router v5 기반으로 작성되었기 때문에 최신버전인 v6를 설치하여 실습을 하다 보니 다른 점이 많았습니다.&lt;/p&gt;
&lt;p&gt;각설하고 제가 부딪혔던 문제들에 대해 기록해 보겠습니다.&lt;/p&gt;
&lt;h2&gt;Switch → Routes&lt;/h2&gt;
&lt;p&gt;기존 v5 버전에서는 &lt;code class=&quot;language-text&quot;&gt;route&lt;/code&gt; 요소들의 상위를 &lt;code class=&quot;language-text&quot;&gt;Switch&lt;/code&gt; 컴포넌트로 감쌌으나, 이제 명칭이 &lt;code class=&quot;language-text&quot;&gt;Routes&lt;/code&gt;로 변경되었습니다.&lt;/p&gt;
&lt;h2&gt;exact path → path&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Route exact path&lt;/code&gt;로 사용하던 부분에서 &lt;code class=&quot;language-text&quot;&gt;exact&lt;/code&gt;가 제거되었습니다.&lt;/p&gt;
&lt;h2&gt;component → element&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;component&lt;/code&gt;로 렌더링하거나 또는 &lt;code class=&quot;language-text&quot;&gt;&amp;lt;Route&gt;{children}&amp;lt;/Route&gt;&lt;/code&gt; 형태로 사용하던 것을 이제는 &lt;code class=&quot;language-text&quot;&gt;element&lt;/code&gt;라는 요소로 사용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;세 가지 변경 사항을 예시 비교를 통해 보여드리도록 하겠습니다.&lt;/p&gt;
&lt;h3&gt;v5&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Switch &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-router-dom&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Switch&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route exact path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt; component&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Home &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/add&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Add &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Route&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Switch&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Test&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;v6&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Routes &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-router-dom&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Routes&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt; element&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Home &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/add&quot;&lt;/span&gt; element&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Add &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Routes&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Test&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;useHistory → useNavigate&lt;/h2&gt;
&lt;p&gt;기존에는 페이지 이동을 위해 &lt;code class=&quot;language-text&quot;&gt;useHistory&lt;/code&gt;를 많이 사용하였으나, 이제 &lt;code class=&quot;language-text&quot;&gt;useNavigate&lt;/code&gt;라는 이름으로 변경되었습니다. 사용법 또한 약간씩 달라졌습니다.&lt;/p&gt;
&lt;p&gt;v5 버전에서는 &lt;code class=&quot;language-text&quot;&gt;history&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;push&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;replace&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;go&lt;/code&gt; 등을 사용하였다면, &lt;code class=&quot;language-text&quot;&gt;navigate&lt;/code&gt;에서는 이동 및 back 시에는 &lt;code class=&quot;language-text&quot;&gt;navigate&lt;/code&gt;만 사용하도록 변경되었고, &lt;code class=&quot;language-text&quot;&gt;replace&lt;/code&gt;나 &lt;code class=&quot;language-text&quot;&gt;state&lt;/code&gt;는 옵션으로 사용하도록 변경되었습니다.&lt;/p&gt;
&lt;h3&gt;v5&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useHistory &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-router-dom&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; history &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useHistory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  history&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  history&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  history&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;go&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Test&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;v6&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useNavigate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-router-dom&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Test&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; navigate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useHistory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;state &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Test&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;MemoryRouter&lt;/h2&gt;
&lt;p&gt;사실 여기까지는 검색으로도 쉽게 알 수 있는 내용이고, 제가 적은 것 이외에도 중첩 라우팅, &lt;code class=&quot;language-text&quot;&gt;useRoutes&lt;/code&gt; 등 몇 가지 변경 사항이 더 있는데요,&lt;/p&gt;
&lt;p&gt;실습 중인 코드에서는 &lt;code class=&quot;language-text&quot;&gt;useParams&lt;/code&gt;를 이용하고 있는데, 이것을 이용하면 다음과 같은 코드에서 id를 쉽게 추출할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// App.tsx&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/detail/:id&quot;&lt;/span&gt; element&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Detail &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Detail.tsx&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 &lt;code class=&quot;language-text&quot;&gt;useParams&lt;/code&gt;를 이용해서 구현한 컴포넌트를 테스트하기 위해서는 history를 제어할 수 있는 router를 사용해야 합니다.&lt;/p&gt;
&lt;p&gt;테스트 코드에서는 실제로 경로 변경을 할 수 없기 때문에 기존에는 react-router가 테스트용으로 제공하는 &lt;code class=&quot;language-text&quot;&gt;createMemoryHistory&lt;/code&gt;를 사용해서 코드를 작성했는데요,&lt;/p&gt;
&lt;p&gt;v5용으로 작성된 예제를 v6에서 어떻게 변경해야 하는지는 쉽게 찾을 수 없었습니다.&lt;/p&gt;
&lt;p&gt;검색을 계속하다가 Testing Library 공식 홈페이지에서 &lt;code class=&quot;language-text&quot;&gt;MemoryRouter&lt;/code&gt;라는 것을 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;MemoryRoute&lt;/code&gt;는 위치를 내부적으로 저장하는 라우터로, history를 제어할 수 있기 때문에 테스트용으로 최적화되어 있는 라우터입니다.&lt;/p&gt;
&lt;p&gt;이번에도 예제를 통해 비교해 보도록 하겠습니다.&lt;/p&gt;
&lt;h3&gt;v5&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Router &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-router-dom&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createMemoryHistory &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;history&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;PageHeader /&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;renders component correctly&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; history &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createMemoryHistory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		history&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; container &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
			&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Router history&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;history&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
				&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PageHeader &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
			&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Router&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;v6&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; MemoryRouter &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-router-dom&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;PageHeader /&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;renders component correctly&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; container &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;MemoryRouter initialEntries&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PageHeader &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;MemoryRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;v5에서는 &lt;code class=&quot;language-text&quot;&gt;Router&lt;/code&gt;로 감싼 부분에 &lt;code class=&quot;language-text&quot;&gt;history(createMemoryHistory)&lt;/code&gt;라는 &lt;code class=&quot;language-text&quot;&gt;prop&lt;/code&gt;을 주었으나, v6에서는 따로 &lt;code class=&quot;language-text&quot;&gt;history&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt;해올 필요 없이 &lt;code class=&quot;language-text&quot;&gt;MemoryRouter&lt;/code&gt;로 감싼 컴포넌트에 &lt;code class=&quot;language-text&quot;&gt;initialEntries&lt;/code&gt;라는 &lt;code class=&quot;language-text&quot;&gt;prop&lt;/code&gt;으로 URL을 보내는 방식으로 변경되었습니다.&lt;/p&gt;
&lt;p&gt;위와 같이 변경하고 &lt;code class=&quot;language-text&quot;&gt;npm run test&lt;/code&gt; 명령어를 통해 테스트를 수행하였더니 성공적인 결과를 확인할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;(추가)&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;MemoryRouter&lt;/code&gt;에 대한 부연 설명을 위해 좀더 검색을 해 보다가 좀더 쉽게 공통화할 수 있는 방법을 찾게 되었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Route&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MemoryRouter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Routes &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-router-dom&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;renderWithRouterMatch&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;ui&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Element&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  children&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Element&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;MemoryRouter initialEntries&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; route &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;string&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;route&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Routes&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; element&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;ui&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Routes&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;MemoryRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제 테스트 코드에서 다음과 같이 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;renders component correctly&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; route &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/detail/0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/detail/:id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token function&quot;&gt;renderWithRouterMatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Detail &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(참고 : &lt;a href=&quot;https://woong-jae.com/react/220717-useParams-testing&quot;&gt;https://woong-jae.com/react/220717-useParams-testing&lt;/a&gt;)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Gatsby로 기술 블로그 만들기]]></title><description><![CDATA[회사에서 기술 블로그를 만든다는 소식을 듣고 데모 사이트를 한 번 만들어 보기로 하였습니다.
가독성이 좋고 코드 블록 사용이 가능해야 하며, 심플하면서도 효율적으로 (적은 비용으로 빠르게) 만들어야 한다는 요구사항에 따라 리서치를 해본 결과,
DB…]]></description><link>https://jayoon-kong.github.io/gatsby/</link><guid isPermaLink="false">https://jayoon-kong.github.io/gatsby/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Fri, 13 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;회사에서 기술 블로그를 만든다는 소식을 듣고 데모 사이트를 한 번 만들어 보기로 하였습니다.
가독성이 좋고 코드 블록 사용이 가능해야 하며, 심플하면서도 효율적으로 (적은 비용으로 빠르게) 만들어야 한다는 요구사항에 따라 리서치를 해본 결과,
DB나 서버 없이도 빠르게 정적 사이트를 만들고 배포할 수 있는 솔루션이 있다는 것을 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;가장 많이 사용하는 것이 Jekyll과 Gatsby였는데요, 저는 React가 편하기 때문에 React로 되어 있는 Gatsby를 사용하기로 하였습니다. (리서치에 도움을 주신 jojiiiiiyoung님께 &lt;del&gt;혹시 이 글을 보신다면&lt;/del&gt; 감사의 말씀 전해드립니다!)&lt;/p&gt;
&lt;p&gt;Gatsby는 React와 GraphQL을 이용하여, Markdown 형태의 파일을 빠르게 새로운 HTML로 빌드해 주는 정적 사이트 생성기(Static Site Generator)입니다. 아래 그림을 보면 이해가 쉽습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/35e7e627da9ee882f4eebd966e6fdf28/a8c87/gatsby_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 90.50632911392405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACPklEQVR42n1UTW/TQBD1X4Ybx/4D+AVwQAgJceOChBBI0APqpQiKmtCE5qtJ2sR2HNu73p19MLPetfsRVhrv2H7z/HZmPIlzDryICGQJRM6btfJcDV4j/fQI6w+PUZ29jFheTnAhjuQ+abRBWSghYXJrCdZYmMZA1RbF9CeKi8/Q82PYdABrHZrGoNprmIY/6uOYlGOTIq3x69sM6WoP9gMxf3E9yzA83eByWGJfAOUebaDF+McKi9FWYvJNBV0bIU9U3eB6nmM9y5FvyngEVs4KWGmjFFRZQZUaxlhRmN2UEsOxVaEEzyISOZ6xckx/VE9i2ufs88HEwvsQY1vrcSRck7Yucfe+P7oUZvwe6uJdD+Tg4/iCzge8QrZA4Cjs1KpwqIZvUA9egQsfsdRhOe9RoeREm9ukrqscr8VEYTZW4h/EEncHdYR3gb4fPeHbZ8d4cfQxEnos3SNli4Sc7IdIeZ2fLHB+MuWWjrhDSiWHXYvcJ2Ulu22NKt/DNtw2dEfAbaUJX8LL26QUm1yq2l6lL/8jIAkV65P29+y6xG5TYrvcIV0X8nsdEtARtlXq5yf4mu+Ng9Yu/g3UE+CxbU75X+4a2D1YNUcWTmWgOuswh7CsMI6tOLp6O3+HHLKvR8i/PAEsTyXEcdWNvC4+6UtXVQOtDHTdgIeGroHR76cYfX+O+dkCq8nWYxmj/B5iQ5oSTiabbqfOaprJ7q3AZHiK+XiMq8sSyz8p1tMM22WBm8UOm6tCfI4Vnn85/AumkHrnlOJV5AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_1&quot;
        title=&quot;&quot;
        src=&quot;/static/35e7e627da9ee882f4eebd966e6fdf28/f058b/gatsby_1.png&quot;
        srcset=&quot;/static/35e7e627da9ee882f4eebd966e6fdf28/c26ae/gatsby_1.png 158w,
/static/35e7e627da9ee882f4eebd966e6fdf28/6bdcf/gatsby_1.png 315w,
/static/35e7e627da9ee882f4eebd966e6fdf28/f058b/gatsby_1.png 630w,
/static/35e7e627da9ee882f4eebd966e6fdf28/40601/gatsby_1.png 945w,
/static/35e7e627da9ee882f4eebd966e6fdf28/78612/gatsby_1.png 1260w,
/static/35e7e627da9ee882f4eebd966e6fdf28/a8c87/gatsby_1.png 1538w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Gatsby를 사용해서 만들면 github 사이트에 배포하는 것까지 아주 쉽고 편리하게 할 수 있습니다. 실제로 데모 사이트(본 블로그)를 만드는 데 (배포 삽질 포함해서) 단 이틀밖에 걸리지 않았습니다.&lt;/p&gt;
&lt;p&gt;Gatsby에서는 수많은 템플릿을 지원하고 있는데요, 저는 가장 많이 쓰이는 Gatsby-starter-blog 테마를 사용하였습니다. 정말 깔끔하면서도 기본적인 기능은 거의 다 지원하고 있더라구요. 실제로 사용하면서 디자인 커스터마이징을 하기도 무척 쉬웠습니다.&lt;/p&gt;
&lt;p&gt;우선 Gatsby를 사용하기 위해서는 Node.js 18 버전 이상이 필요하여 노드 버전을 업데이트하였습니다.&lt;/p&gt;
&lt;p&gt;그리고 gatsby-cli를 설치해 주었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; i gatsby-cli &lt;span class=&quot;token parameter variable&quot;&gt;-g&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음으로는 Gatsby-starter-blog 테마를 이용하여 저의 블로그를 로컬에 생성하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;gatsby new jayoon-blog https://github.com/gatsbyjs/gatsby-starter-blog&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(jayoon-blog는 프로젝트 이름, 뒤의 주소는 선택하고 싶은 테마입니다. Gatsby에서는 무수히 많은 블로그용 테마를 제공하고 있습니다.)&lt;/p&gt;
&lt;p&gt;생성된 jayoon-blog 폴더를 열고 &lt;code class=&quot;language-text&quot;&gt;npm run start&lt;/code&gt;를 하면 아래와 같은 사이트가 나옵니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/538b7d7a91a186a7a1d5bf54bc120bba/d4e7f/gatsby_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABq0lEQVR42qVUy27iMBTl8zMrBFsWrGDDkj0/gNSuWNB2yrykKH47zsN2Es7Ibl0RWrWMxtKJr+/VPbrPTADgfD6HC9ZaGGMilFLxds6BMfZmq6oq6pJf8k1nEj7DMMTH6XTCYrHAcrnEarVClmXY7XaYzWaYz+dYr9eYTqc4HA5Ifp8SHo9HfMsybDYbbLdbSCnRtm2013WNvu/f3peZXZJOLhVcCNzd3WO/38fIbjkfRpiUlZbIfzzB+w5N0yDPcxSEgAkFJmQElyoi1PLLCKUQeHx4hAxOXEAIAalLCNOA6RqirKOsqjamn5ryjvCj0G9N9zrKUYSm9XguSjwTg++kgqz9P9dxRFg3LfKCgEsNoUro0sTuBoSaJYT6Jv1lxwNGhN45aCleoASk4KCUxsEOIKFBjMXaBr3WepTye8J+QNl2MLaDbjrYbvi/lJVpcPxV4DfV+MMqqMpiGHp0XRfRB/Svb/8iXzdnROisBScEglJwUkByDkooKCEgBXmVKWhB4l6HrfmUMBTYOR+XP/wMvPcjOOuiLcg3bUqoXRiXn7z+cmSuZzBF+BemzYgbe8NOKwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_2&quot;
        title=&quot;&quot;
        src=&quot;/static/538b7d7a91a186a7a1d5bf54bc120bba/f058b/gatsby_2.png&quot;
        srcset=&quot;/static/538b7d7a91a186a7a1d5bf54bc120bba/c26ae/gatsby_2.png 158w,
/static/538b7d7a91a186a7a1d5bf54bc120bba/6bdcf/gatsby_2.png 315w,
/static/538b7d7a91a186a7a1d5bf54bc120bba/f058b/gatsby_2.png 630w,
/static/538b7d7a91a186a7a1d5bf54bc120bba/40601/gatsby_2.png 945w,
/static/538b7d7a91a186a7a1d5bf54bc120bba/78612/gatsby_2.png 1260w,
/static/538b7d7a91a186a7a1d5bf54bc120bba/d4e7f/gatsby_2.png 1416w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;아주 심플하게 타이틀과 저자 소개, 그리고 3건의 포스팅으로 구성이 되어 있었습니다. 처음에 마크다운이라는 것을 모르고 글 등록을 어떻게 해야 하나 한참을 찾아보았는데요, 마크다운 파일을 생성해서 그냥 정해진 경로에 업로드만 하면 저렇게 사이트에 배포가 되는 구조였습니다.&lt;/p&gt;
&lt;p&gt;시험삼아 기존 노션에 있던 포스팅 중 몇 개를 가져와 마크다운(.md) 파일로 생성해 보았습니다. 헤드라인 및 이미지, 코드 블록 등의 스타일도 잘 되어 있고 가이드도 친절해서 어렵지 않게 작성할 수 있었고, 노션에서 쓸 수 있는 기능은 거의 제공되었기 때문에 가독성 있고 깔끔하게 작성이 가능하였습니다.&lt;/p&gt;
&lt;p&gt;다음은 호스팅을 위해 github에 새로운 계정으로 가입하였습니다. github은 public으로 저장소를 생성하면 무료로 &lt;a href=&quot;http://github.io&quot;&gt;github.io&lt;/a&gt; 주소를 제공해 주는데요, 만약 ${내 계정}.github.io 주소를 이용하고 싶다면 저장소 이름을 반드시 &lt;code class=&quot;language-text&quot;&gt;${내 계정}.github.io&lt;/code&gt; 형태로 저장해야 합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/702200b6f43c784ebf4da34c3253e3f9/6bbf7/gatsby_3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 35.44303797468354%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABJklEQVR42pWRUU+CcBTFGZYiigIKijpAQBQTIk1Lc6Vr+VK99P2/y6/xd7a27MGHs92zc3fuPfdK4ThludmRztek80fy5ZZ216XWtNCMDnXdvghSEKfsDh8sN3setq+snva0u54QC8NLIZVVHalURS7Xka9rlCoaSt1EbbSPTWYXzfiLhnkekh9NyRYbptmSm3xFcYJJuiCcZKLhNPm/iEf9V+SBHwujKLklHGe4QcIoyfHChKrWEjgXrRjWbDk/RicuVVQDq+viBRM6PR93OKbvRoKH8Qx3OKGsNJBkBbk4zZUqak23uVs98/b+xe7wyfrlQM+LkQrBdjycQYBpD7Acj743Etx2fPHxat2kouooqoFSM0RdbOSPZiTZPePZgijJsXo+3+gVtLDvQf6+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_3&quot;
        title=&quot;&quot;
        src=&quot;/static/702200b6f43c784ebf4da34c3253e3f9/f058b/gatsby_3.png&quot;
        srcset=&quot;/static/702200b6f43c784ebf4da34c3253e3f9/c26ae/gatsby_3.png 158w,
/static/702200b6f43c784ebf4da34c3253e3f9/6bdcf/gatsby_3.png 315w,
/static/702200b6f43c784ebf4da34c3253e3f9/f058b/gatsby_3.png 630w,
/static/702200b6f43c784ebf4da34c3253e3f9/6bbf7/gatsby_3.png 716w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 저장을 하고 조금 기다린 후, Settings의 pages 메뉴로 들어가면 다음과 같이 내 사이트가 생성된 것을 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7247913f0f8a7f1af7945912a6ba27d4/49ee2/gatsby_4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 23.417721518987342%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5ElEQVR42o3PzU6EMBQFYLbqAB2g9OdSKIXCgDMaiBkdExPf/6WOoXFYuXDxpb3JzTltdFnf4acXvL59guyAhzjHgZV4Svm/bfvxUQQRNyfk5EF2BDU9Cml2XNbgqoagFoWsUWob8F/3ORdmDw2BopmhTI/KTdB2grITdDuD3DPIzdB1D0EO0nSgxkNWLlCmQ2WHEJpkMohaf0Z/uWFabnDLN8rxC3q4ohqvEN0Kpjwek2L/3v2+nazQ8POC8/qBptuKPaI4kzgcFVJOYJzCs5NMIM0EEsYRM763/2ULzcoKaa6CH0rOgZsN4FUhAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_4&quot;
        title=&quot;&quot;
        src=&quot;/static/7247913f0f8a7f1af7945912a6ba27d4/f058b/gatsby_4.png&quot;
        srcset=&quot;/static/7247913f0f8a7f1af7945912a6ba27d4/c26ae/gatsby_4.png 158w,
/static/7247913f0f8a7f1af7945912a6ba27d4/6bdcf/gatsby_4.png 315w,
/static/7247913f0f8a7f1af7945912a6ba27d4/f058b/gatsby_4.png 630w,
/static/7247913f0f8a7f1af7945912a6ba27d4/40601/gatsby_4.png 945w,
/static/7247913f0f8a7f1af7945912a6ba27d4/78612/gatsby_4.png 1260w,
/static/7247913f0f8a7f1af7945912a6ba27d4/49ee2/gatsby_4.png 1618w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;로컬 저장소를 github에 연결하고 commit 및 push를 하였습니다. 기존에 포트폴리오용으로 사용하던 AWS Amplify는 사실 여기까지만 하면 바로 배포가 실행되었는데, github은 그렇게 하기 위해서는 몇 가지 작업을 더 해줘야 합니다. (Github Action을 사용해서 yml 파일을 생성하면 자동배포가 가능합니다.)&lt;/p&gt;
&lt;p&gt;우선 저는 수동 배포를 하기 위해 gh-pages라는 라이브러리를 설치하고, &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;에 deploy 명령을 추가해 주었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;npm i gh-pages &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save-dev&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token string-property property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token string-property property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gatsby build &amp;amp;&amp;amp; gh-pages -d public -b gh-pages&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 명령어는 빌드를 한 이후에 gh-pages라는 브랜치로 배포를 하겠다는 의미입니다. 저는 처음에 왜 gh-pages로 해야 하는지 모르고 로컬 master에서 그냥 원격 master 브랜치로 배포했는데요, 그랬더니 제 소스들은 온데간데없이 사라지고 master 브랜치에는 chunk 형태의 정적 파일들이 잔뜩 들어가 있는 모습을 볼 수 있었습니다. 검색해 보니 Gatsby에서는 모든 정적 파일들을 기본 브랜치에 저장하도록 되어 있다는 사실을 알게 되었습니다. (이 과정에서 가장 시간이 많이 걸렸습니다.) 그래서 gh-pages라는 브랜치를 생성하고, 배포가 되는 기본 브랜치를 gh-pages로 설정한 후, master에서 작업한 파일을 gh-pages로 배포하도록 처리해 두면 master 브랜치는 깨끗한 소스로 관리되고 정적인 리소스들은 gh-pages 브랜치로 올라가기 때문에 쉽게 형상관리를 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;(추후에는 yml 파일을 등록하여 merge 시 자동 배포가 되도록 처리할 예정입니다.)&lt;/p&gt;
&lt;p&gt;일단 npm run deploy로 원격 저장소에 push된 버전의 소스를 배포하였습니다. (디자인 요소들은 조금씩 수정했고, 헤더는 추가로 개발한 상태입니다.)&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a3846d749bf77a25a74b9363104638e1/baa75/gatsby_5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 103.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACHElEQVR42p1Vy5KbMBD0//9VjjnltNcsLE/zNCAB4uFJda8HE1uXRFVdEqPRVKtnRlz6Xx/S/vgp4zjKMAzSdZ0syyIY9/udwFjXVbZt4x5mfCvO/hdTVNLGqbjZyTRNYozhgdex7zuhATFrQOfcM6AewMY8z9zUwABsYG+t5Yygyvx8A11f1NC2rURRJGmayvV6lSzLuIYd30mSSFEUsnvYawyMI+A4TtLeOhmM4XqaZpmdIyvMC2/gyBQ+dhzFGCvGWj/Drusly69S1Y3UdSNlVRN100rTtLQ97RVtIABJvAHBqu+Hl+ytD20dtdWEAK/6vV0ZJQPNoF1ZlkSe54d+sGMNwNen4V8MkVkwhC5go0y+scv6WD/LZeMNkPVz0CMgNPn9GUocpxLFCdfhVySfQShJmhFplnM/CCOuYSvKys8Q4oKhtaNMrL2JGez6nhnVwob/uRZ1/RYQuqhGqiXg6xrfeLsy6g1l0fc99QRg0x7W/uV89PIm20nDt7Ipy4p1hlo8itdaygBAEvipHIOx9PEydMsiw2B46NZ17BRkFEDWoTGg7BWweTWsqoq93DQNaxDfOsdxzD6GtmEYShAE9IWN/X269hEQ1HGV/xneToEmqCnoR7CPGynKksmCDfuQ43bruA95AG9SoFM/fDtgNo/3Tw+pvucO0tr0BkQdQh9997SfUZfQ8Z+vjBcFzJC18z/j9XXx4czwDwLDYkgwU0inAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_5&quot;
        title=&quot;&quot;
        src=&quot;/static/a3846d749bf77a25a74b9363104638e1/f058b/gatsby_5.png&quot;
        srcset=&quot;/static/a3846d749bf77a25a74b9363104638e1/c26ae/gatsby_5.png 158w,
/static/a3846d749bf77a25a74b9363104638e1/6bdcf/gatsby_5.png 315w,
/static/a3846d749bf77a25a74b9363104638e1/f058b/gatsby_5.png 630w,
/static/a3846d749bf77a25a74b9363104638e1/40601/gatsby_5.png 945w,
/static/a3846d749bf77a25a74b9363104638e1/78612/gatsby_5.png 1260w,
/static/a3846d749bf77a25a74b9363104638e1/baa75/gatsby_5.png 1746w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 깔끔하게 기술블로그가 탄생하게 되었습니다. 😎&lt;/p&gt;
&lt;p&gt;글을 클릭하면 포스팅 상세 페이지로 이동을 하게 됩니다. 마크다운 파일이 위치한 폴더 이름이 URI의 pathname이 되고, 모든 파일이 html로 빌드되기 때문에 검색엔진에 노출이 가능합니다.&lt;/p&gt;
&lt;p&gt;아래에는 저자 정보도 소개가 되는데 이 부분 역시 템플릿에서 쉽게 수정할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/168d8c89aa2f6e9d055f3b181e913159/062c8/gatsby_6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.202531645569614%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJElEQVR42pVR206EMBDl//wD33z1K/SvfPTdxER90d2Ne2GBtkCXlqWUQDlmxmhCRIyTHE5pp2fOTKMQAqTKGUWpkQnJEFKhKEpeS6mYlcqRpBmv42OCLPvMoz0hJPq+RzQMgRP2hyMf7vYxc5oJvpQXJc7nMypjYKxFVRnYuoY+VQz61/rEe2QuGscRzjm0hLaFcy2879B6j8Y5DMOA/wQLLkUYR648hMC8BNKK6NL74z12D3fcVnw4YLvdIkkS/FVs1iF9bq8vcXN1AaUUXt9WeHp+wXq9QVlqBs2JHswYy04oqNgcWHC13jB+tBtG0KNRIs2S8OX6N/c8w67roLVGmqaQUjILISZM7q0xi2LfLTdNA2MM6rqewFo7Ye/9pN05wQ81+7W6Bi/+CAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_6&quot;
        title=&quot;&quot;
        src=&quot;/static/168d8c89aa2f6e9d055f3b181e913159/f058b/gatsby_6.png&quot;
        srcset=&quot;/static/168d8c89aa2f6e9d055f3b181e913159/c26ae/gatsby_6.png 158w,
/static/168d8c89aa2f6e9d055f3b181e913159/6bdcf/gatsby_6.png 315w,
/static/168d8c89aa2f6e9d055f3b181e913159/f058b/gatsby_6.png 630w,
/static/168d8c89aa2f6e9d055f3b181e913159/40601/gatsby_6.png 945w,
/static/168d8c89aa2f6e9d055f3b181e913159/78612/gatsby_6.png 1260w,
/static/168d8c89aa2f6e9d055f3b181e913159/062c8/gatsby_6.png 1386w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;회사용 블로그에서는 저 말고 다른 저자들의 정보가 등록될 수 있어야 하기 때문에 샘플로 멤버 리스트를 만들어 보았습니다. js 파일마다 위치한 graphQl 쿼리를 이용하여 정보를 가져올 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4c63736edb43219ea5837d8e740e3326/37048/gatsby_7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.12658227848101%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABVklEQVR42qVSW26DMBD0/e/SA/QQ6UPqZyrCwzY2OAGn4WVgql0aqrRp1KqWRruzHg3rZcWpabB5fEaSSvz3zPMMMY4Tau9xOjXohwFd16HvewzDgBAC51Q717uuR8v5gO5D17YtczpiCAFSaejccJRSw9oCeW6gdM48zSR2cbpwlSOTirW5sTC2QJxkyDKFpmkh6AtsYCxsUbK4KB0L6SOUO7fnfDHUfKdUztz7I8Zx5E4JYp5mjNPERUI4I4S1RmPhu7DcrdowYprnizkKHuaNIV8CV/k0LVh+Sn2Eu7vH2+YFlT/CGIvta4TS7VfTvxwxVR7xwxOq7Q6u/JyV1jnP5HqnP+Pmk39j9vUVgogrHay1K4wxHKuq+tUyXzyZFjaOY0YURUiSZEWapmwupYRSijUUtdZwzvGif+uQ1uNwOKCua3jvOZ45ReqSIoFMzjlprxm+AxywokvmoeFcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;gatsby_7&quot;
        title=&quot;&quot;
        src=&quot;/static/4c63736edb43219ea5837d8e740e3326/f058b/gatsby_7.png&quot;
        srcset=&quot;/static/4c63736edb43219ea5837d8e740e3326/c26ae/gatsby_7.png 158w,
/static/4c63736edb43219ea5837d8e740e3326/6bdcf/gatsby_7.png 315w,
/static/4c63736edb43219ea5837d8e740e3326/f058b/gatsby_7.png 630w,
/static/4c63736edb43219ea5837d8e740e3326/40601/gatsby_7.png 945w,
/static/4c63736edb43219ea5837d8e740e3326/78612/gatsby_7.png 1260w,
/static/4c63736edb43219ea5837d8e740e3326/37048/gatsby_7.png 1352w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;마크다운 파일에 데이터만 잘 등록해 주면 아주 쉽게 위와 같이 구현이 가능합니다.&lt;/p&gt;
&lt;p&gt;이로써 블로그를 만들 준비를 모두 마쳤습니다. 이제 디자인 적용과 개발자를 위한 템플릿 작성 가이드, 그리고 운영자를 위한 배포 가이드만 만드는 일만 남았네요.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[AWS로 쉽게 내 포트폴리오 web에 배포하기]]></title><description><![CDATA[개발자라면 누구나 포트폴리오 하나쯤은 있어야죠! 아직 이직 생각은 없지만 저도 포트폴리오를 한 번 만들어 볼까 하고 검색을 하다가 aws amplify라는 것을 알게 되었습니다. aws amplify…]]></description><link>https://jayoon-kong.github.io/aws/</link><guid isPermaLink="false">https://jayoon-kong.github.io/aws/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Thu, 22 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;개발자라면 누구나 포트폴리오 하나쯤은 있어야죠! &lt;del&gt;아직 이직 생각은 없지만&lt;/del&gt; 저도 포트폴리오를 한 번 만들어 볼까 하고 검색을 하다가 aws amplify라는 것을 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;aws amplify는 간단히 말하자면 나의 리액트 프로젝트를 서버 없이 아주 간편하게 웹에 배포할 수 있게 해 주는 솔루션입니다. 프로젝트를 내 저장소(github)에 올리고 커밋과 푸시를 하면 자동으로 내가 연결한 호스팅 서버로 배포를 해주는 시스템이죠. 심지어 구매한 도메인과 연결하는 것도 아주 편하게 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;AWS Amplify 콘솔에 대한 설명은 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/ko/amplify/&quot;&gt;AWS Amplify 콘솔&lt;/a&gt;은 단일 페이지 웹 애플리케이션이나 서버리스 백엔드가 포함된 정적 사이트를 개발, 배포 및 호스팅하기 위한 Git 기반의 CI/CD 워크플로를 제공합니다. Amplify는 Git 리포지토리에 연결 시 프런트엔드 프레임워크와 &lt;a href=&quot;https://aws-amplify.github.io/docs/cli/concept&quot;&gt;Amplify CLI&lt;/a&gt;를 사용하여 구성된 모든 서버리스 백엔드 리소스의 빌드 설정을 결정하고 코드가 커밋될 때마다 업데이트를 자동으로 배포합니다.&lt;/p&gt;
&lt;p&gt;긴 말 필요없이 자습서 링크를 공유하도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/ko/getting-started/hands-on/deploy-react-app-cicd-amplify/&quot;&gt;AWS 자습서 링크&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;자체 CDN과 s3를 이용하여 빠르고 편리하게 웹 페이지를 랜딩할 수 있습니다. 저는 우선 제가 구매한 도메인과 로컬 리액트 소스를 간편하게 연동할 수 있다는 점 (무려 SSL도 지원해 줍니다), 그리고 별도의 배포 과정 없이 github에 push하는 것만으로도 소스 상태를 최신으로 유지할 수 있다는 점이 끌려서 해당 솔루션을 사용하게 되었습니다. (개인용은 무료입니다.)&lt;/p&gt;
&lt;p&gt;쇼핑을 좋아하는 저는 먼저 도메인부터 구매를 하였습니다. (godaddy 사용)&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/283d156199c607cce849907eda654607/6ee58/godaddy.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABXUlEQVR42o2TTW/CMAyG+du777dMO0+I7b7DLuyDA0icmKBj0EJoaJo0SdN3c2irfm0ikuWqTh6/sZ3Rer3G8XhEnuegVRRFy4ZWN845x4ExnIXAiH4opWCt9VDyze8sy2pTpbdlzBjjgY+TCV5mMwScY1RlqoJNBc45pGkKIYT3SkpvhbP1Xte4BZ3xCinrfDFHGIaQUnpQtaE+SPBSXfi1xC76Bje2VwIPNNpgu9liH4Zgp1Ot1qssoYEQuBmP8bxa4XO3xyIIILUeBu7jM24fnvC6CVrym17lOaaHAyKtcTd9w/37RwvWurK2FssoQpLpui69bndq1Z2CzpU1Us4hkmRwdCrLnauTVULO1CilfI1pMi4KjUEcx97/B+wqk8bgVE5AC0gZaLipGRS4FkgKqfM6yzoKtYYQqQcaa68DFoUHJkr1FdIcMsZ8gKB/PcMhlVRDliSXGv8CfwDHVKpPxxGdzgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;godaddy&quot;
        title=&quot;&quot;
        src=&quot;/static/283d156199c607cce849907eda654607/f058b/godaddy.png&quot;
        srcset=&quot;/static/283d156199c607cce849907eda654607/c26ae/godaddy.png 158w,
/static/283d156199c607cce849907eda654607/6bdcf/godaddy.png 315w,
/static/283d156199c607cce849907eda654607/f058b/godaddy.png 630w,
/static/283d156199c607cce849907eda654607/40601/godaddy.png 945w,
/static/283d156199c607cce849907eda654607/78612/godaddy.png 1260w,
/static/283d156199c607cce849907eda654607/6ee58/godaddy.png 1640w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 검색을 하면 사용 가능한 도메인 목록이 나열됩니다. 저는 1년에 만원이 채 되지 않는 저렴이(jayoon.work)로 골라 보았습니다.&lt;/p&gt;
&lt;p&gt;카트에 도메인을 담고 결제를 하면 바로 내 도메인을 쓸 수 있게 됩니다.&lt;/p&gt;
&lt;p&gt;그럼 이제부터 amplify console을 이용하여 리액트 프로젝트를 어떻게 내 도메인으로 연결하는지 알아보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 로컬에서 리액트 프로젝트를 열심히 만듭니다. (저는 이번에는 create-react-app 대신 쉽고 빠른 vite을 사용해서 만들었습니다.) 그리고 제 개인 저장소 github에 연결을 하였습니다. 본 포스트에서는 호스팅이 목적이기 때문에 리액트 프로젝트 및 github 사용법에 대해서는 다루지 않겠습니다.&lt;/p&gt;
&lt;p&gt;먼저 aws amplify console에 접속해서 회원가입 후 로그인을 하면, [모든 앱]이라는 화면이 보입니다. 여기서 우측 상단의 [새 앱] &gt; [웹 앱 호스팅]을 클릭합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2df3cb262a31c30effe0076974589666/b59fb/hosting.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 44.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSklEQVR42n1R2WrEMAzM/39UP6FQ9upbKUubYxMnvuMrU6RdL7ulVDBYkq3RSG6Op3fsD0e87fbY7Q84HE/ohwGXcUTX92i7nuOuHzBcRkil/kUzjiPatoVzDp7gPawxMNYyHMXOwVrLdyklRs6Zz3iLCSFGNLO26MUC7QNszHwq8tcI5zzWNaDatm2MUgpCCOw/5qlJM5iIb+kw+YyPQUCsBUsEVNxY0eo9zl2Hc9txMZGRKmMsE0zLglwK35HKRq2JCYRP+BIKwmcsoUCFzMVk3WXEMAn2iYTAfikQi0TKmRUy4RoCpJQYpwnGOmy4jkSPaa/zvEBr/TQuocYP+7iOTPJrZ6n1XX6+FZJRflHqPnLNV9JKXDagoZ+UUrEKYwyfWhsorXmU34VPqh4tWGQ7owkhIqV8//pH1H39hVSRIqjt+vkKe3rBDwGZvCOYNc+DAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;hosting&quot;
        title=&quot;&quot;
        src=&quot;/static/2df3cb262a31c30effe0076974589666/f058b/hosting.png&quot;
        srcset=&quot;/static/2df3cb262a31c30effe0076974589666/c26ae/hosting.png 158w,
/static/2df3cb262a31c30effe0076974589666/6bdcf/hosting.png 315w,
/static/2df3cb262a31c30effe0076974589666/f058b/hosting.png 630w,
/static/2df3cb262a31c30effe0076974589666/40601/hosting.png 945w,
/static/2df3cb262a31c30effe0076974589666/78612/hosting.png 1260w,
/static/2df3cb262a31c30effe0076974589666/b59fb/hosting.png 1285w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;저는 github을 선택하고 계속을 클릭하였습니다. 그러면 이렇게 github 계정으로 로그인하라는 메시지가 나옵니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 322px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/348ada77d0921157aafca7374f8bd351/fc778/github.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 191.77215189873417%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAmCAYAAADEO7urAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE2ElEQVR42p1Wy28bRRj3/8IVBOIPQHDgwKOoqgQnBOJSFSSkHsuFI+JSIUCqeFTiUECgFFqpHFBKUemLNEmT2EnstR0n8XP99nrfO68fmm93HTuxW2Ckn2Z2vm9+8712ZjJY0JRSBN1W19bx1517M7JFLbNIIKVMyB7h4mdf4NJX32L55i2aE0IsJF1IqBfp9tPPV4l0K7uNz7+89P8J0wW2bWMrm8Pvy3+gXm882eU0VouwKBSL9BdaOGXrYzc4YSHjAl4QwQ/ZAkTwgwTh4/UixpEJIw7XD4n0ONwgQhAyMM4JQcTm6k3rZkLG6eP4jlpJb4YZNxVZ4S3Q1xvGhH40mZxWSEtHOQaUtQJFSREn9J5I6CVjqRQk51CFb4DSJ5AiJIN9cpPNxHQxYUKq46oTpiQHdwdggQspInAuSPavLfSSbEZcItKEx8qCSwUm1NwQHREGs4Qah7UGak0TjVYHjZZJ2C2UYJQr2D+sT6x8rIVBxBEyQX2+WMZmbgcH1QaR5I0yVlYfYX0ji7WNLBwvIF2NWcKIIWAC9aaJQrGM3UIRK2uPsL1rkEXl/UNsZnfw5+272DVKePBwDXfvr+DW7TtEfu/BQwwtm4yI6zCK68p2fQwtB4PRmBT6Q4v6ykEVuZ08jFIFheIeeoMRzE6P5J3eAJ3+cBKmGZdphymXNXTwy5VD3P97lYi19VquExb381xmHI4fxvBCig31fjxOidNN9Lx7AsmvF6UuhwwRVzO7B9HsOGSS4If8iGQaKaE2W8eqVm+gZbZRrTVgdrro9vqoN5qoN1toNE1Ua3XSGVljOih0MqcRVwlDhgsJszvAeq6EXLGK9e0ydko1FCpNbOYr2MzvE1azRazlStirddF3GDpWgK4VEjpWCNuPiDgjOMdBN0THAUY+MPSBgacIw+RbI5X1XYnumKFr8wl6Nke5HdD/nZGCw2j5qA8i2rlrM1LoOxy9Oeg7YgY9R2DoChRaAcUxo8+3kcvQc2QCgbbF0BoGaA3DEzBHsYvtxFUNPTeww9hlLlT8lxgG9ir7KJX30Ol2IYREFOljnU3AGEO1F2Cr6qJs+shWXew2POzUPdR6AenQndIfjVGtt1BtmHQg9Idjise8mhs5IcyhTkiA1sCnsU7Q2E0s1HWoUz5zVSoFLgS4PAkh9SUvoZQ+zeNeQSJIDtv4cNCECkf4Ly3RjyJB52iGMYGubSHf2UehczBBPul32hVstAxsmSUaT8tS7LYraI+HiJiIL/rL2V/w1Hcv4/kfz+DZ708TnvvhNJ6+cgovXn0H7y1/hDM3PsQLS2/jmSunSJbq6TV67acPL+sIxIRLhWW8tPQuTl1/H69dO0d4/do5vHrtLN68cR4X7lzE2Zsf463fzuOVX8+SLNV74/oHtPbrrSVAIK5Dyp7rYHgMeq7vjGFaA3TGIxqP5ujoXnPQy0E/fvRNJqWi2tOQQhHSsZKYmjsJvVZXhZASGVok5eRVhTnJjmVqIWi9UvQwIML0eVYwijg4rKLRbKK8V4FRLGG/UsGhaSHXYMjVAhhmhHIngtGKaFxohRNjNFdGs2qTNaHtOHAcB34QwPM82LYD13XpkLU8gZEnMPYF7EDA9o/GmlAlP0McQ+1/aunkMXnkPlmgjqDU7Hcc+ziG/wBp9TwTRk5R8wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;github&quot;
        title=&quot;&quot;
        src=&quot;/static/348ada77d0921157aafca7374f8bd351/fc778/github.png&quot;
        srcset=&quot;/static/348ada77d0921157aafca7374f8bd351/c26ae/github.png 158w,
/static/348ada77d0921157aafca7374f8bd351/6bdcf/github.png 315w,
/static/348ada77d0921157aafca7374f8bd351/fc778/github.png 322w&quot;
        sizes=&quot;(max-width: 322px) 100vw, 322px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;로그인을 완료하면 리포지토리 브랜치를 추가하라는 창이 뜹니다. 여기서 내 저장소에서 사용하고 싶은 프로젝트를 선택합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/008c2fd9a8c254e484bf795b6a02375e/01645/branch.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABYElEQVR42pWTbY7bIBRF2f8iupkuYBaQdJw6Xw42BmxswCY+FfYk6kjVdIJ0dOE9fsC9IN6Lgt3+F+XxRHE4cLlccc7h3PAyvXMI1Soa1ZDuM3OamOaJEMPLxCkQQkBYrzmqA8dbyeH6zkmWaK/Q46s0mFEjWttyrk40umEIjjB7whxeJmadPMINA9Z2zPPMsrCNh353fOxf7gsiByClRNY1IcatsSzcM/f7l6S/8DHivUeo3rM71+zKC6dac24MJ7lppfsn13bTm3EreS7tQOsCVaM51y3aeYQNiVI5imvDb2koqpb9uaasLbIP3DpPZUeqznPL6z4g+7j2pIuoYaLSjrrzGD8j8jXz8Zd/WJc9fdSfLJ/J1jx6KSVEo1pusl4f5jiOazEHlPV/Hn7yMyVijNsJc8rG2BVtDK3W5PTTx8av2MJJpAWmBYTtOjLG2ieP2nfIP01Zh9q/YX7+4A+fOaDMccURCQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;branch&quot;
        title=&quot;&quot;
        src=&quot;/static/008c2fd9a8c254e484bf795b6a02375e/f058b/branch.png&quot;
        srcset=&quot;/static/008c2fd9a8c254e484bf795b6a02375e/c26ae/branch.png 158w,
/static/008c2fd9a8c254e484bf795b6a02375e/6bdcf/branch.png 315w,
/static/008c2fd9a8c254e484bf795b6a02375e/f058b/branch.png 630w,
/static/008c2fd9a8c254e484bf795b6a02375e/40601/branch.png 945w,
/static/008c2fd9a8c254e484bf795b6a02375e/01645/branch.png 1091w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다음으로 넘어가면 빌드 설정을 할 수 있습니다. 저는 기본값을 그대로 사용하였습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6b65a6d38028fe0a4c93ee8035cd2f43/7388e/build.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpElEQVR42p2TC5KbMAyGuf81epc9QLvdljTkQQgYbJwYG8L770jADpMu0249841sY/+SjOTtgwBfv73iGse4GwPr3P9jHTytNYQQSLMMWt/Q9z3atv00Xdehrmt4FJXKNbq+Bw0S7Ifh0wzDwMIehSqlgitL1E2DcRyZYbbr9TBf3GIStJZTdc5N4XfdewpEO9PPGYxPjhZo0HnPWAt/H+DN30FIySRZhlQqpPNaZBJZnuNmzCbaGM6SBcNrjLfdL+yPJ0it+XKqFNsFWosN+JuUIC0WvCQJTpcIu8MBcZr9IfYv0B0WvN3vOIYhvvs7vP7wcQwvuMQJrkIwEZEk7OijyDcF/eCAQxjy+8Vp+s5VTND+llCmVoL3okBwPiM4nXGOIkSJQCIl0vnwGv5BT++3Fi5IkOpQUdmUJUxRgBy4qkL1ePyVsqo4ukwpKK0nwUddw1APW4uqqlCWJdekm3tzsVS4H42maVDXDdcgzT3yQq1HXbL0ZbPYZt2r/dSWT0yFPYBKu+1HeBQmpV1YxyGvmfbtJvREuc6RFxX0zxeYly/4DeEpfKv6+RIwAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;build&quot;
        title=&quot;&quot;
        src=&quot;/static/6b65a6d38028fe0a4c93ee8035cd2f43/f058b/build.png&quot;
        srcset=&quot;/static/6b65a6d38028fe0a4c93ee8035cd2f43/c26ae/build.png 158w,
/static/6b65a6d38028fe0a4c93ee8035cd2f43/6bdcf/build.png 315w,
/static/6b65a6d38028fe0a4c93ee8035cd2f43/f058b/build.png 630w,
/static/6b65a6d38028fe0a4c93ee8035cd2f43/40601/build.png 945w,
/static/6b65a6d38028fe0a4c93ee8035cd2f43/7388e/build.png 1104w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;마지막으로 저장 및 배포를 클릭하면 끝이 납니다! 정말 쉽죠?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4251ce86154baff9a46332b2633a7939/3fca6/deploy.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60.75949367088608%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVR42qVSSU7EQAzs/x/5By/gCZx4AMuBzGWy9L53CtlRj4BJBqGxVIoUu+1yucTb+weG0wnTPENKCescjLVXsARnd3MXGAOhtcbnMDC0Mai1Iuf8E6UgpYSYEkop1/mc+X+IEUJpzY16rOt6+XZQeB+Yxe/c9xoaLLQ2GMeJVyJ2ew8oiJ1zHrW2w5qcqaExPJko3xvUQyxSglgS3RjjXXDeQ4zThPN53ET/40E4yqWEeVlA9xBSKWZ4JHbXh2Shh7fq6NqsoVL68CC9IQ11zrFOrbVdJ+SSN4a0NlG/FSEEkGfJvMRk9yi1bT70IewbmrEZudSK2hrXdXOnjhiQvUawaluZ19b636DNJmkwvr5APj1APj/iCyX3qU1nBLymAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;deploy&quot;
        title=&quot;&quot;
        src=&quot;/static/4251ce86154baff9a46332b2633a7939/f058b/deploy.png&quot;
        srcset=&quot;/static/4251ce86154baff9a46332b2633a7939/c26ae/deploy.png 158w,
/static/4251ce86154baff9a46332b2633a7939/6bdcf/deploy.png 315w,
/static/4251ce86154baff9a46332b2633a7939/f058b/deploy.png 630w,
/static/4251ce86154baff9a46332b2633a7939/40601/deploy.png 945w,
/static/4251ce86154baff9a46332b2633a7939/3fca6/deploy.png 1112w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 배포를 완료하면 이제 콘솔에 내 앱이 표시됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/76c314be2bfb8e1e8fabf8279d71643e/d2cbc/app.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 47.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVR42o2Q607DMAxG+/5PBhq9Aj8RQ0Igpra5OImWWz+UbB1b6aZFOrIV20dOiqqqUbcdHp9qPGwqlE2HsmkzVdPdR/uXFwBgnQMplWOIIUfnHZy7D3uWFyEEjJzj+eUVm7LC+/YDgggDY2CcX4ULsUoRQoSQEj+7XYYkh3d72L2BNgZKa+gF6S7NSKJ/5A3Tc1NTzwS+pcN2MHjrDXycsHbSzG0hKZAh9HIEMw6jcTmGhXCapsOfWZuH16QnodAcX+IzjZ2YYkScSTLvMQxDftENYTwWFLQyOedHxBIikNYXsqU0bzgXDsW54bxRXvRckyXhL69FrmZcWvwEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;app&quot;
        title=&quot;&quot;
        src=&quot;/static/76c314be2bfb8e1e8fabf8279d71643e/f058b/app.png&quot;
        srcset=&quot;/static/76c314be2bfb8e1e8fabf8279d71643e/c26ae/app.png 158w,
/static/76c314be2bfb8e1e8fabf8279d71643e/6bdcf/app.png 315w,
/static/76c314be2bfb8e1e8fabf8279d71643e/f058b/app.png 630w,
/static/76c314be2bfb8e1e8fabf8279d71643e/d2cbc/app.png 705w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;도메인을 사지 않더라도 이렇게 aws에서 제공해주는 주소로 내 앱이 연결된 모습을 확인할 수 있습니다. 이렇게 하고 나서 IDE에서 commit 및 push를 하면 자동으로 배포가 되고, 우측의 상태 바에 배포 완료 표시가 나타납니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e534cc68729c873ac72cc503e93e753d/2f183/deploy_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 42.405063291139236%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVR42p2SS26EMBBEuf+ZcoAcIJss8pVmMGBjjL/YhhfBJJEmi1GSkp5q0e1SqeXm1LY8v7xybgWDVPSDxMwz1rk/MWiDHDWNtRY9SpRSdF1PPwzHwpIzKaVfc/8y8qocjewF4v2JTpw5tYJWCNQ4IpVCTxPamIvfwsy4sWPu3mh6qRC9PAbm8/Go9YHznhAjIYTbLAV3esQ+3NEYFzDWkUuh1Mq2bfxXK9DsLVIK1JKJKR6Ndu3BX+wavUTMZwYr6K2grOVqj22jlnIJND5i48LkAjElSvnRdAMfPblm6rpS1np4rfW64bpeAvVsUcYijcWHwGTMQYyRnPPhWu83nplcxKeM34uY+Zgvy/L9Kz4AFrZqjwZ5yd8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;deploy1&quot;
        title=&quot;&quot;
        src=&quot;/static/e534cc68729c873ac72cc503e93e753d/f058b/deploy_1.png&quot;
        srcset=&quot;/static/e534cc68729c873ac72cc503e93e753d/c26ae/deploy_1.png 158w,
/static/e534cc68729c873ac72cc503e93e753d/6bdcf/deploy_1.png 315w,
/static/e534cc68729c873ac72cc503e93e753d/f058b/deploy_1.png 630w,
/static/e534cc68729c873ac72cc503e93e753d/40601/deploy_1.png 945w,
/static/e534cc68729c873ac72cc503e93e753d/78612/deploy_1.png 1260w,
/static/e534cc68729c873ac72cc503e93e753d/2f183/deploy_1.png 1589w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다음은 앱 설정 값에 대해 알아보겠습니다. 저는 이미 도메인을 연결한 상태이기 때문에 프로덕션 브랜치 URL에 제가 구매한 도메인 주소가 나타나고 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2f669411fde86d2060cd64a3ba436e84/be1b7/setting.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVklEQVR42p1Sy04DMQzc/79wQAhEQaUFyvPLKrW7m3fi7A4aN5SCEAcsjWJ7EmfspFvev2C9ecPqYYPzywXOLq5xcbXAzXKN2/UTFqu/cbN6xmrzjrvHNywfXtHhxHwIMNbhPzbPM2qt6Jy1KEVQSsF2u0XwHiKCnIvmcgP9EAJSzsoXkcPaONbgvs5YC6kV0zRhtB6Di5jm31XknGGtRUoJMUaEEPXcp03zjI5JGuVa5yF1Uvk/QWOR3X6vKlmoqpAvXguqQhENdrsd+r5HyVnVEKmBfkwJznuEGA+jONkzGoPRWHR8CN5GDMZhbzxCrnBJkKR+U8jDnCNj7j9dqVakoqOjcqcJ/TBo21TiY9JV2vAJzs46p3kiNfCi0vjjt2HhcRzhnDu2chh8OMbsJsT0jaeA1DjDlj/bYUEmnT5M1Ti0gvQrf4Ex8CEe4sb3w6icaMuCDzOj+6krdbfrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;setting&quot;
        title=&quot;&quot;
        src=&quot;/static/2f669411fde86d2060cd64a3ba436e84/f058b/setting.png&quot;
        srcset=&quot;/static/2f669411fde86d2060cd64a3ba436e84/c26ae/setting.png 158w,
/static/2f669411fde86d2060cd64a3ba436e84/6bdcf/setting.png 315w,
/static/2f669411fde86d2060cd64a3ba436e84/f058b/setting.png 630w,
/static/2f669411fde86d2060cd64a3ba436e84/40601/setting.png 945w,
/static/2f669411fde86d2060cd64a3ba436e84/78612/setting.png 1260w,
/static/2f669411fde86d2060cd64a3ba436e84/be1b7/setting.png 1887w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다음은 도메인 연결을 해보도록 하겠습니다. 왼쪽의 [도메인 관리] 탭을 선택합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2f4e2a335d9827a84671cdc366558e2f/0bdcb/domain.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.949367088607595%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAw0lEQVR42j2P2wrDIBBE/f8/7EMphUDToq4XEq9xyq5JFg664zi66vF84fleoK3FT2tYcgI5XunurTshAjkPH8JNiFE0bSzUZ12xLAt41cbcQWxgZiiJTuRgrIXzHtu2CTFG6Y2dHuW9FzGEiJwzgIExBnrvSDmBi/uLWQPHcQitNZRSkFJCShmK01ngYgMHXcaYAlLOqK3dGvv58hV4wY/xueIR1vWLfd9FqPXkDOGfy1nv8jCPFUJArVU80z/3uRT8AU3DgpTzK1ktAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;domain&quot;
        title=&quot;&quot;
        src=&quot;/static/2f4e2a335d9827a84671cdc366558e2f/f058b/domain.png&quot;
        srcset=&quot;/static/2f4e2a335d9827a84671cdc366558e2f/c26ae/domain.png 158w,
/static/2f4e2a335d9827a84671cdc366558e2f/6bdcf/domain.png 315w,
/static/2f4e2a335d9827a84671cdc366558e2f/f058b/domain.png 630w,
/static/2f4e2a335d9827a84671cdc366558e2f/40601/domain.png 945w,
/static/2f4e2a335d9827a84671cdc366558e2f/78612/domain.png 1260w,
/static/2f4e2a335d9827a84671cdc366558e2f/0bdcb/domain.png 1579w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;우측의 [도메인 추가]를 클릭하여 내 도메인 주소를 입력하면, DNS 레코드를 업데이트하는 창이 나옵니다. godaddy에서 제공하는 DNS의 권한을 aws amplify로 가져오겠다는 의미입니다.&lt;/p&gt;
&lt;p&gt;godaddy 페이지로 들어가서 내 도메인의 cname 정보를 가져와 입력합니다. (편집하는 과정은 스샷으로 남겨두지 않아 완료된 화면을 보여드립니다.)&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e37ed20bfd154135491bab8f173029dc/5bd27/dns.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 30.37974683544304%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVR42n3M7W6CMBgF4N7/FThwAitm+MOLESwUqE7nR2Y00W18OsdZ2jKz4bIfT07P2/YlL7s91pstjqdXFGWFLC+0QmdZ1ajqM8q67jireRc5VA32+QcOhSbPul9Uf7sAOYCsATL80ADvn7dIxBNMGYeYPUHMFyoTMQePBeJEgMepIt8pcYqQp4jEEs+rDVbr38ijN8bAoqCuB3c4wgP1YDtDGKYDs/+Pe4qB5d4gclHPsNQiuZC6eqn8ZJh2mw6Mfqudfbsz7SvZycSfwg8YwpArTGKRmgUBu2aX/8ed7F/Pqpt+tKb4LgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;dns&quot;
        title=&quot;&quot;
        src=&quot;/static/e37ed20bfd154135491bab8f173029dc/f058b/dns.png&quot;
        srcset=&quot;/static/e37ed20bfd154135491bab8f173029dc/c26ae/dns.png 158w,
/static/e37ed20bfd154135491bab8f173029dc/6bdcf/dns.png 315w,
/static/e37ed20bfd154135491bab8f173029dc/f058b/dns.png 630w,
/static/e37ed20bfd154135491bab8f173029dc/40601/dns.png 945w,
/static/e37ed20bfd154135491bab8f173029dc/78612/dns.png 1260w,
/static/e37ed20bfd154135491bab8f173029dc/5bd27/dns.png 1432w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;무료로 ssl 사용을 하기 위해 [하위 도메인 관리]로 들어가서 https 설정을 합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/11607574fefb4fa7b668feab0206bd69/fe9e8/https.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVR42qWRW0+EMBCF+/9/ndFnXdcHoS3QK+z2AsdMW4hBTTRO8hHmNMw5HVgnBlzfe7z1AwZt0Y0GUhmM2mKcFIZxgvP+V1jnwC6vVzw8PuH55QIuJLgQEFKCS4mO89KT3gvR+qr3u87FgTYGzFiLSSnM8wznHJxrjq46HppzrW/6p1Q7y7KAWevgvQe2Ddu/WcGU0ui6HillrOtaDqjq8+/FKDZdmVLGmOqwNjTnjJSrUT4RYyycUzLandK6LDSmhBDCMZD2SyTSYzy43e/l79PZHuAY6OcZWpv6UQhlsXuRRibnFGtJmA7jL1cmyPUeQoHeS9+4fcNP+gcvKbtw6aVLrQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;https&quot;
        title=&quot;&quot;
        src=&quot;/static/11607574fefb4fa7b668feab0206bd69/f058b/https.png&quot;
        srcset=&quot;/static/11607574fefb4fa7b668feab0206bd69/c26ae/https.png 158w,
/static/11607574fefb4fa7b668feab0206bd69/6bdcf/https.png 315w,
/static/11607574fefb4fa7b668feab0206bd69/f058b/https.png 630w,
/static/11607574fefb4fa7b668feab0206bd69/40601/https.png 945w,
/static/11607574fefb4fa7b668feab0206bd69/fe9e8/https.png 1146w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;모든 작업이 완료되고 콘솔 메인으로 돌아온 후 실제로 배포를 해보겠습니다.&lt;/p&gt;
&lt;p&gt;IDE에서 소스를 수정하고 commit 및 push를 수행하면 바로 상태 값이 변경됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/70f338a3e844bd9ca00c04365125f270/fa601/deploy_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.51898734177215%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAl0lEQVR42l1PWw4EIQib+590PzbzEEFFsRuYRyZLQqgWSlm+O2Enxhgj0sxgNq9qsHliYOId8/q/eX/7/MIiyJyhqnDcVJ+Bs54CR+nIUqLH8+bf4cJLFkFtDX0McCmB/524u00UVXssbq1drp2Zj3gIShGsB+GzJmyJUGvFkVK46L3HSS5ARBB3VypEDZkFzPyc6mLe/wNuMzqMtxn42wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;deploy2&quot;
        title=&quot;&quot;
        src=&quot;/static/70f338a3e844bd9ca00c04365125f270/f058b/deploy_2.png&quot;
        srcset=&quot;/static/70f338a3e844bd9ca00c04365125f270/c26ae/deploy_2.png 158w,
/static/70f338a3e844bd9ca00c04365125f270/6bdcf/deploy_2.png 315w,
/static/70f338a3e844bd9ca00c04365125f270/f058b/deploy_2.png 630w,
/static/70f338a3e844bd9ca00c04365125f270/40601/deploy_2.png 945w,
/static/70f338a3e844bd9ca00c04365125f270/78612/deploy_2.png 1260w,
/static/70f338a3e844bd9ca00c04365125f270/fa601/deploy_2.png 1569w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 순차적으로 과정을 지켜볼 수 있습니다. 모든 배포가 완료되고 나면 실제 서버로 들어가서 소스가 최신으로 반영되었는지 확인할 수 있습니다.&lt;/p&gt;
&lt;p&gt;(+) 이슈 사항&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;jpeg 확장자의 이미지를 부르지 못하는 이슈가 있어서 설정값에 추가를 해 주었습니다.&lt;/li&gt;
&lt;li&gt;SSL 적용된 주소로 리다이렉트되지 않는 이슈가 있어서, &lt;a href=&quot;http://jayoon.work&quot;&gt;jayoon.work&lt;/a&gt; 또는 &lt;a href=&quot;http://jayoon.work&quot;&gt;http://jayoon.work&lt;/a&gt; 를 입력하면 자동으로 &lt;a href=&quot;https://www.jayoon.work&quot;&gt;https://www.jayoon.work&lt;/a&gt; 로 이동하도록 설정하였습니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5f81d158bcc21347c565eac2b88ad39c/5df5d/redirect.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.58227848101266%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAyElEQVR42nWQ0W7DIAxF8/9fOGmVNqFNSaoFbMCQQMKtgDQPrfZwZHPBF9vDl/rB7Vvh4/OG33HEn9bQxkATQRuCqZEICzGILdj+j3UOwzhNUEphmmcQc6OaPPN2ZouFPZwIQgiQF6rmvcAQY3DOw4tgSwk5Z6Scr5hSusgpYdu2N9Kphxh7hyKhG5wXz1i1fd8vjlLAbBHjilIKjuPo3Yq0fF17zVBHmu93EDGYuRVVLcZ4meXTkOouF90+rCbe+7bv/u5oUz0ASf6CHpg34yUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;redirection&quot;
        title=&quot;&quot;
        src=&quot;/static/5f81d158bcc21347c565eac2b88ad39c/f058b/redirect.png&quot;
        srcset=&quot;/static/5f81d158bcc21347c565eac2b88ad39c/c26ae/redirect.png 158w,
/static/5f81d158bcc21347c565eac2b88ad39c/6bdcf/redirect.png 315w,
/static/5f81d158bcc21347c565eac2b88ad39c/f058b/redirect.png 630w,
/static/5f81d158bcc21347c565eac2b88ad39c/40601/redirect.png 945w,
/static/5f81d158bcc21347c565eac2b88ad39c/78612/redirect.png 1260w,
/static/5f81d158bcc21347c565eac2b88ad39c/5df5d/redirect.png 1572w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;연결하는 모든 과정을 처음부터 기록으로 남겼으면 더 정확하고 좋았을 텐데 이미 설정이 완료된 상태로 포스팅을 하려니 한계가 있네요. 그렇지만 지금까지 남긴 내용만으로도 충분히 호스팅 연결이 가능할 것이라고 생각됩니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[iOS15에서 비디오 재생 직전 화면이 깜박이는 현상]]></title><description><![CDATA[대부분의 동영상 어플리케이션에서 구현되어 있는 것처럼, V 컬러링에서도 동영상 렌더링 시 재생 전 회색 (또는 하얀) 화면의 노출을 방지하고자 배경에 미리 썸네일을 깔아 두는 구현 방식을 사용하고 있습니다.
그런데 작년 7월 iOS가 1…]]></description><link>https://jayoon-kong.github.io/ios15-rendering/</link><guid isPermaLink="false">https://jayoon-kong.github.io/ios15-rendering/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Wed, 02 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;대부분의 동영상 어플리케이션에서 구현되어 있는 것처럼, V 컬러링에서도 동영상 렌더링 시 재생 전 회색 (또는 하얀) 화면의 노출을 방지하고자 배경에 미리 썸네일을 깔아 두는 구현 방식을 사용하고 있습니다.
그런데 작년 7월 iOS가 15 버전으로 업데이트되면서 (베타 버전), 이상하게도 썸네일에서 비디오 재생으로 넘어가는 그 찰나에 화면이 깜박거리는 현상이 발생하기 시작했습니다.&lt;/p&gt;
&lt;p&gt;한 화면에 한 영상만 로드되는, 특히 홈과 같이 크기가 작은 영상인 경우 별로 티가 나지 않았지만 플레이어처럼 전체 화면을 빠르게 스와이프하면서 영상이 바뀌는 경우에는 계속 깜박임이 발생하여 눈이 아주 피로했습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/94ba467846835557c382c7840d81ff4e/4719e/home_player.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 94.9367088607595%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEt0lEQVR42oWSDUzUdRjH/21pq5bLpS0VaKlUaIssNDEMNEVFEFk3VAQxkCQHiAKikCG+YKWUQLylmIJmAsqL8SrI8SrvnNwhLwd3B8dx3IE6xNSJ8Gmgnba19d2+2+95tt/n+T7bI2i0GtQaHQplD9p+Hc/r8ePHjIyMMDY2NlHfkMr4M6+Aq8UlFBZd+08Lw1cbkCcW05raSPi+EGxtHXBz3cKh/ZE42X3DicjThgE329opEpdRWnkdcUUlJWUVExZXVFE67soqhOG0QVov1BGVVo31BicmvTAFI6O3WWntzLRJ8/HxDDIAlT1q6iTNNEplNMlu0iJXIOvonKgnetIWBIVUgVquI7RcjL3/ZlYvWMG6VfasWb6OT+YuIT4y2gDUaPuRtXXQrlDR0tpC1qXz5OZk0t6loFU+7i6Egivl1JSXEVpxBt9gd1a8vxh3Vx9Cd+/B2dGZkzEJT2hjoNUP0qHsQa5UEeDlwqpFH7Jx5ULSzyXQrR1AruxGOPt7FedzMjh0Kpmj27wxmzqDefMtsbFay6plq0k/n2JI2D8wSK9+kLz8PKwtFnA6IoS4EG/8Nzug6utH2duHoFT1IZG2oNToaKioIikhifS0y2Rl5ZKXm4e8o+1fQM2t21w8m0R0qB8FKb+Q/GMovs52NMtkqHU6hEcjj/g//XM22oEBdEN3iQgPI+7ALsRn4siKPYarnQ2V5WL6Bm8hKJUq6hok3JC2oFD1cO/BQ4bvP+TBg0fcuTPM8L37BvA4cPDuEJ5fbcPL1ZnKxOOEe7gwd9YM8rIz0N8dRoj7/jCnAkUc8XEhPDKRiPQaLhbWEhh7gWkbggg+mf00Jehv3UbVq8bXN4AjYYfJTjjIjo0iZk6dTlzUT6j6tAjHQ/eQtteR8K12uK13JCY6GqlExo7ERASnTbj9nGJYWz80RLNKQ2F1O1eKJaTGxxDkH4KpyRw8XTZT3dyJ8EPoXpIDHAjzWIfI9gv8N62mtKQMr8h4hC3uePyRalhZ3dFNbVEd5TItJQ3dpKYWEJVwic8slrBs0SKKypsRQgICSInwY7enK94b1rPf/XO+tF2IXfBuBFcPtsQlTcBGx4FVErqOJVJxQ02ZpIcCsYT03DqWWFgyf/ZsYmKTEcID/dix1R2H5cvY7mxPzLfeZP12DM+gQAQjazx3HjQkbFboyanuorypm2ppL3VtA8SfTMXyIwvM332PbR4+CHJpE9WlpXRJ62mRNFJfV8+Atp+brQouX7lGk/TZHTa1aci4JqXgupzyxi4qJGrCwiKZ89ZMPnhnDptELghPlhl7+uX59zONjj7ptSv05BU2kZPfSFlNB+IGJbGnMlm/RoTTKkf8d4UjFBcNkpfdQ36Gmvx0NfVFf6FqAFUttBeBVjpqABe0awkoaCK0tJVf82vJzKkkNaeGM8nZHDicQGRiJoLX1h6+FnXisrQTLxsNPlZ69ljp+M5SR7BxH5kBdwypkyqasD+Xw+KjUdiI7HBfuxw3kSNO1h/juMaRfQdPIEx+zYiXTD/l5Ren8foUI16ZPJ03phgz9dWZmLxpiofbdkPCAL+dmBoZYzZrFu/a2WNiNg8zU1NMTIxZutQKc3Nz/gaw4mg0PGteZAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;home_player&quot;
        title=&quot;&quot;
        src=&quot;/static/94ba467846835557c382c7840d81ff4e/f058b/home_player.png&quot;
        srcset=&quot;/static/94ba467846835557c382c7840d81ff4e/c26ae/home_player.png 158w,
/static/94ba467846835557c382c7840d81ff4e/6bdcf/home_player.png 315w,
/static/94ba467846835557c382c7840d81ff4e/f058b/home_player.png 630w,
/static/94ba467846835557c382c7840d81ff4e/40601/home_player.png 945w,
/static/94ba467846835557c382c7840d81ff4e/78612/home_player.png 1260w,
/static/94ba467846835557c382c7840d81ff4e/4719e/home_player.png 1330w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;(왼쪽이 홈 화면, 오른쪽이 아래위로 스와이프하면서 전체 화면으로 영상을 볼 수 있는 플레이어 화면입니다.)&lt;/p&gt;
&lt;p&gt;V 컬러링은 기본적으로 모든 영상이 자동 재생되고 있습니다. 하지만 &lt;a href=&quot;https://jayoon-kong.github.io/ios-rendering/&quot;&gt;지난 포스트&lt;/a&gt;에서도 언급했듯이 iOS에서는 사용자가 액션을 취하기 전에는 음소거 재생이 원칙이기 때문에,
음소거 모드를 해제하고 스와이프를 했을 때 다음 영상에서 소리가 재생되도록 하기 위해 안드로이드와 약간 다른 렌더링 방식을 사용합니다.&lt;/p&gt;
&lt;p&gt;처음 이슈를 발견했을 때 저는 이러한 구조적 차이점에 원인이 있다고 판단해서, 안드로이드와 iOS의 서로 다른 구현 방식을 분석했습니다.
구현되어 있는 구조를 간단히 설명하자면, 안드로이드는 스와이퍼 내부에 비디오를 컨트롤하는 컴포넌트를 넣어 현재 보고 있는 영상 직전/직후의 썸네일을 미리 받아와서 스와이프를 할 때 보다 빠르게 화면에 렌더링을 하는 반면,
iOS는 안드로이드와 같은 구현 방식을 사용하면 재생 시 자동으로 음소거가 되어 버리는 문제점이 있기 때문에 비디오를 컨트롤하는 영역을 따로 분리해서 스와이프가 된 이후 하나씩 영상을 재생하며 소리를 켜는 방식을 사용하고 있습니다.
그래서 iOS를 안드로이드와 동일한 방식으로 구현해 보기도 하고, 재생되는 시점의 데이터를 하나 하나 확인해 보며 원인을 파악해 보려고 애썼지만 어떤 방법으로도 해결이 되지 않았습니다.&lt;/p&gt;
&lt;p&gt;여러 가지 방법을 시도해 보다가 slide change event가 일어나는 시점을 살펴보았습니다.&lt;/p&gt;
&lt;p&gt;사용자에게 아무것도 렌더링되지 않은 화면을 보여주지 않기 위해 현재 스와이핑이 되는 과정, 즉 slide change event가 일어나는 시점에도 썸네일을 배경으로 보여주고 있었는데요,&lt;/p&gt;
&lt;p&gt;이미지에서 동영상으로 전환이 되는 시점에 리페인팅을 하는 과정이 잘 처리되지 못하는 것이 아닌가 하는 생각이 들어, 스와이핑 중일 때는 썸네일을 제거해 보기로 하였습니다.
그랬더니 배경이 사라지면서 조금 덜 버벅거리는 느낌은 있었지만, 여전히 비디오가 재생되는 시점에서는 깜박임이 발생하였습니다.&lt;/p&gt;
&lt;p&gt;이번에는 비디오 로드의 초기 상태값을 변경해 보기로 하였습니다. iOS의 경우 처음에 로딩 상태를 나타내는 값이 false로 되어 있고, 비디오의 &lt;code class=&quot;language-text&quot;&gt;onLoadedData&lt;/code&gt; 속성에서 해당 상태값을 true로 바꿔주며, slide change event 발생 시 다시 로딩 상태를 false로 바꿔 주고 있습니다.&lt;/p&gt;
&lt;h3&gt;onLoadedData&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;video&lt;/code&gt; 태그가 완전히 로드될 때 javascript를 실행하는 이벤트 요소&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;video&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onLoadedData&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;{setLoaded}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(참고) 비디오 로드 순서 (출처 : w3cschool)&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;onloadstart&lt;/li&gt;
&lt;li&gt;ondurationchange&lt;/li&gt;
&lt;li&gt;onloadedmetadata&lt;/li&gt;
&lt;li&gt;onloadeddata&lt;/li&gt;
&lt;li&gt;onprogress&lt;/li&gt;
&lt;li&gt;oncanplay&lt;/li&gt;
&lt;li&gt;oncanplaythrough&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;그래서 로딩 상태의 초기값을 true로 변경해 주었더니, 일단은 깜박거리는 현상이 사라지는 것을 확인할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;하지만 이렇게 썸네일을 보여주는 과정을 생략하니 비디오가 재생되기 전에는 검은 화면이 노출되어, 깜박이는 현상은 사라졌지만 뭔가 화면이 굉장히 느리게 렌더링되는 느낌을 지울 수가 없었습니다.&lt;/p&gt;
&lt;p&gt;특히 너비가 더 긴 가로형 영상인 경우 원래부터 위아래가 검은색 배경이라 크게 느리다는 느낌이 없었지만, 길이가 더 긴 세로형 영상의 경우 전체 화면이라 시각적으로 주는 효과가 더 크게 느껴졌습니다.&lt;/p&gt;
&lt;p&gt;문제의 현상이 썸네일에서 동영상으로 전환되는 과정에서 깜박거리는 것으로 보였기 때문에 이번에는 썸네일의 위치 및 보여주는 시점을 변경해 보기로 하였습니다.
우선 원래 스와이퍼 안에 있던 껍데기 컴포넌트에서 공통으로 사용하던 썸네일을 스와이퍼 외부에 따로 빠져 있는 iOS 비디오 영역으로 이동시켜 보았습니다.
그 이유는 로딩 상태 값이 변경될 때마다 화면이 다시 그려지는데,
이미지와 비디오가 같은 노드에 위치하고 있으면 부모 컴포넌트를 거치지 않고 자식 컴포넌트에서 렌더링을 한 번만 수행하면 리페인트 과정이 줄어들기 때문입니다.&lt;/p&gt;
&lt;p&gt;그래서 이미지 위치를 옮긴 후 비디오의 로드 상태값을 다시 원복시켜, 로드가 되지 않았을 때는 썸네일을, 로드가 된 이후에는 비디오를 보여주도록 변경해 보았더니 여전히 깜박거리는 현상은 있었지만 이전보다는 훨씬 개선이 된 느낌이었습니다.
어느 부분이 개선이 된 걸까 테스트를 해보다 보니, 세로형 영상에서는 개선이 되지 않았지만 가로형 영상에서는 깜박이는 현상이 바로 해결되고 아주 매끄럽게 화면 전환이 일어나는 것을 확인할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;그래서 데이터를 기준으로 가로형 영상과 세로형 영상을 구분하여 가로형은 기존과 같이 썸네일 로드 후 비디오를 재생하도록 처리하였고,
세로형은 썸네일을 제거하고 비디오를 바로 로드하도록 처리하였습니다.
이렇게 했더니 가로형 영상에서는 깜박이는 현상은 사라지면서도 썸네일이 아예 보이지 않을 때보다는 훨씬 빠른 것 같은 느낌을 받을 수 있었습니다.&lt;/p&gt;
&lt;p&gt;그로부터 한참 후 시간적 여유가 좀 생겼을 때 여전히 어딘가 찜찜했던 마음의 빚을 해결하고자 문제를 다시 한번 들여다 보았습니다.
그리고 자바스크립트 영역에서는 이제 가능한 모든 방법을 사용했다고 판단했기 때문에 스타일 속성을 분석해 보아야겠다는 생각으로 착안점을 바꾸게 되었습니다. 그러면서 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 속성에 대해 자세히 조사를 해 보게 됩니다.&lt;/p&gt;
&lt;h3&gt;object-fit이란?&lt;/h3&gt;
&lt;p&gt;css의 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 속성이란, 요소의 크기에 맞게 &lt;code class=&quot;language-text&quot;&gt;img&lt;/code&gt; 태그와 &lt;code class=&quot;language-text&quot;&gt;video&lt;/code&gt; 태그의 크기를 조정하는 방법으로 사용되는 속성입니다. 기본적인 속성 값은 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;fill&lt;/strong&gt; : 기본값이며 요소의 크기에 맞게 꽉 채워서 보여줍니다. 크기가 늘어나거나 찌그러집니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;contain&lt;/strong&gt; : 요소의 가로/세로에 맞춰 크기가 조정되고, 비율은 고정입니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cover&lt;/strong&gt; : 요소의 가로/세로에 맞춰 크기가 조정되고, 비율은 고정입니다. 가득 채울 때까지 확대됩니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;none&lt;/strong&gt;: 원본 사이즈로 처리됩니다.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;scale-down&lt;/strong&gt; : none과 contain 중 대체 콘텐츠의 크기가 더 작아지는 값을 선택합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1ce333b63790255ce396338555cee72a/f3c12/objectfit_fill.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVR42m2RS0hUURiAhzZtWrbrYUoRuJFetBJ0EUm1KOiBtA2MSHETRhAhkYVgLaIgoXdQlNBTgxgSdbDS0hkdZzSXo83rzn3Puc+ZL+4dc9UPH+c/54fv/P85kWKhgCLLSMUCmqpAtUItqutUq1X+H7XzoG7oOr7vE8kpZXKKSVY2yKsCRXjryMJDsyu4noemajUsgWoayJkcmrDRFA1VVpFVHcd1iWSyEn+KGllJJy8bqGUPxXRDVNMhZ1QoC5tUeolkMkV8ZJTEnafEms8w2X2FH5f6iP9M8C36leLKKpGVgkq2ZJCTTYK8oApk06VkOkiGg2n72LZNciHN7OBLJpqPM7znIA82b+LZrh2Mnuvmw9XrvLnVz3w0SqQklcJRdE1HKkqYhonnuriOg2M7VHwfy7aZi88x+2iI8cPtfDnfxdvOTgbqGulu3E3vzgb6mw4QG/5EJJ8vUiopyLJKUZIRloO1hhA2nudjWRZzyRRTd58w1nqKd/UNjJw4zcdjJxnYuoWO+u0c2riBiUAYyFRVD1EULRTZdoAb5sHPWcIikUoz/fgVky3tfG5rY3Dffvr2NtHf2sLtCxfpPNvOVGyciCTJqKq2juN4oSyQBsKgQyEsfs3EmZlfYHokytjlGzzcVse1jRHuHTnK/Z4eXj9/wWomUxMGnQUdBmMXCsVQ8E/s+xUcx2Fx8TeLS8ukl5ZJDL3ne+9NJjq6iI/HSCRTJBLzaJoejFzrUNM0ZFkh2BuGSbksMM0yQojwDYNLwlwIbAhxgtV11+oCx7b5C8pPtQTAgiLjAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;objectfit_fill&quot;
        title=&quot;&quot;
        src=&quot;/static/1ce333b63790255ce396338555cee72a/f058b/objectfit_fill.png&quot;
        srcset=&quot;/static/1ce333b63790255ce396338555cee72a/c26ae/objectfit_fill.png 158w,
/static/1ce333b63790255ce396338555cee72a/6bdcf/objectfit_fill.png 315w,
/static/1ce333b63790255ce396338555cee72a/f058b/objectfit_fill.png 630w,
/static/1ce333b63790255ce396338555cee72a/f3c12/objectfit_fill.png 764w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dca435d72de2e2b08d8429bc693f5ae8/17a7a/objectfit_contain.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVR42nWSPWgUQRSAr7YRtE1jYSkIEgRBKwsb06gEKztFEBFEMNZJYUQQFdFgpYVNKgkxBAVtQsSTxCBKsFDUu9zt7szO7sz+ze7epzv5FXXg4y3z8+2bea8lhMDzfVz0PLIsoxmDweCf/G+kaYoxhlaeZRitSYxxE0VRUJXln1QVdV07YfNDFWtUHKPCGKViTJK6PaW1tESo+bkW4MsYT0QonaGzkjixDp1at3kzOz8I+LC0wvLkYxZGL/LuyTQfl1egrt16qyMTOr6iJ42j40cEcY40FmkKfG1RWQWD9QNeqGhPPuT5/gM83TfE3JUx5h5NUZfluvC7r/nWDegGmh99xddugB/lCFMijMWLLTLdFval5O34PV6dO8+D4ye4NjTE1OjZrXdvhSqmu+YhZITnS0KlSXNLkhZbuCvXm8KQhYm7vDh4mNmTp7i6dw+Xjh1ZF9Y1La0NQkjiWBOGCmMS8tyS58UWO4W9MGRx4j6zw0e5M3yIiZERbo5d386wEfm+IIo0UoYkSYa11YbMOlyVN4rS7fVpt5d4c2OcW7t3cfvMaeZnZv4WKhW5FvC8ACFCJ8qywrGzyl7fY+XzKu+fTfP6wmUW51/yafXLtjBNM5ddE5vrRlHsYllWWFs6dgqbfmz6rWq+gWowcOtO+LvKvwD/zdvwxOarvQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;objectfit_contain&quot;
        title=&quot;&quot;
        src=&quot;/static/dca435d72de2e2b08d8429bc693f5ae8/f058b/objectfit_contain.png&quot;
        srcset=&quot;/static/dca435d72de2e2b08d8429bc693f5ae8/c26ae/objectfit_contain.png 158w,
/static/dca435d72de2e2b08d8429bc693f5ae8/6bdcf/objectfit_contain.png 315w,
/static/dca435d72de2e2b08d8429bc693f5ae8/f058b/objectfit_contain.png 630w,
/static/dca435d72de2e2b08d8429bc693f5ae8/17a7a/objectfit_contain.png 753w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5511ee18bd52b869b1ba103d980de0bb/17a7a/objectfit_cover.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVR42n2TS0hUYRiGD1EtuqzEitJuC1eVF1KoRRBEQUkXaNFGISGKKJRwIW0qsCLBaqWWdFNzNGwREpRZiJKRZeaMjSW5SBxHz8ycy5z7mTM+MWeMaNMHD+/3/4ufj/d7f0EUF5AkCVEUkWWZxcVFspXVzPnPzf/KME1fBU3T0XUDXdcxTQvXTf1DKuXhui6SopBIqiz0DzL/6h1T3QEmu9oQ+97z88MI0+Ew4vQ0gijGSUgKsqyiKEls28WyHKwlTbkelm0THA8xer2FgbKDtOXn0CAItORt5O3VBrorz9DTeJehpx0IsiSjKirJpIaUkPxpHcfFsR1sy8FLpfwHQ2NBRs5dYaDoAH21tbTV1nArv4BrxYXcLi6icWcpvY8eIfyal4nENeYSOpk+KhnENZe45iAmHTTbwzItQuFJJmZmGK66xMeqOj7faaF5WyHHV6+kZlMudWtzeNnaijAbjRMRFaJxlYgoI+suiuEiGy6q4RLVPDTDIhSa4FNzgMHySnrWb+BF6R6GT1TyIG8zJ1ct51juGl53PEGYmZeIxFSf2ZhKQnOWyE6pWtkJg9/CDFVUM1h4iK7t63i8fx/tVafpLC7h/qkKdqxYRnfrPYSMbxkPfR9VFS+zVcf1yfiY9jwsw2Q8/J3R/gGGyo7ypngvDwt2cXnrFs6XllBfXc3Z8sP0PgsgiLE4iYSMrKjEYgmi0QUMw8KyHUzT9qNjWzbhH1NMjIX4Wt/El/YAneVHaNpdxPOLF+i8eYPg5BTzc1GEzFYty/YzaBimz9/8ZTWdTuN5aV/T4JMyDRxdw5YlXMPws5r5BL8BPPKgccRC1TMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;objectfit_cover&quot;
        title=&quot;&quot;
        src=&quot;/static/5511ee18bd52b869b1ba103d980de0bb/f058b/objectfit_cover.png&quot;
        srcset=&quot;/static/5511ee18bd52b869b1ba103d980de0bb/c26ae/objectfit_cover.png 158w,
/static/5511ee18bd52b869b1ba103d980de0bb/6bdcf/objectfit_cover.png 315w,
/static/5511ee18bd52b869b1ba103d980de0bb/f058b/objectfit_cover.png 630w,
/static/5511ee18bd52b869b1ba103d980de0bb/17a7a/objectfit_cover.png 753w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/19189858dacf7cc7753f7358ea1ecdd2/c483d/objectfit_none.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVR42oWSW2iNAQDHv5e1PIyVB9GG2PbiMqXjNmQs0dzaAwnJ0ih5UFaWF14k1+KgtZpLLNFK2NwvB0c2Hlgic2Ybh7Pv+47zXc93Pd/54RvKk3/9+r/9+j/8BVEUURSFPz2c/G8gn8+H/C92EOB6HoJhmJimya+2LBvP8/8hl8vh+z7yyx7kR90M3OrgQ1srH69c5FP7Vfrjz5Flmd6OTjQ5gyCKEpmMiqJoaJqO6/o4jovjeNiWix/kcTSdrlU76KreSPuMGZyvqWJ/2TiihYVEK+fQun4dp0sncy96EuGXSNcNDCMbSrNZa1hmuyHh0iDHm8vXidfWE5uymJ6Oh7zoecuRylnsKqlg5+iRbBk1gnObNyNIUjoUqaqOKMrouvlXaP0ROg7vh1K8jsV5UD6PZw17eXXgMI8W1rFv/CSqiwppLCrgxLYGBFmSURUVTdVQMgqe6/3FdVwC38fL5Xh98wHdjYe4W1bJjfLpXCur4PbsZTyLLOJw6VhqCwTO1G9CGEhlSMoaSVnni6Qh6y5pYxhZd8jYAbaZ5cnyemLT1nBn1iJaigUuLZhL7GwrnbWruT1hEruLitmzaQNCcihNKq2RktWwDSdAzXohWtYjpflYeXh57BSPpy3haaSa9ikTiI4ZR8uyFTSVl3K8Zin3jkZpO3gIYXBICRd++27wWVTp//YdSbNJGx6S7qLbPp7r8q5/gHhDE11Va7k/fzEXpka4sLKOHRNL2B6ZydYVy2lrbkZQFYWsaWIaJrqqoakqnuOS83383z8MggDbsjCTInbfF8zBQdJ9CeREL2oigSHJpL8mcX4e+wfkRI75gl/0YgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;objectfit_none&quot;
        title=&quot;&quot;
        src=&quot;/static/19189858dacf7cc7753f7358ea1ecdd2/f058b/objectfit_none.png&quot;
        srcset=&quot;/static/19189858dacf7cc7753f7358ea1ecdd2/c26ae/objectfit_none.png 158w,
/static/19189858dacf7cc7753f7358ea1ecdd2/6bdcf/objectfit_none.png 315w,
/static/19189858dacf7cc7753f7358ea1ecdd2/f058b/objectfit_none.png 630w,
/static/19189858dacf7cc7753f7358ea1ecdd2/c483d/objectfit_none.png 751w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d8fd8d5b7e0a121732585acdc7b620f7/17a7a/objectfit_scaledown.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 48.734177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR42n2SOYtTURiGb+E/sEphZSPWMnYjjmIhKNiohQxY2IlWCoJRECynsLEWYUAslMEFxIBoGBLF6Oi4jcsUJo7Jndxz19zl3OWR7ybERMUPXs7COQ/ve75jmKaJUgoZbdumKAqGVZSS9aT+VbLvOA5pmmL4fkAQDAiCgDCM0DqdUppmZFlGnufl6NgOyvewfpooy0FZNrFOyUdnDNPso5SDbbu4rkeSaOI4IY41UZSUUDkolWrN2rd1VpYe0zx6msbZKs1HT+h1OmOnhsAcR2A+lmXj+4MxbApYFKRFzsdGi/rBE9yobOXu/gPcuXiFT81GCRSXhkAE5nkCVP8H5jkfll9Snz/D0slTXN6xk3OVCq/vPRgC5Q0nIwtcIAIcQvVfDt83WtT2HeHh7ByLs3Mc3mJQu32rBGYCVJbClciOWz54EidTSv9w+O55i/qheW7OzLCwdw8Xjh2n8ezpECiRf/QUPcsdK4gyvFDjDoYKk5Ri1BSdJKyufaZ1v8birt1c3b6N69VLtNvtYWTpcrtr0TEdNvoe37sW6x2TTTdCBRrlJ2x4KTqb6PKXr7x9tUL9fJXlhWu8eLNKf7P/u8tde4DpxZhuRNcOkbUVaOwwQw0yVJiTjSLLhUz+pczFkcTM8/GHF+Av3qbboJ9XBtYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;objectfit_scaledown&quot;
        title=&quot;&quot;
        src=&quot;/static/d8fd8d5b7e0a121732585acdc7b620f7/f058b/objectfit_scaledown.png&quot;
        srcset=&quot;/static/d8fd8d5b7e0a121732585acdc7b620f7/c26ae/objectfit_scaledown.png 158w,
/static/d8fd8d5b7e0a121732585acdc7b620f7/6bdcf/objectfit_scaledown.png 315w,
/static/d8fd8d5b7e0a121732585acdc7b620f7/f058b/objectfit_scaledown.png 630w,
/static/d8fd8d5b7e0a121732585acdc7b620f7/17a7a/objectfit_scaledown.png 753w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;(출처 : [object-fit] &lt;a href=&quot;https://developer.mozilla.org/ko/docs/Web/CSS/object-fit&quot;&gt;https://developer.mozilla.org/ko/docs/Web/CSS/object-fit&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;위에서 언급했듯 가로형은 문제가 없었는데 세로형에서 이슈가 되었던 원인은, 최초에 css가 가로형 영상의 경우 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로, 세로형 영상인 경우 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;로 세팅되어 있었기 때문이었습니다.
세로 모드만 지원하는 V 컬러링에서는 세로가 더 긴 일반적인 스마트폰을 기준으로 영상을 보여주기 때문에, 요건 자체가 가로가 더 긴 가로형 영상은 너비에 맞춰 높이는 무시하는 반면 세로가 더 긴 세로형 영상은 높이에 맞춰 세팅하면서 가로를 100%로 늘려 full 영상으로 보여주도록 되어 있었습니다.
그래서 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;이 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 통일되지 않고 세로형은 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;로 분기가 되어 있었던 것이죠.&lt;/p&gt;
&lt;p&gt;이에 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;이 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;일 경우 iOS 15에서 썸네일과 영상의 변환 과정이 자연스럽지 못하다는 추측을 통해, 비디오의 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;의 초기값을 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 바꿔 보았습니다.
역시나 예상대로 가로형과 같이 깜박거리는 현상이 사라지고 매끄럽게 영상으로 전환 재생이 되더군요. 따라서 iOS 15에서는 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;fill&lt;/code&gt;을 제대로 처리하지 못한다고 스스로 결론을 내었습니다.&lt;/p&gt;
&lt;p&gt;하지만 이렇게 해도 여전히 문제는 남았습니다. 세로형을 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 해 버리면 풀 화면을 채워야 한다는 기획요건에 부합하지 못하고 너비가 양쪽으로 남게 되는 현상이 발생했기 때문입니다.&lt;/p&gt;
&lt;p&gt;고심에 고심을 거듭하다가 순간, 초기 값은 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 하되 비디오가 로드되는 시점에 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 속성을 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;로 변경하면 어떨까? 하는 아이디어가 반짝 하고 떠올랐습니다.
결과는? 대성공이었습니다! 😎&lt;/p&gt;
&lt;p&gt;최종적으로 정리한 내용은 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;objectFit&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;contain&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;cover&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;direction &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;HORIZONTAL&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;contain&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;cover&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;direction&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; loadedStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loaded &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; objectFit &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;none&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;loaded&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;loaded &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;...&quot;&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;thumbnail&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;video
  className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;contain&quot;&lt;/span&gt;
  style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;loadedStyle&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  onLoadedData&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setLoaded&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(불필요한 속성은 제거하였습니다.)&lt;/p&gt;
&lt;h3&gt;마무리&lt;/h3&gt;
&lt;p&gt;로딩이 되기 전에는 이미지를 풀 화면으로 보여주고, (이미지에는 &lt;code class=&quot;language-text&quot;&gt;object-fit: cover&lt;/code&gt; 속성이 적용되어 있습니다.) 비디오의 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 초기 값은 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 세팅하되 로딩(재생)이 된 시점에 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;로 변경하면 됩니다.
아직 완전한 해결책이라고 단정지을 수는 없겠지만 우선 iOS 15에서 발생하던 깜박임, 그리고 최근에 iOS 15.5에서 대두되던 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;의 문제(&lt;code class=&quot;language-text&quot;&gt;fill&lt;/code&gt;일 경우 잠깐 비디오가 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;처럼 보였다가 늘어나는 현상)도 함께 해결된 것으로 보아 위 방법이 최선이라는 결론을 내리게 되었습니다.&lt;/p&gt;
&lt;p&gt;접근하는 방법을 찾는 데 굉장히 시간이 많이 소요되었지만 개인적으로 많은 것을 배울 수 있었던 경험이라 생각합니다. 😃&lt;/p&gt;
&lt;p&gt;(+) 추가 이슈&lt;/p&gt;
&lt;p&gt;iOS 16 버전이 업데이트되면서 잘 되던 방식에 또다시 문제가 생겼습니다. 15 버전으로 처음 업데이트 되었을 때처럼 비디오가 깜박거리기 시작한 것이죠.&lt;/p&gt;
&lt;p&gt;다행히 이번에는 문제의 원인을 잘 알고 있었고, 비디오의 구조 또한 완전히 파악하고 있었기 때문에 접근 방법을 쉽게 찾을 수 있었습니다.&lt;/p&gt;
&lt;p&gt;우선 깜박거리는 현상을 제거하기 위해 기존에 &lt;code class=&quot;language-text&quot;&gt;display: none&lt;/code&gt;으로 처리하던 부분을 &lt;code class=&quot;language-text&quot;&gt;visibility: hidden&lt;/code&gt;으로 변경하였습니다.
그 이유는 &lt;code class=&quot;language-text&quot;&gt;display&lt;/code&gt; 속성의 경우 그 값에 따라 &lt;code class=&quot;language-text&quot;&gt;block&lt;/code&gt;인 경우 DOM에 영역 자체가 생겨나고 &lt;code class=&quot;language-text&quot;&gt;none&lt;/code&gt;인 경우 사라지기 때문에, 값이 변경될 때마다 높이값을 새로 계산하는 리플로우 과정이 발생하므로 성능에 좋지 않은 영향을 미치기 때문입니다.
반면 &lt;code class=&quot;language-text&quot;&gt;visibility&lt;/code&gt; 속성을 사용하면 영역은 미리 잡아 놓되 값에 따라 노출, 숨김 처리만 되기 때문에 리플로우 과정을 줄일 수 있습니다.&lt;/p&gt;
&lt;p&gt;역시나 예상대로 깜박이는 현상은 사라지고, 대신 15.5에서 발생하던 것과 같이 사이즈의 너비가 줄었다가 확대되는 모습이 두드러졌습니다. 기존에 비디오 로드 전 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt;의 값을 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 잡아 놓았다가 비디오 로드 후 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;로 변경했던 방법이 더 이상 먹히지 않는 모습이었죠.&lt;/p&gt;
&lt;p&gt;우선 썸네일과 비디오의 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 값을 모두 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;에서 &lt;code class=&quot;language-text&quot;&gt;contain&lt;/code&gt;으로 변경해 보았습니다. 그랬더니 역시 아주 매끄럽게 화면 전환이 일어나는 모습을 확인할 수 있었습니다. 역시나 iOS 16 버전에서도 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt; 속성을 처리하지 못하는 것을 확신할 수 있었습니다.&lt;/p&gt;
&lt;p&gt;절망의 삽질 끝에 혹시나 하는 마음으로 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;를 &lt;code class=&quot;language-text&quot;&gt;fill&lt;/code&gt;로 변경해 보았습니다. &lt;code class=&quot;language-text&quot;&gt;fill&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;와 달리 원본 이미지의 비율은 유지되지 않지만 화면을 가득 채우는 효과는 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;와 동일합니다.
어차피 V 컬러링은 정해진 비율의 동영상을 업로드하기 때문에 사실 &lt;code class=&quot;language-text&quot;&gt;fill&lt;/code&gt;이나 &lt;code class=&quot;language-text&quot;&gt;cover&lt;/code&gt;나 그닥 시각적인 차이점은 없습니다. 설레는 마음으로 플레이어에 진입해 보았더니 놀랍게도 전혀 위화감 없이 현상이 해결된 모습을 확인할 수 있었습니다!&lt;/p&gt;
&lt;p&gt;아직은 제 아이폰 12 미니에서만 테스트해보았지만 다른 단말에서 추가적으로 테스트를 해볼 예정입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 최종 코드&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; loadedClassName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	loaded &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;direction &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;HORIZONTAL&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;landscape&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fill&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;loaded&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; direction&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 비디오에서 style 속성을 제거하고 클래스로 변경&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;video
	className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;loadedClassName&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;moving &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;visibility&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;hidden&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(+) 추가 이슈&lt;/p&gt;
&lt;p&gt;출근해서 기존에 문제가 되었던 iOS 15.0.1 버전부터 15.4 버전까지 테스트를 해 보았더니 위 코드가 동작하지 않는 현상이 나타났습니다. 그래서 예외적으로 위 버전만 분기 처리하여 기존의 코드를 사용하도록 하였고, 나머지 15 버전 이하나 15.5 이상, 안드로이드 버전은 새로운 코드를 사용하도록 처리하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; videoClassName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isUniqueIOSVersion &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;landscape&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; loadedClassName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  isUniqueIOSVersion&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; loadedClassName
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; loadedStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loaded &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;moving &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; objectFit &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;loaded&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; moving&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; movingStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moving &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;moving&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; videoStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isUniqueIOSVersion &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; loadedStyle &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; movingStyle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;loadedStyle&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; movingStyle&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;video
  ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;videoEl&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;obj-video &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;videoClassName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;videoStyle&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그리고 기존에 &lt;code class=&quot;language-text&quot;&gt;visibility&lt;/code&gt; 속성으로 변경했던 값을 &lt;code class=&quot;language-text&quot;&gt;display&lt;/code&gt;로 다시 원복시켰습니다. (style 속성 충돌 때문) ⇒ 이 부분은 추후 다시 검토해 볼 예정입니다.&lt;/p&gt;
&lt;p&gt;2022년 10월 26일에 작성함.&lt;/p&gt;
&lt;p&gt;(+) css 속성 변경&lt;/p&gt;
&lt;p&gt;추가적으로 테스트를 해 보니 가끔 스와이핑을 시작하는 시점에 미세하게 썸네일이 깜박거리는 현상이 발견되었습니다. 이에 &lt;code class=&quot;language-text&quot;&gt;display&lt;/code&gt; 속성이 문제가 된 것을 직감하고 다시 해결 방안을 찾기 시작했습니다.&lt;/p&gt;
&lt;p&gt;그러던 중 다른 작은 비디오 화면에서 사용하고 있는 &lt;code class=&quot;language-text&quot;&gt;transition&lt;/code&gt; 속성을 사용하면 어떨까 하는 생각이 들었습니다. 플레이어에서는 &lt;code class=&quot;language-text&quot;&gt;CSSTransition&lt;/code&gt; 컴포넌트를 씌우면 &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 속성이 제대로 작동하지 않는 이슈가 있어서 style에 직접 적용하는 방법을 선택하였습니다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;transition&lt;/code&gt; 속성은 다음과 같이 사용할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;div { transition:
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;property&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;timing-function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;delay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;; }&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;delay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;timing-function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;duration&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;property&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;transition-property
&lt;ul&gt;
&lt;li&gt;트랜지션을 적용해야 하는 css 속성의 이름으로, 트랜지션 하는 동안 여기에 명시된 속성만 움직입니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;transition-duration
&lt;ul&gt;
&lt;li&gt;트랜지션이 일어나는 지속 시간을 명시합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;transition-timing-function
&lt;ul&gt;
&lt;li&gt;속성의 중간값을 계산하는 방법을 정의합니다. &lt;code class=&quot;language-text&quot;&gt;ease&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;linear&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;step-end&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;steps&lt;/code&gt; 등의 속성이 있습니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;transition-delay
&lt;ul&gt;
&lt;li&gt;속성이 변한 시점과 트랜지션이 실제로 시작하는 사이에 기다리는 시간을 정의합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;하지만 &lt;code class=&quot;language-text&quot;&gt;display&lt;/code&gt; 속성과 &lt;code class=&quot;language-text&quot;&gt;visibility&lt;/code&gt; 속성은 모두 &lt;code class=&quot;language-text&quot;&gt;transition&lt;/code&gt; 기능을 사용할 수 없다는 사실을 알게 되었습니다. 스무스한 화면 전환을 위해서는 css transition이 필수인데, &lt;code class=&quot;language-text&quot;&gt;transition&lt;/code&gt;의 경우 연속적인 숫자로 값을 줄 수 있는 속성에만 작용하기 때문입니다.
그래서 &lt;code class=&quot;language-text&quot;&gt;display&lt;/code&gt; 속성을 &lt;code class=&quot;language-text&quot;&gt;opacity&lt;/code&gt;로 변경하고 &lt;code class=&quot;language-text&quot;&gt;transition&lt;/code&gt; 처리를 하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; movingStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
    moving
      &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;opacity&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;opacity 100ms ease-in-out&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;opacity&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;moving&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;결과적으로 아주 매끄럽게 동작하는 것을 확인할 수 있었습니다. 😄&lt;/p&gt;</content:encoded></item><item><title><![CDATA[iOS 비디오 렌더링 최적화]]></title><description><![CDATA[V 컬러링은 플레이어에서 안드로이드와 iOS의 비디오 렌더링 방식이 다르게 구현되어 있습니다. 초기 구현 시에는 OS…]]></description><link>https://jayoon-kong.github.io/ios-rendering/</link><guid isPermaLink="false">https://jayoon-kong.github.io/ios-rendering/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Tue, 09 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;V 컬러링은 플레이어에서 안드로이드와 iOS의 비디오 렌더링 방식이 다르게 구현되어 있습니다. 초기 구현 시에는 OS 구분 없이 공통적으로 처리를 했는데, 먼저 재생될 영상의 앞뒤로 영상 정보를 가져오고 스와이프 내부에서 비디오를 렌더링하면서 위아래로 스와이핑을 할 때 이미 가져온 이전 영상과 다음 영상을 미리 준비함으로써 사용자에게 보다 빠르게 비디오를 보여주도록 되어 있습니다.&lt;/p&gt;
&lt;p&gt;하지만 이렇게 하면 iOS의 경우 소리가 재생되지 않는 이슈가 발생합니다. 그 이유는 iOS의 정책적인 이유로 사용자가 액션을 취하기 전까지는 음소거로 플레이를 하는 것이 원칙이기 때문입니다. 틱톡이나 다른 동영상 플랫폼과 같이 V 컬러링도 사용자가 화면에 진입한 순간 자동 재생이 되도록 되어 있고, 사용자가 소리를 켠 상태에서 스와이핑을 하면 소리가 켜진 채로 플레이가 되어야 하는데 iOS에서는 그렇게 하면 play 오류가 발생하게 됩니다. 따라서 오류가 발생하면 자동으로 음소거 모드로 진입하여 다시 플레이하게끔 초창기에 구현을 했었죠. 하지만 그렇게 하면 사용자가 너무 불편하고 어색할 것 같아, iOS의 경우에는 스와이프 안에서 비디오를 렌더링하지 않고 세부 정보 (태그나 좋아요 등 기타 기능) 만 가져오도록 하고 비디오는 따로 가져오는 방법을 사용했습니다. 비디오는 스와이프 외부에서 렌더링하며, 하나씩 가져올 때마다 음소거를 해제하여 재생하는 방식을 사용함으로써 사용자가 스와이핑을 할 때 자연스럽게 소리가 나오는 상태로 자동 재생이 되도록 한 것이죠.&lt;/p&gt;
&lt;p&gt;그런데 이렇게 하면 한 가지 문제가 발생합니다. 안드로이드는 스와이프 안에 비디오 정보가 들어있기 때문에 사용자가 스와이핑을 할 때 아래위 영상(썸네일)이 자연스럽게 노출되는 반면, iOS는 따로 렌더링이 되기 때문에 사용자가 스와이핑을 하는 순간 영상 정보가 사라집니다. 사실 이 이슈는 iOS 버전이 15로 업데이트되면서 발생했던 화면 깜박임 이슈를 해결하는 과정에서 발생한 side effect입니다. 대부분의 동영상 플랫폼에서 구현되어 있는 것처럼 비디오가 로드되기 전 사용자에게 빈 화면을 보여주지 않기 위해 먼저 썸네일을 깔아 두는데, 썸네일이 비디오로 전환되는 과정에서 화면을 다시 그릴 때 OS에서 자연스럽게 처리하지 못하고 깜박임 효과를 주는 것처럼 렌더링을 하는 이슈였습니다. 그 현상을 해결하기 위해 스와이핑 시 배경을 없애도록 처리하였는데 자세한 내용은 아래 포스트를 참고해 주세요.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://jayoon-kong.github.io/ios15-rendering/&quot;&gt;iOS15에서 비디오 재생 직전 화면이 깜박이는 현상&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/63bee6568950337260b9e073466087e4/ccf0c/android_ios.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 98.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEG0lEQVR42pWVa0yTZxiGP4H9IEEhGMs4jJYWhlJONVjHoUzWAk7ASQQkwAhDkEA4DpECVbRQpBwFDyxbli2bBhdxnERpDAs63UCzZQ5Ki0vcomNi9nP/dy1fBSOTafbjzvcmb54rz5v7fp5PKMowkJXcSNH+cuqKCijMPEDOu8XkJlaSv7uU8pwqbPfsTH0zhVQqJSwsDKVSuUahoaEEBwej0WgQkpQ5REuz2KtOokAXTbxSSaIiDq3PHrR+OtSeUcxOzTA8OowgCC+Vu7s7QmrIAbSK96jOycBQuI/sXTGURO8m3z+VgqAU9vnEce/GXUbGRx1FLi4ubNiwYY2cnJwcdxKJBOFQSgVl+2s429KA/mAWdek6OiNjaPNJQB+QSKFvLNbpOwyvAFeL15OXlxdCTXo5ZzLL6K8qxVCYwZWKQhaLqhiNTOO4TzRlXttZnJ7h65cAxS7Fr7e3N8L7cTmUxFZSmV5NeWoxX2Ts4XpCEl0Bagp8VGg3yvlx6hYj42PrAldhXhIJ9XW1CMEV/UQNLKH5ZJmIkmtkb1WRK5WT9kYsWrkGxUZ/bk19y9gK0NnZed3nurq6kpaagqAuO4eqro/oskOo8lrQ6SqJC48kLq6EhCQ9b4Zk8t33Vkb/5fJqZ8+ffX19EVKzTSSnHUan2kl0ioG3s7pIjk8kJqEAzd4mQnZ8wMzdRcbHRhxFnp6b/9OUwMBAhGmTiesGAxb9Ya41NDHZ0ISlvpZJvR7L0WOM1VTz14MHDI+Po1RuZVdCLP7+3gTIZMhkMkeMVoFBQUEI9/s6sbUbWTC3sNDejPVkM1bx3NmKveck8+3H+XvpEZdHRwgLVhO+LYEg2U6kMgUKuRw3N7dnQD8/PwT76R6sHSas5lbmzUbmRHWYmO9qY6G3g5/MrfD7Iy5MXsW96jPiP37I6yVfIQguLzxZHE3h/tk+bN0nsXW1Yes0YRUlwnrMLPZ3MycCHy9xcWQUYZMrrwX6Ikg2rZjh9GKw7WdEYLsDahfVa+aXUx3YT3ViO93DXKcJlh8zeOnSU8g6Zqy6vGXLFoSlTwdY7GnH1mvmh5ZmZo8bmDYeY667nd8+Ou3oluU/GBwaehrsdXK4BthbUMxd4zHsHSZuGo1cOFTKlx1mpo42MtFwhJkTBngidjj0ytFzAMNlUVw92shsazNDxaWM19dz5fznnK+uwpidhaWu5v8BtW/tYeLcALfb2vj54iC/ztzm4fJjZiaG0efl0l90EP588gwojp5jbT0HWrO+ZH7byH4niXJdIk0njFTXfsiRej1F+XnEhEcQIZMyf2eWy8OvXrAeHh4ImngNO9RqQkJDiSwuI1i9E/V2FZEqFVFRUSgUCm7cuInFYnGEWOrni0QRiI82CcnmzcjlckdnosTfwT/KyfL8s664OQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Android_iOS&quot;
        title=&quot;&quot;
        src=&quot;/static/63bee6568950337260b9e073466087e4/f058b/android_ios.png&quot;
        srcset=&quot;/static/63bee6568950337260b9e073466087e4/c26ae/android_ios.png 158w,
/static/63bee6568950337260b9e073466087e4/6bdcf/android_ios.png 315w,
/static/63bee6568950337260b9e073466087e4/f058b/android_ios.png 630w,
/static/63bee6568950337260b9e073466087e4/40601/android_ios.png 945w,
/static/63bee6568950337260b9e073466087e4/78612/android_ios.png 1260w,
/static/63bee6568950337260b9e073466087e4/ccf0c/android_ios.png 1428w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
(좌) 안드로이드 (우) iOS&lt;/p&gt;
&lt;p&gt;위에서 언급한 깜박임을 해결하기 위해 최종적으로 사용된 코드는 다음과 같습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;objectFit&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;contain&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;cover&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;direction &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;HORIZONTAL&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;contain&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;cover&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;direction&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; loadedStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loaded &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; objectFit &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;none&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;loaded&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;loaded &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;...&quot;&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;thumbnail&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;video
  className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;contain&quot;&lt;/span&gt;
  style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;loadedStyle&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  onLoadedData&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setLoaded&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;원인을 오랫동안 생각해 보았으나 쉽게 답이 떠오르지 않았습니다. 로드가 되었을 때는 비디오가, 되지 않있을 때는 썸네일이 나타나게 되는데 왜 스와이핑 중에는 보이지 않는 걸까? 그래서 &lt;code class=&quot;language-text&quot;&gt;setLoaded&lt;/code&gt;를 하는 시점을 찾아보니 slide가 change될 때 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt; 속성을 함께 관리하고 있다는 사실을 알게 되었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function-variable function&quot;&gt;sliderMove&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;setMoving&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존 코드를 살펴보니 &lt;code class=&quot;language-text&quot;&gt;loaded&lt;/code&gt; 값만으로 체크가 되지 않아 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt;도 함께 체크를 하고 있었습니다. (&lt;code class=&quot;language-text&quot;&gt;loaded&lt;/code&gt;는 video의 기본 속성인 &lt;code class=&quot;language-text&quot;&gt;onLoadedData&lt;/code&gt; 값과 연동이 됩니다.) 그래서 &lt;code class=&quot;language-text&quot;&gt;!loaded &amp;amp;&amp;amp; moving&lt;/code&gt; 조건일 때 이미지가 보이도록 하고 그렇지 않을 경우 비디오가 보이도록 하고 있었던 것이죠.&lt;/p&gt;
&lt;p&gt;그래서 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt; 값을 체크하지 않으면 어떻게 될까 하여 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt; 상태를 모두 없애 보았으나 딱히 해결이 되지 않았습니다. 그러던 와중 썸네일만이라도 swiper 안에 넣어 보는 것이 어떨까 하는 생각이 떠올랐습니다. 재생 이슈가 있는 것은 비디오였기 때문에 이미지는 안드로이드와 동일하게 미리 가지고 있으면 좋을 것 같았습니다.&lt;/p&gt;
&lt;p&gt;아래와 같이 swiper 내부에 이미지 코드를 넣고, video 앞의 이미지 코드는 제거하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;{!loadedForIOS &amp;amp;&amp;amp; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;{firstFrame}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;thumbnail&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 했더니 슬라이드 전환이 끝나기 전까지는 기존 영상의 썸네일이 그대로 남아있는 것을 확인할 수 있었습니다. 우선 빈(까만) 화면이 보이는 것보다는 훨씬 안정적인 느낌이 들더군요.&lt;/p&gt;
&lt;p&gt;하지만 어쩐지 안드로이드와 동일하게 처리할 수 있는 방법이 분명 있을 것 같아 계속 미련이 남아 코드를 좀더 들여다 보았습니다. 그랬더니 제가 깜박임 이슈를 처리하는 과정에서 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt; 값을 누락한 사실을 발견하게 되었습니다. 역시 추측대로 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt;이 원인이었던 것이죠. 그래서 &lt;code class=&quot;language-text&quot;&gt;loaded&lt;/code&gt; 값만으로 체크하던 이미지와 비디오 렌더링 처리에 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt; 값을 추가하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;//image&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;loadedForIOS &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; moving&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img
      src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;firstFrame&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;thumbnail&quot;&lt;/span&gt;
      className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;fe-first-frame &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;directionClass&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//video&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; loadedStyle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loaded &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;moving &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; objectFit &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;none&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;loaded&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; moving&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;두근거리는 마음으로 테스트를 했는데 정말 거짓말처럼 스와이핑 시 직전/직후의 썸네일이 나타났습니다! 심지어 화면이 깜박이던 이슈도 여전히 해결된 상태였고, 재생 모드로 스와이핑을 해도 전혀 문제 없이 아주 부드럽게 잘 동작하는 모습이었습니다.&lt;/p&gt;
&lt;h3&gt;마무리&lt;/h3&gt;
&lt;p&gt;결과적으로는 화면이 깜박거리는 현상과 스와이핑 중 썸네일이 사라지는 두 현상 모두 &lt;code class=&quot;language-text&quot;&gt;loaded&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;moving&lt;/code&gt;의 상태 값, 그리고 이미지를 로드하는 위치, &lt;code class=&quot;language-text&quot;&gt;object-fit&lt;/code&gt; 등의 조합으로 해결할 수 있는 문제였습니다.
이번 경험을 통해 문제 해결에 접근하는 시야를 좀더 넓게 가질 수 있었고, 성능 최적화라는 목표를 향해 한 걸음씩 나아가며 이슈를 해결하는 여러 가지 방법을 터득할 수 있었습니다.
그리고 이러한 고민과 노력의 과정이 결국은 사용자에게 더 나은 경험을 제공하고, 서비스의 품질을 높이는 데 많은 기여를 한다고 생각합니다. 😊&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Google I/O 2022 review (Google은 어떻게 웹 플랫폼에 투자하는가)]]></title><description><![CDATA[Google I/O 세미나가 온라인으로 개최되면서 보다 편리하게 원하는 강좌를 들을 수 있었습니다. 많은 주제가 있었지만, 그 중 가장 구미가 당기는 ‘Google…]]></description><link>https://jayoon-kong.github.io/google/</link><guid isPermaLink="false">https://jayoon-kong.github.io/google/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Fri, 13 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Google I/O 세미나가 온라인으로 개최되면서 보다 편리하게 원하는 강좌를 들을 수 있었습니다. 많은 주제가 있었지만, 그 중 가장 구미가 당기는 ‘Google은 어떻게 웹 플랫폼에 투자하는가&apos;라는 세션을 집중적으로 들어 보았습니다. 재미있어 보이기도 했고, 프론트엔드 업무와 연관이 있기도 해서였습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/837ec25b052e13102972d4a1fe449425/aedf3/webplatform.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAADJ0lEQVR42lWRW0ybBRiGK1sMStQAfw9/KVXoKGyO4hiHmTkKpdDD1pVRevAvrKIcwrq2lLZsDoMYljEM0JZCYShMootjYESzhJgUiRfe6a0mJibee+GNd148pmWJ8eLN973vmzzfxSfbX2rj27SRo086ONowcpht5jDbwuFay7P9//r+WZ5bbSK32kxupZGnGRP7qXZyD73I/vmumD++KGJt/HmWgzKyIRlrkSKyoed4ED3JeuREwednXvl8ffwEm/FithLFfBor5vftIv7+WsZfBzpk8Ce7yU4amjq4Phii2+bmwltWLJc91J+7RNMFM60XLZxr7ijkXdY+zrd2otaeQa2to6RcTzpaw/bMVR6nJ/JAeLR4BUu3hdDNEH7JT/BGEK/Hi81qw+f1Ffzw0DDmTjMjwyO4el0oVSIajQaFWMVC+Cxbd0dZmo4eA79csmMydTExEcfnk7DbHQwNjfD+7TtctjsY6A8wOjpGKBQhHB7HLw0gSf2FY2WKV1mK1vMkGWYqGDgG7qQcNDQ04nb7sNmu0GEy4/VK9Pb2Fbzffx2Xy4PH48NqtePs6cVoNGG12ChXvkZywsBeKkJmNnIM/GrlGqVlclTqSlSiBrFCi1wholCqUVdoEdWVhT2vfK9UVRSyCk0lgqqKZNTAXjLMkwf3joH7ay5EtZYa/RmqdXpO1dSh09VSpaujOj+rawr5f8p3ek7p9cjFapbjb7C7GGRv4z6y3ME3TA21UFR0knJBQBAEXnixBEGuRBReprT0FRRKVeEJcrkKebmIXChDFBSIZSIlLwkEbApG+97kw0gA2fqjbYKzCTa2PuO9wTBOp8Tmw236etzUOecJ3JjH2N5N26UuLNZOHO/YMF+7Ra3HTevNNnwDbzM9c4+5O9NEx8PIfv71iI2nC/z2y4/cXdshPpvkpx92ka6a6J48YCq5yfCgA4exiSGpi3fHGunvc9Ie60Ha6ubjj0bY2XvM5ytzzH8gIcvebmF98jypaB3pSQPphIHFiJ7l+FmyidMkY6dZudVAZrKedOx1MjEDqWgtq7F8byCTqGchfpGZsWY259z8C/c88Yuq7wX1AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;webplatform&quot;
        title=&quot;&quot;
        src=&quot;/static/837ec25b052e13102972d4a1fe449425/f058b/webplatform.png&quot;
        srcset=&quot;/static/837ec25b052e13102972d4a1fe449425/c26ae/webplatform.png 158w,
/static/837ec25b052e13102972d4a1fe449425/6bdcf/webplatform.png 315w,
/static/837ec25b052e13102972d4a1fe449425/f058b/webplatform.png 630w,
/static/837ec25b052e13102972d4a1fe449425/40601/webplatform.png 945w,
/static/837ec25b052e13102972d4a1fe449425/78612/webplatform.png 1260w,
/static/837ec25b052e13102972d4a1fe449425/aedf3/webplatform.png 2908w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;30분에 걸친 세미나였는데요, 한 가지 주제를 가지고 쭉 설명을 하는 것이 아니라 여러 사람들이 번갈아 가면서 다양한 내용을 아주 짧게(약 1-2분) 핵심만 설명하는 형태의 세미나라 지루하지도 않고 처음부터 끝까지 흥미롭게 들을 수 있었습니다. html, css, 자바스크립트 등 다양한 영역을 주제로 정하였으며, 기존 기능의 브라우저 호환성에 대해서도 다루고 있습니다. (물론 영어라서 중간중간 알아듣기 매우 힘든 부분도 많았습니다.)&lt;/p&gt;
&lt;p&gt;본 포스트에서는 제가 특별히 관심있게 들었던 몇 가지 사례를 소개해 보도록 하겠습니다.&lt;/p&gt;
&lt;h3&gt;Dialog&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3a574478b8c555426cb85590bd58ff38/06868/dialog.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACNUlEQVR42p3P7UuaURjH8fuva1ujRWu0pd2apj3SvxB7sxdj78ZoG1EWe6G1mpXPVgoNhiO1B0slNe5bKyv1aCE9uLHvSEcgjb3YBR+u63Cu84MjRXObfAxPYInMMBWZZiraYNmawbI5zeSGhcnwv1ki04yHPrB9tINk3bLRMt5Ky1grD149puXlQ1rftPHodRudli50HgOyu/dOj/M+vctIh/0ZCzE70pddO50TXWjeyXSP99D9vofnbzU8GevAYOuj3zmEaXEA8/Jg3YB3mEHvSJNh3yiysxdH3NUIfGHV0m8fwmQfqD82zpvr+r70Y5g1YbCZMM6ZMX42NwJ9I01G/KPIrttAJ5J1e5b2+U5khx7NkoxmSYdmWYfWoUNb73q0Tv2fs4xmUaZ7sdEb+zLyci/t808bXz4428cZd+LNBPCnA6ylfKykPXiSHtwJL+6EB3/CjXvfjzcTZCW9wlrKgz/twZ301nmTPpb2HGQKB0jH1Z+cFSpQLHKTP+LwHCpF4Bd3lRI/oFCCE5WLYpWTC7gS/LWk9WyO9W9usgEbjugCq7FjXKEUhwVBrXZF9fKSufgO4aCD4NdP2KOrWDcSBMMZrm+um9RqNaRKRVAWOcqFOKXKOdXzEsVynqIoIEQZIUqUxSn5SoHTiqAoziiJIwrlPEKIe6RUKkMykWQ3niJzoKIoCqqSRVUas6KoqGqWrKLW3c6qmqvvNO6bSaFQCJ/PiyuwwfdIjL3dGDuxGLH/9BvqNbMeH2/3bgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;dialog&quot;
        title=&quot;&quot;
        src=&quot;/static/3a574478b8c555426cb85590bd58ff38/f058b/dialog.png&quot;
        srcset=&quot;/static/3a574478b8c555426cb85590bd58ff38/c26ae/dialog.png 158w,
/static/3a574478b8c555426cb85590bd58ff38/6bdcf/dialog.png 315w,
/static/3a574478b8c555426cb85590bd58ff38/f058b/dialog.png 630w,
/static/3a574478b8c555426cb85590bd58ff38/40601/dialog.png 945w,
/static/3a574478b8c555426cb85590bd58ff38/78612/dialog.png 1260w,
/static/3a574478b8c555426cb85590bd58ff38/06868/dialog.png 1974w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;첫 번째로 소개할 내용은 dialog의 cross browser 지원입니다. 기존에는 사파리와 파이어폭스에서 지원하지 않았던 기능이었으나 2022년에는 모두 지원 가능하도록 변경되었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;dialog &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;demo-dialog&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Hello&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;form method&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;dialog&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
		&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cancel&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Cancel&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
		&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;confirm&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Confirm&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;form&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;dialog&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;button&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;some-button&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Click me&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dialog &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.demo-dialog&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; someButton &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.some-button&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	someButton&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;click&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		dialog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;showModal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	dialog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;close&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dialog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;returnValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hello 메시지와 cancel, confirm 버튼이 있는 간단한 dialog를 구현한 모습입니다. 아래 구글I/O 영상에서 캡쳐한 이미지는 스타일이 좀더 들어간 모습이지만 저는 그냥 간단하게 Click me라는 버튼으로 기능을 테스트해 보았습니다.&lt;/p&gt;
&lt;p&gt;먼저 버튼에 click 이벤트를 걸어 &lt;code class=&quot;language-text&quot;&gt;dialog.showModal();&lt;/code&gt; 코드를 실행해 주면 아래와 같이 팝업이 뜹니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f3137630d2e037769fc55751026a1e58/0faf1/modal.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACLUlEQVR42m3MTU8TURyF8flcxgR3QiGwwzW6URaw1ESjK6ImJQpCBQu09AX6RujQmcJMa4EUisyUtightIIgICGG2CjoAjSPmdtCm+jil3Nz8z9HavCOUOOkwTdCg8fJtdHBijFHNWuuu4e44avv1Ui2gIdLzQEPLQEvLZMebnrGaPRWNPlc2Cbc2Pzj2PxumieqdwGv6NRvSLciQS61R4K0hf20hnw0+l00+d1iQLx9Frf4a5700Br20Rbx0x4JcOtKEOl2VOZOVKYjKnNvSsalGLhVE1fMqFoV6VbMK+OqiXc2x5vpJe5GonTIlQ2L1KUk6VaTdKo6j+UUxwvf2NOO+Gn+5sy4qMsLkafGOaer5/zK/qGcPuPJzDydaoJuJUmXmkR6qGV4pGV4oC3zVM2wny6Ti21TUHfIK9u8j+8K6+onCsoOm9oBW4kvbOqHHKbL2DWD+9qS2LC2pGepPJaeVI7+uSzHi2VKs/vs6keU4vuU4p+FLXWXUnyPg9RXjhZO+GGcc5L+jiNRoCeV53l1R+pPbWDpm99gQC+gJErELHoRRS8R04qVd3IbNfmRmF5iRi8Sf7vDjFbEkfwgupc7kmOuwBVtnT6twMu5PPaYgV0x6VVM7IohWO9e1eRFfE3cWLdWp7axjjQczVLPKa8xPG3yKrjEQHCZQUsogyO8wuuqoSkDp5wTd4LVsfpyFmkklOFfK8Jo6B2j1RwLrwrD/jSDnkWcwWX+1/0LB9+TU9+WEFQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;modal&quot;
        title=&quot;&quot;
        src=&quot;/static/f3137630d2e037769fc55751026a1e58/f058b/modal.png&quot;
        srcset=&quot;/static/f3137630d2e037769fc55751026a1e58/c26ae/modal.png 158w,
/static/f3137630d2e037769fc55751026a1e58/6bdcf/modal.png 315w,
/static/f3137630d2e037769fc55751026a1e58/f058b/modal.png 630w,
/static/f3137630d2e037769fc55751026a1e58/40601/modal.png 945w,
/static/f3137630d2e037769fc55751026a1e58/78612/modal.png 1260w,
/static/f3137630d2e037769fc55751026a1e58/0faf1/modal.png 1956w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그리고 close 이벤트에 &lt;code class=&quot;language-text&quot;&gt;dialog.returnValue&lt;/code&gt; 를 출력하도록 해 보면, 버튼을 클릭했을 때 팝업이 닫히면서 각 버튼의 이름이 콘솔에 찍히는 것을 확인할 수 있습니다. 이렇게 하면 상위 dialog에만 close 이벤트 리스너를 등록하는 깔끔한 코드만으로도 각 버튼의 close callback으로 return value를 손쉽게 얻을 수 있습니다.&lt;/p&gt;
&lt;p&gt;이번에는 단지 return value를 얻는 것만으로 그치지 않고, 각 버튼을 클릭했을 때 callback function이 실행되도록 구현해 보겠습니다. 이 기능은 실제로 V 컬러링뿐만 아니라 다른 서비스에서도 매우 많이 사용되는 기능입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleCloseButton&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;returnValue&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;returnValue &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;confirm&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;successCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;cancelCallback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

dialog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;close&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;handleCloseButton&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dialog&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;returnValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;사용자가 버튼을 클릭했을 때 창이 닫히면서 버튼 종류에 따라 서로 다른 callback이 실행되도록 하였습니다. 기존에 사용 중인 코드와 어떻게 다른지 비교해 보도록 하겠습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;pop-btn-module&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;leftText &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; onLeftClicked &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt; onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleLeftClicked&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;leftText &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;취소&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt; className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;acc&quot;&lt;/span&gt; onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;handleRightClicked&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; autoFocus&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;rightText &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;확인&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;V 컬러링에서 현재 사용되고 있는 공통 dialog의 코드입니다. 어떻게 다른지 한눈에 알 수 있죠? 각 버튼마다 클릭 이벤트를 각각 등록해준 모습입니다. 사실 코드의 양이나 가독성 측면에서 눈에 띄게 더 좋아졌다고는 볼 수 없지만, dialog.returnValue를 이용하면 상위 노드에 이벤트를 한 번만 등록함으로써 이벤트 위임이 가능하게 됩니다. (이벤트 위임의 이점에 대해서는 아래 간략히 기술하였습니다.)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;참고 : 이벤트 위임의 이점&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;동적인 엘리먼트에 대한 이벤트 처리가 수월하다.
&lt;ul&gt;
&lt;li&gt;상위 엘리먼트에서만 이벤트 리스너를 관리하기 때문에 하위 엘리먼트는 자유롭게 추가 및 삭제할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;이벤트 핸들러 관리가 쉽다.
&lt;ul&gt;
&lt;li&gt;동일한 이벤트에 대해 한 곳에서 관리하기 때문에 각각의 엘리먼트를 여러 곳에 등록하여 관리하는 것보다 관리가 수월하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;메모리 사용량이 줄어든다.
&lt;ul&gt;
&lt;li&gt;동적으로 추가되는 이벤트가 없어지기 때문에 당연한 결과이다. 1000건의 각주를 등록한다고 생각해보면 고민할 필요로 없는 일이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;메모리 누수 가능성도 줄어든다.
&lt;ul&gt;
&lt;li&gt;등록 핸들러 자체가 줄어들기 때문에 메모리 누수 가능성도 줄어든다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;출처 : &lt;a href=&quot;https://ui.toast.com/weekly-pick/ko_20160826&quot;&gt;https://ui.toast.com/weekly-pick/ko_20160826&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Datetime-local&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7cf16f61617d849a58e37789ba0a0cbc/166a3/datetime.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXklEQVR42m3M3U9ScRzH8fOXtXVRmZaV1kTgHBQrnc7+g256mDetK71IcwK25maKD1AKeUTSjHxIsKGCeg5qSso5oOkQV72bh9Csvttr389vn+9+QjS5QNtUO67wC5xzLhyfXHTMOI3sinQa72POcKfBMeukY9pp3BQ4Zl20fmxjZXsFYTDq4dyD81y4X8TFh5cpairh0uPi/H5UTGlLmZFLnpZS/OQqRU1XsHqrsHpsJySvnTL3LUbjAYThRR/Xm8sxt4iYW0Ws7TYs7ZKxTc0Wql7WYH4mGizPJaTOaup8DdQNnaofbkTyVDO+OoEwHPNxs70Cm8OO5KhG7KjC3n2H2321ee5aanruUvu6nobAPepHGqkbbjij3teIzWvPfzgY9VLadQNLr4ipx0LFKwuVbhHzgIR5oLAlzH0ilb0WTG4rJreYv+nLs/bbuNZdTiA+hrCpr+GP+QmsvSeYmGBCDRBUZeRlmZH4KCNxmUDsLSOrQQKJSd6pQcYVmTFFNrpj8vIoviU/yd0kwub+d9a3NNja4GBDRdFhJwn84GQWtCN+biVhI05qe491HfZT/HeEqc0vyNPjrE1O4J3rYyz6haGpOOvbGke5LN8ODuhdjDAz5mF0sov+cIDu6Sjj4VVyR4dkD7Mc5g7J5rLkjnIImXSKzF6G3YN99LTOfkZDSydJaTtomo6maaS1ryR3NXYyGXR9B13fIpVOGt3fhKVYjPnIPHPzS8SWVRRFQVESqEohH1NJKCrq75zvE3/0p4RQKITf7+ONHOLDdITP8xHC4QiRyFnhMzn8T1/wC1Xrsz1Z85A0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;datetime&quot;
        title=&quot;&quot;
        src=&quot;/static/7cf16f61617d849a58e37789ba0a0cbc/f058b/datetime.png&quot;
        srcset=&quot;/static/7cf16f61617d849a58e37789ba0a0cbc/c26ae/datetime.png 158w,
/static/7cf16f61617d849a58e37789ba0a0cbc/6bdcf/datetime.png 315w,
/static/7cf16f61617d849a58e37789ba0a0cbc/f058b/datetime.png 630w,
/static/7cf16f61617d849a58e37789ba0a0cbc/40601/datetime.png 945w,
/static/7cf16f61617d849a58e37789ba0a0cbc/78612/datetime.png 1260w,
/static/7cf16f61617d849a58e37789ba0a0cbc/166a3/datetime.png 1980w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다음은 datetime-local입니다. html에서 기본적으로 제공하는 input 태그의 type으로 선언할 수 있습니다. 역시 파이어폭스와 사파리에서 지원 가능하게 되었기 때문에 이제 따로 캘린더를 구현할 필요 없이 편리하게 사용할 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3fe32719113908c468f1c72cd4b1c0a9/99e81/calendar.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXElEQVR42o2SSU9TURiG748wcaEMkipTByhFwgwRUUmMQ1HAaEIIxijiQlxZJaS4weiPcIEr/4OaGOKKxBJcCB1CxZZOlHvbO/T29jH3MDgkJp7kOd+3evJ97zkS/3FMCyyrIvp8Ps/S0kvm5xdYWAgKgsFFAoFnLC+/RTIMA0VWUBSFYrGIqmqiagdV19QDrSXubDbL9OQUN6/5mRgdE9Vm5PxFXgQXkUqlkpAVCgX29mSi0RjJZBJN11ELMolskdcfLCIpQwhTqTRXh4bp93gZ8nXQ42qhq9mNq6qWJzOPkP5YzTTRNA1d1zHLZUxDJ6OYvHpf4luiCJRJpzNc6u3nbH0Tve5WwWBbO56aOuYezCJVKhVs7GNPa6PrBnYUmqZTsUzAwDQ0zLJFJpNhpG+AzkYng952+lvaOOfr+JfQRFVVDFWmWCiQy+2KTFW9hFXSRI72hLaw/UyjWLWzyUWPuxVX9SnmZmb/WrlkCtHHr3nyioqmFkUM9uqh6C5baY3dnC0cpP10A11Oj5DaOe5nOLv/KDYiP1VjT1b4vCEjFzUxraoZWLpM4F2SN59yyNkEF3oG8Dka6HO37uPx4jxZw+P7M0j2NzgklUqxtZ1EzqXJpO0+wfcfSXaSOyS242RSKTY3Nhnu7sXrqKfbntDpodvlobmqhofT95BisRiHRKNRIuEIm+EI4XCESOQX4XCYeDzO6uoqfV4fTSeqaK6uFaKWOgeOY8eZunUbKRQK8Ttra2tHhI5qiC+hEOvr66ysrHB3corx634m/DeY8I9yZ2yc0ctXeP40wE+uo6pAkhvXrAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;calendar&quot;
        title=&quot;&quot;
        src=&quot;/static/3fe32719113908c468f1c72cd4b1c0a9/f058b/calendar.png&quot;
        srcset=&quot;/static/3fe32719113908c468f1c72cd4b1c0a9/c26ae/calendar.png 158w,
/static/3fe32719113908c468f1c72cd4b1c0a9/6bdcf/calendar.png 315w,
/static/3fe32719113908c468f1c72cd4b1c0a9/f058b/calendar.png 630w,
/static/3fe32719113908c468f1c72cd4b1c0a9/40601/calendar.png 945w,
/static/3fe32719113908c468f1c72cd4b1c0a9/78612/calendar.png 1260w,
/static/3fe32719113908c468f1c72cd4b1c0a9/99e81/calendar.png 1946w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 간단한 코드로 날짜와 시간을 손쉽게 선택할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Bfcache&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/94e9cfebc5a7a86cdc5a435107c10443/e548f/bfcache.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEUlEQVR42qXQy08TcRDA8f3XTLx5IGK8mGgAkW63tICgJ09eTEx8RmjR+EITPHgRQYF2kXpoadm+ULpKlbTsg9Y+txhwq/g1aRvqQfHgJJ/M5PebTDIjBDIy10M3GF+ZwBv34UtOcicy3qy9MR8TipcJxXcob2ySW5HbxPUEgm/lLkcuHaXrSjfdN0/SdbWb49dOcOxyF2emexh860EMuHDKf+dactO7cJa5D68QHsenOPXgNI5nEn2P+ul92M+5aZH+pwOIzyVGlkY5vzx2qLHgRVwBN4sbfoSp1BMGZkU8c8N4FobxzA/jfj3E0OIIrhl3M48GL/x7oNweeC9+n57FPiR5EFGWcMguxDbnUis7AhKi34nDL+LwOxnwSzj8EmKgRQoM0jPf11p5q/iZUDaCsp1qHjWprxLTo0RyHUo2TMSIEzPXSOgxkkYUxej8R7eihLJh8lYe4ZPVoGhq7Bs5SlqOTBkKJvCTg1gv7bFv6tg5le2CxWYJ6kX+GEIybxFPhFCVZRLZOC/XP7KWrrHzdQ/b3mNnd5cXGRU1HCCSnEHeWGX23SaKqvP9h80328ZutDQaDYTdukWlXqO8U8aqWRQrOrVamWq12lahWDLQq3nMyhcKZZNCWSNfMX7r6RA2MhnSaZWUmiW7pWHoJpqmo2lam958M3UDo8k80OnpEBRFYTkY5E04xfu0iqr+n18RW8EH+h5VKgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;bfcache&quot;
        title=&quot;&quot;
        src=&quot;/static/94e9cfebc5a7a86cdc5a435107c10443/f058b/bfcache.png&quot;
        srcset=&quot;/static/94e9cfebc5a7a86cdc5a435107c10443/c26ae/bfcache.png 158w,
/static/94e9cfebc5a7a86cdc5a435107c10443/6bdcf/bfcache.png 315w,
/static/94e9cfebc5a7a86cdc5a435107c10443/f058b/bfcache.png 630w,
/static/94e9cfebc5a7a86cdc5a435107c10443/40601/bfcache.png 945w,
/static/94e9cfebc5a7a86cdc5a435107c10443/e548f/bfcache.png 975w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;페이지 로드 성능 개선을 위해, 브라우저에서 페이지 이동 시 잠시 동안 캐시를 보유하고 있는 기능이 엣지와 크롬에도 추가되었습니다. 페이지가 이동하는 동안, 이전 페이지가 잠시 유지되면서 사용자들에게 좀더 빠른 로딩을 제공하는 기능입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ef5788a179ada1577ea9e2b960d97965/914c7/bacache1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.16455696202532%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeklEQVR42n2T204TURSG5z0EbDvnmbYz7ZTilNCWUyQhYABBQzDhwvgGXnllTPQJPISYeMTDBde8gTcmJkQF5FTSUkUq1kqhgUI/M4MBE407+bL2zfrXWv9eWzDsCAknSWvSJRKxkRWd5uYAIVFBUjVCsoqonEYPWdVRNANVN4nYDmErhhVLYFlxhEdTD3j65DHT0y94+eo1z55Pc/fefbq7z2OGbRKtLnbcK5jCsh1i8eSxoKpjmBEyXb20Zzrp6xugo70TYbdepXF0SP2wwZ9nYmIS225F0yMoqoGqmYTDNu2pLPFEG1E7jiirBEWZoKT4E0iKhpDLl1gvlFjfKPFp7TNr+S1yhW1GR8fJZntw3TSSqhMQZUKqgmJq2LGEL2iELSKWgxVrRQ9bvrBQ229Q24dqrcFW5YDK3hHFUpXhoTFMw0bXoif+SZqB43aTyvSTyvbjpvsIR50Tb33B7Z0DfuzWqewesl+H+iFUqzXGx6+QcFzOtXWgamECooQecbgweYPhqzcZvXaLgYnrSKrhj+0V9RDmVrdZyJdZLlYo79T5uQflSo2xsctkMz1kMj3IXpKk+MmGlcSMuZjxFGbsHNFEGsW0CcmK36WQL3r+bZEvbpHLb7L5bYdyZY+xS+Ok093EnSQtQRFR1n53oR2jaKd3SfUL+iOvr+VYz+VYyRVYWi1Q3Czz5et3BgeH/DVJtqV8sUBIIigqfvwb+QTh9swid2YWeTu/QWHDe+ESK2t5RoYvouveqljInumy6ic3B0K0/AdhanaBh7MLvHm3xMf5ZT7MrzL3foGRkVFSqQ66unpJJl2iVsz/PWeaztLUEqSpJfBPfgENI9BRV2aY0wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;bfcache1&quot;
        title=&quot;&quot;
        src=&quot;/static/ef5788a179ada1577ea9e2b960d97965/f058b/bacache1.png&quot;
        srcset=&quot;/static/ef5788a179ada1577ea9e2b960d97965/c26ae/bacache1.png 158w,
/static/ef5788a179ada1577ea9e2b960d97965/6bdcf/bacache1.png 315w,
/static/ef5788a179ada1577ea9e2b960d97965/f058b/bacache1.png 630w,
/static/ef5788a179ada1577ea9e2b960d97965/40601/bacache1.png 945w,
/static/ef5788a179ada1577ea9e2b960d97965/914c7/bacache1.png 978w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 Application의 devtool에서 캐시 저장 여부를 확인할 수도 있습니다.&lt;/p&gt;
&lt;h3&gt;Lazy Loading&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7f855422d64f0f730c716a5981bb8a3a/166a3/lazyloading.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXklEQVR42p2MWU8TARRG54+Z+KAGBCFCQOy005Yn1r8g+qCGB+MDqLRTIppojCGURXZk69jSUsQpEhZpp7aUrdOFIoGq5BimgIn65E1O7s13vlxB3VRp87YjL3TiXHAhfyzsDr8TZ9Bl3I55GUdALrigi445p5EbLiDjnHfR5nvCxl4Ywa32cqnlMiWt5RQ/LOXa3WJKHpVR1naTqy1FXG+9QYVcRdGDUoNTf+VOEUX3S4yeNGTHOlhLpbsaT1hBGFoZpsJRhbXLzu1nZsrvVSDKFqyva7nVbqLmqYjlhQ3ppR2xU0KUJcOJLomqxzXUjTXSMNqM9M6OT5tDGFodplKuxtpVi6XLVuC5DZPDYjwxOS1YX9VSP95Ew1QzDZPN1L9vKjDRRN1oIw1jzUiDZw/7lgcof1OJxW3F1GPB5JYw9UiIPb+3ud+GuU9CdJ95txWx14q5r4DUb6eiuwol/AFhOxNnJjyDkpjHF58nEFOYiysoUQVPRMGjKXjDM8x+9eHdDDIX8+GPefDGPMyGPYVORGFqY5rkQRIhlvtBLLELW3H2Y2HWddhJAD+5mNDeESeJBCexFXZ2smhJOEjyzxGCiQQjgQmCswMMq714F32MBj6zqafJ54/IHR7Su/KJhdkhJv1v6Q9N072wjHcpTP77MUfHRxfk83mEbFonk8uQ+pYlk0mT21JJpxPoqSQpPYWu62TTe+zup9CzWdKn/cw2qcyO4f5EWF1dY0kNsRhaZ+2LRkTT0CJRtNN9RkSLEo2c5udZ9K/OOYLf72d8bIyRST/+YIilkIqq/j+/AIder/AVSpQ1AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;lazyloading&quot;
        title=&quot;&quot;
        src=&quot;/static/7f855422d64f0f730c716a5981bb8a3a/f058b/lazyloading.png&quot;
        srcset=&quot;/static/7f855422d64f0f730c716a5981bb8a3a/c26ae/lazyloading.png 158w,
/static/7f855422d64f0f730c716a5981bb8a3a/6bdcf/lazyloading.png 315w,
/static/7f855422d64f0f730c716a5981bb8a3a/f058b/lazyloading.png 630w,
/static/7f855422d64f0f730c716a5981bb8a3a/40601/lazyloading.png 945w,
/static/7f855422d64f0f730c716a5981bb8a3a/78612/lazyloading.png 1260w,
/static/7f855422d64f0f730c716a5981bb8a3a/166a3/lazyloading.png 1980w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;img 태그에 기본적으로 제공되던 loading의 lazy 기능이 사파리에서도 사용 가능하게 되었습니다. 브라우저 호환성을 위해 기본 속성을 사용하지 못하고 외부 라이브러리를 이용하여 구현하였던 많은 개발자들에게는 희소식이 아닐 수 없습니다. 아래와 같이 간단하게 loading=’lazy’ 한 줄만 넣어 줘도 lazy loading이 가능합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;...&apos;&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;...&apos;&lt;/span&gt; loading&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lazy&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;iframe src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;...&apos;&lt;/span&gt; loading&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lazy&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;iframe&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;lazy loading에 대해 더 알고 싶으신 분들은 아래 사이트를 참고하시기 바랍니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://web.dev/i18n/ko/browser-level-image-lazy-loading/&quot;&gt;https://web.dev/i18n/ko/browser-level-image-lazy-loading/&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Priority hint&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b98f0780fdb7ac6145cac0de8ac0ef36/c7bb6/priorityhints.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACSElEQVR42pXO309SYRzH8fOfdC8225qgW23mVOa/1EVr1epCWxfd1NbauiitpokeEH+BW2kQLuCIKBiHM0hAOcj5BYeDbu8GWLnZTc/22ud5vp9nzx7BqsQpf32EkZymmerRE1Pd1OJTWNI0dqrHTE51Z52+K34hMY32/THmyQFCLT3D7N1rhJ/dQHzSz8bT68zc6yP2YoCt5wPMPXDx6aGLD/ddlOdu0lpxYwUGaSxfEhzCWurDUNYQtMN5fswMkfs4ztbLERJv7rDzeoRvr0bIzI6SfjvK/rvR7lwNjOOEvTQ3vNihS8KTNFdvYxQ2EazcPMcLwxyLXk6WxqgsjlH197LkG6O96YXPXvji7e7t0ASt0EQ3f2uFJ7HXbmF2HtSz79F9LpqdbwfcWMserICHxrKHRtCD4fegd4hudHEQ3e/unjtzI9BLMzCMvtiPrqwjtDUFK+fD+rmOXVyjXfDTKopYioghi5h5EVtexCwEaR6t4xSDtIsidlHEvOjNvB8j58MxKwgF65y9I5XzUpFKQSalglwC+4w/K1Y9xyiVaBQOUY4t9qpQqfLPJRxWdaTdfcrRCInMNtsHZeLSKbWaRdtp0Gw08B0kKUYjRGMLhNIxIuk62YzG2ZmN07JxnJ624yAY9VNM00BrWJi6ianVMHSV01MVVa2h1lTqtWNUQ0fVdOr1Gpamommd/iohk8mSSu0SlzLsZ2Xy+TyynO/mXwp5We656K/eyaMoCkI0GmV1JchKOEJkR2JXSpJM/j9JkojH4/wC1vXdvFHe2eMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;priority&quot;
        title=&quot;&quot;
        src=&quot;/static/b98f0780fdb7ac6145cac0de8ac0ef36/f058b/priorityhints.png&quot;
        srcset=&quot;/static/b98f0780fdb7ac6145cac0de8ac0ef36/c26ae/priorityhints.png 158w,
/static/b98f0780fdb7ac6145cac0de8ac0ef36/6bdcf/priorityhints.png 315w,
/static/b98f0780fdb7ac6145cac0de8ac0ef36/f058b/priorityhints.png 630w,
/static/b98f0780fdb7ac6145cac0de8ac0ef36/40601/priorityhints.png 945w,
/static/b98f0780fdb7ac6145cac0de8ac0ef36/78612/priorityhints.png 1260w,
/static/b98f0780fdb7ac6145cac0de8ac0ef36/c7bb6/priorityhints.png 1986w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이미지 또는 아이프레임의 노출 우선 순위를 결정하는 속성입니다. 여러 개의 이미지나 스크립트, 아이프레임 등을 불러올 때 상대적으로 중요하거나 먼저 보여주고 싶은 태그에 우선 순위를 부여하여 미리 로드되도록 할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img fetchpriority&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;high&apos;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;important.webp&apos;&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;...&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img fetchpriority&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;low&apos;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;less-important.webp&apos;&lt;/span&gt; alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;...&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;script fetchpriority&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;high&apos;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;important.js&apos;&lt;/span&gt; async&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;script fetchpriority&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;low&apos;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;less-important.js&apos;&lt;/span&gt; async&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;iframe fetchpriority&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;high&apos;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/important&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;iframe&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;iframe fetchpriority&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;low&apos;&lt;/span&gt; src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/less-important&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;iframe&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;priority&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;low&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;fetchpriority의 속성은 다음과 같습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;high: 다른 이미지 또는 아이프레임에 비해 높은 우선 순위로 fetch합니다.&lt;/li&gt;
&lt;li&gt;low: 다른 이미지 또는 아이프레임에 비해 낮은 우선 순위로 fetch합니다.&lt;/li&gt;
&lt;li&gt;auto: 디폴트 모드이며, 유저에게 가장 베스트라고 판단되는 순서로 브라우저가 판단하여 fetch합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/90608a73bda3064a7f172c77e51ee1c5/813c1/priority1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGklEQVR42lWRC2/iOhCF8///2Kr3UlroZYEtIFUl5E38iB+JnXwr3O6VdqSjMx7NsWeOsyXO/AljLPO8sCz8FTFGvPd/1ZbvJuccIcb/61nfNdTVDSXvTKMlBk8IHmMNUkqUUomFEGitufcSLTXBOaJzjMakPDiP0YZM9Q0xhgSYEx5vF3WL6HvmZSGEkLDMkV5ZPj+uBB/pxYhUgb63CDHSNppMy3sa9bHqMBjitwXOSLRSKZ+mCe++V55n+rpO/dpFhLJJN4XIEiYyo+7EMOKdZfSOyXvmGLCDoGtbBq3RSieRsw4zGLqyTH1uGBjtQzMSp4nJWLJBC5TskKJD9C1hcszRJz+FkEgh6LqOpmkZhiF5apRmsjZdKLsOqzTBu+Rl1lc1bVnTVS1GDUQ/4QbPvZPMk2SOjiVa5mhhdgxGMRhJjFNCCH840D8+RVQV1kWK1lE1A3necRceUZcMsqUVnmulKWvBreiR6jHVJ8aMFI2laDRF2dO0X9NnH6cTbdtyKyryPKcqS7ruTn39oLx9Ujd38rzklhfUVZN8LfMTdd1Slg3X642yKJMlbVORHTYb3g8HDrsdh91PTsdfXN5PnH++cT5uOez/4/jAYcf5dORy2nN53/D+68hxv+O436f8cj5xOR/JXlfPbNdrNus1q6enxNv1yxe//st2s+J1/cR69YO3zeq79sx285LwvPqH15dn3rZf59/lWEFS78GKYAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;priority1&quot;
        title=&quot;&quot;
        src=&quot;/static/90608a73bda3064a7f172c77e51ee1c5/f058b/priority1.png&quot;
        srcset=&quot;/static/90608a73bda3064a7f172c77e51ee1c5/c26ae/priority1.png 158w,
/static/90608a73bda3064a7f172c77e51ee1c5/6bdcf/priority1.png 315w,
/static/90608a73bda3064a7f172c77e51ee1c5/f058b/priority1.png 630w,
/static/90608a73bda3064a7f172c77e51ee1c5/40601/priority1.png 945w,
/static/90608a73bda3064a7f172c77e51ee1c5/78612/priority1.png 1260w,
/static/90608a73bda3064a7f172c77e51ee1c5/813c1/priority1.png 2004w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;대용량 이미지일 경우 우선 순위를 높였을 때 보이는 시간의 차이가 나타납니다. 실제로 여러 이미지를 사용하는 경우 상당한 성능 개선 효과를 가져올 수 있습니다. script의 경우 async를 추가해 주면 우선 순위를 더욱 높일 수 있습니다.&lt;/p&gt;
&lt;p&gt;아쉽게도 아직은 익스플로러 엣지와 크롬에서만 지원하는 기능입니다.&lt;/p&gt;
&lt;h3&gt;Privacy and Security&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/2adcb/privacy.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAUlEQVR42q2PS0/CUBCF+680vZc2wfIXjfTiK8babsStImpdaClEjXEBwe7QPTGIUclnLq0RqI+FXXw5MyczJzPGuLnC87GD1nHT+TfGZ1iqBQQWfmERIQsv6wuLYy5wlJGrG1/en4H6zJcTh9dTh/fQYRI6vJ2lqnvtT8JK5lWm/a8vjxplksAmciWd9RKdmqTrWbRrkpaSU72sSnqexfmqoO/bPB2VGR5+j/FQt0iCEnc7kliZXKyZ3GwJ2koQK8HVhiCqmlxvCiLX5HZb8nhgM9i3GNTzGN1dQc8T9PcEiS9JAsm9P1vPq57TOz9hxO4yKUu0MmbrRU9rrLIdlecD8xt3VC5LzrIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;privacy&quot;
        title=&quot;&quot;
        src=&quot;/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/f058b/privacy.png&quot;
        srcset=&quot;/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/c26ae/privacy.png 158w,
/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/6bdcf/privacy.png 315w,
/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/f058b/privacy.png 630w,
/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/40601/privacy.png 945w,
/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/78612/privacy.png 1260w,
/static/4e9cac3db8b0c7ccfac7e3e2c1299d26/2adcb/privacy.png 1984w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;보안 정책에 대한 발표도 있었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3e8f70e8fbce8a3589965e2683493246/d30ee/privacy_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABe0lEQVR42nWQUW7UMBiEcw6OxW2QOAQHAQRP0AfEUytUgaDwhARtk6Zkk2yckMSb2I79odi7USLaXxp5bM9v/zORaDWvzssjCt5etrz81JEUI3NZ53BHnMo9cjZX1PSGs88F7y93Hh++d5xdSTKhN8L1Q8v5mh/XiE3NFzZQa5is3Uwzw1rLNE1+PfH1R9FMzGS9tboW3MYxaXpPWZY4Z/+bUClFlmWk6R27LKPv+63lsLGc2rp+oChrjLGLcBxHtNZL0zAM5LlACBHMWLud0BvVe2z7DfQOdIabeqwKDVJK/+gcSehzYNIlnrWTCGc8GX+/QLx5Qnv+lO7rM4Y/H5HXr3HrhN0xX9cjL56j73+G7XpCrRTaOA71Nd3NOw7FFTL/wdDlHOo7lDY+t9myUiNKabQZkb++MOQ52lrUOC6aaM5BiIqqbhGtQjQS0fRUokHUf6mqiqARnp8gWknVNFT7/UYTJUlCQEwS35DEtyRxHPYeycOYdQ/c/wPl8f5oJFbfZAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;privacy1&quot;
        title=&quot;&quot;
        src=&quot;/static/3e8f70e8fbce8a3589965e2683493246/f058b/privacy_1.png&quot;
        srcset=&quot;/static/3e8f70e8fbce8a3589965e2683493246/c26ae/privacy_1.png 158w,
/static/3e8f70e8fbce8a3589965e2683493246/6bdcf/privacy_1.png 315w,
/static/3e8f70e8fbce8a3589965e2683493246/f058b/privacy_1.png 630w,
/static/3e8f70e8fbce8a3589965e2683493246/40601/privacy_1.png 945w,
/static/3e8f70e8fbce8a3589965e2683493246/d30ee/privacy_1.png 980w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이번 발표에서는 타사의 쿠키 및 사이트 간 추적을 단계적으로 중단하여 사용자 개인 정보를 개선하고자 하는 노력에 대해 언급했습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/260271030f3786d9dbdbba240f1ec6a8/72aae/privacy_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsUlEQVR42nWRTYvTUBSG87/cuRAXfvwKwQEXKoK4duPCPzAq1CkuRFBG0MGKoI3V2ulMdCNN0jqTNEk7004nmbS1qb25j6Q1mtTO4T4cLrzvez+OAiClZLknxH/2q0oiWay8RlkVtlxRLJhKwTQWRFIgZJz3nBaYCmsDh4uVJ1xQi9z4tkXRrFMwtnls1tnQa9xrqGh+Z66N56/JBGZPSgM/Htlc2nnG5fpTrjfe8tDaZd3SWLc1HuztcvdHhbrv/fXkAtP/SknKjYZ85YTvjNEIqcpjaqLHF9FnWx5REQM6k2Huv1NygekQ7ElIeXbIZ+lTizysN3ewX1yl/fIa7vMraDsF9qJx5smZwP8mBzjRkMqsR5UQLWziF89zXDjLYOMc4aMztEq3sSbjlUNUhBCk/JrNQMRYY5/y9IBPyQ2HLfqbawSvbuK/vsVwc42Gep/9n6O5NvFkM5QgCEjxg4BRGNI4dNnq6rzrtSgdNHnfrKI2ynzQVVS9TMnSaPa7jE5Csv4ExfM8lnFdl7bTpu04cyyvg9Xpst9ZdNtdaFZ5FcMwWIVpmv9I9oae66f5fgO0/C/x/PVRAAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;privacy2&quot;
        title=&quot;&quot;
        src=&quot;/static/260271030f3786d9dbdbba240f1ec6a8/f058b/privacy_2.png&quot;
        srcset=&quot;/static/260271030f3786d9dbdbba240f1ec6a8/c26ae/privacy_2.png 158w,
/static/260271030f3786d9dbdbba240f1ec6a8/6bdcf/privacy_2.png 315w,
/static/260271030f3786d9dbdbba240f1ec6a8/f058b/privacy_2.png 630w,
/static/260271030f3786d9dbdbba240f1ec6a8/40601/privacy_2.png 945w,
/static/260271030f3786d9dbdbba240f1ec6a8/72aae/privacy_2.png 964w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 그림과 같이 사이트 내부에 로그인 상태를 관리하는 채팅 앱이 내장되어 있다고 가정해 보겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b449b1497fb3df2a4880b3a4623c1328/cd13d/privacy_3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABv0lEQVR42o2R3W/SUBjG+xd66R+0C681Zmq81SzddrOLRa0kRrKJG11q20koAwSKrDj6AYMB/fyZUz5kkUXf5Glyznue33nOWynLIBMfIM1SZknMbTgjmI7x726Zx1HeS1K4i2A0zQjGMcNJQhgvfCu/KGkFElVzHR4dPmPn/B173Sq7VypvLDXvqY05j5802VUmHJmwr8IHMxE40iynLoGZAC4WrdGAl7ZGwbewdZmr6jHH9fO8V7EjXilTyrpLt6RQLxUp6qM/CdfAjcjdsU8h8yjPWsQnzwmNPU6bpbz3ox+hNqBZ/Ul68pTZ2VtOtZsN4PLJYrECetMJX4IuZ8Me77XPXFyb1AIn7137CV+thG+NGPngI0qxTrkeLme/YAitgavYmZh+NKfXrNBz+myWuLZ/49KwKkQp69ltMqT7jkXS0O0QFF8zGgZomoZtd3EHAxzHYfCrj//pBbHXuedZ/+UoivhLccI8ivMDnU6HA1nm0rwkDEPSNCMMt3iWkjzPY7tcfN/HsmrYlsF3w8DzfVzX5WGPh9Rut9mmVquFbdvous7RoUxBUfK0Yv8hj5Bkmib/0oWqYhgG/3P2N0n3MVhCGUHEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;privacy3&quot;
        title=&quot;&quot;
        src=&quot;/static/b449b1497fb3df2a4880b3a4623c1328/f058b/privacy_3.png&quot;
        srcset=&quot;/static/b449b1497fb3df2a4880b3a4623c1328/c26ae/privacy_3.png 158w,
/static/b449b1497fb3df2a4880b3a4623c1328/6bdcf/privacy_3.png 315w,
/static/b449b1497fb3df2a4880b3a4623c1328/f058b/privacy_3.png 630w,
/static/b449b1497fb3df2a4880b3a4623c1328/40601/privacy_3.png 945w,
/static/b449b1497fb3df2a4880b3a4623c1328/78612/privacy_3.png 1260w,
/static/b449b1497fb3df2a4880b3a4623c1328/cd13d/privacy_3.png 1958w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;사이트가 포함된 위치에 관계없이 고유한 단일 쿠키 세트를 갖도록 허용함으로써, 타사의 쿠키는 사라지게 됩니다. 이렇게 하면 개인 정보 보호에는 좋지만, 채팅에 자체 쿠키가 없으면 로그인 여부를 기억할 수 없어 매번 로그아웃이 되거나 다른 플랫폼 또는 사이트에서 도움을 받아야 할 경우 큰 문제가 될 수 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/71ec014736d271bfcf693519407dd6f7/166a3/privacy_4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABG0lEQVR42q2S63KCMBSE8xyVhIQERG4CarmKIIzv/0brJIDtOG1/WH98s7nu2TkJsbkEFwqrvgSXsBclvx16LvBXwUcooUD+leyHYiYhZcIsarUoB7Mds6l1nWvVUD1nYrnjGL5MJYgjPdRNhzDao6paNO0FWX4yJml2xLkbEIQJyrJB0/b4rDqkeYFT0aKse4TJAZStpmo2vI439MOE9tzj0o8Yp5spsk8PGK4TiqJGVXc4ZjGGk48691GmPs65hzZXEEIaM5NQOC6iOEWcZCblLohNIr2mXN+MNVs/gqsUdopj5wqEnkDgCURbAcdZDZdHefSH8Ucf197RpV8aZkvQJyxbgulvs0DmgzPfL78K2Vg23gn52FC8kztk2TbyrlQMoAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;privacy4&quot;
        title=&quot;&quot;
        src=&quot;/static/71ec014736d271bfcf693519407dd6f7/f058b/privacy_4.png&quot;
        srcset=&quot;/static/71ec014736d271bfcf693519407dd6f7/c26ae/privacy_4.png 158w,
/static/71ec014736d271bfcf693519407dd6f7/6bdcf/privacy_4.png 315w,
/static/71ec014736d271bfcf693519407dd6f7/f058b/privacy_4.png 630w,
/static/71ec014736d271bfcf693519407dd6f7/40601/privacy_4.png 945w,
/static/71ec014736d271bfcf693519407dd6f7/78612/privacy_4.png 1260w,
/static/71ec014736d271bfcf693519407dd6f7/166a3/privacy_4.png 1980w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;쿠키의 유용한 부분은 보존하고 사이트 간 추적 부분은 제거하는 방법이 있다면 어떨까요?&lt;/p&gt;
&lt;p&gt;이를 위해, 현재 독립적인 파티션 상태 또는 칩을 가진 쿠키를 실험하고 있습니다.&lt;/p&gt;
&lt;p&gt;쿠키에 이렇게 Partitioned 속성을 넣으면, 쿠키는 차단되지 않지만 공유되지도 않습니다. 채팅 앱이 A 사이트에 임베드될 때 쿠키가 설정되어 있으면, 사이트가 A에 임베드된 경우에만 쿠키를 사용할 수 있습니다. 채팅 앱이 B 사이트에 임베드되면 완전히 다른 쿠키가 생성되므로, 여러 사이트에서 사용자를 추적하는 데 사용할 수 없습니다. 그러면서도 세션은 계속 유지할 수 있다는 장점이 있습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/092cae1ff2f5941f18ae4906f800c222/cc418/privacy_5.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfElEQVR42o2R0W7TMBSG/e7c8xCIu0psQuMCIcpaqWOgNiwZ26KyLU3Sji1L0kphbWI7+VCShYa0SBzpk+Vzzv/72BZFUVBGd21HnSr+pnjuLbYapRRin5nOc1IlWStJqlVlkBcgNaxlzb8GEe1EaVTGwdTgxZd3vJ9f0Ls2yiM4+Jzw8jCkf55yNElJNltd20Ns7wX5c2G0uuPtyiYxXnF+cUSG4tTWfPoak56+xpucsNrUou4TieaEksZwul7yMfhBf9DD8Ew0ObMYjsePfHjTw7IcnmRjuJ2ymrC9aY+/ySSXl9958s7QmSS8vuHhMeTGD1iYxxRpUn9PRyt2f7Q2nC8WjIZD4uAn8UNAdGUjlWI4GBDdz5tX2gkhpaRNJrOqYE9tjPEJSfILpXWVi+IV/f6I4P4OnRd0tSUiiiK6LJdLnNtbzowJYRj+yQdBwLfJGM91q559WjGbzejiOA6u6+H5/k7N931c16169mmFZVnswzTNiv/NN/wGAO4+knt7omgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;privacy5&quot;
        title=&quot;&quot;
        src=&quot;/static/092cae1ff2f5941f18ae4906f800c222/f058b/privacy_5.png&quot;
        srcset=&quot;/static/092cae1ff2f5941f18ae4906f800c222/c26ae/privacy_5.png 158w,
/static/092cae1ff2f5941f18ae4906f800c222/6bdcf/privacy_5.png 315w,
/static/092cae1ff2f5941f18ae4906f800c222/f058b/privacy_5.png 630w,
/static/092cae1ff2f5941f18ae4906f800c222/40601/privacy_5.png 945w,
/static/092cae1ff2f5941f18ae4906f800c222/78612/privacy_5.png 1260w,
/static/092cae1ff2f5941f18ae4906f800c222/cc418/privacy_5.png 1992w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 기능은 아직 실험 중이며 일부 크롬에서만 제공하고 있습니다.&lt;/p&gt;
&lt;h3&gt;WebAuthn&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ac1cbffa0c4e0c213e1adba8aba0af3a/36909/webauthn.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaUlEQVR42nXNWU8TURjG8fk2Jt5Bi8omINulfgypXHjnndEiGo0obtGIQAdaIXEjyNJtymYJQgttp1MKuFGEC5W2lE6XIfVvmELARE/yy5P3PU/OEcZedTLefRGHpRVPfytOyyXGe0y4RJOeTtGE02LifVfLf5gYft6CXbzMqHgFIRm1MXrrBIPXSxi5XYLrfimjd0qYfWrEda8Uz4NSlrrLyLurDlTqqR3MOVclOVcVeVc5CUczQnptgLlnZUiPa5AeVTPxpBr3w2ocnVXMd9cw13UWf28NSXsDKWejbsfRSMLeoMtIjWSkJnJSPXHXeYREdIAV6xkCfedYHaxDsdWi2OqIvKzTM2wt2n/Ub6khYqvTPwqItcTe1aNKTWSkZrL6gxcQkhGRFfEksqWMQLcBRTQiWwyELUbkXgMRsZjLfUbCFgMr/UZ+DJ1GtZez564g6ygn66wg7zxFfLweQd2aI/HxKnH/TRKL7ez4zCR8ZuILZrbni5ILZpK+G8T3+dtRl9pILe7vDrWx47vGtr8DIZ0vsL2bA01DS2uk90DNw14BChRPMgfxlApaAU3VSGmQ0fRR7xz6DQgz37Z4PTPNlzErE1NWxIUoQxM/+fo5TTabopDN4Pi0wdiUgzXHG5zTNnrmotinfxFb30XTVFRVJZPZl0YIrYWZCH5gMuRlcnmWSdlLeDXC+rd1YhsxNr9vElgN6Z2pkBdPxMt02IuyGtU7GxsxYrEjghJWWIlEUWQFJagQkRXkUIhgMEAgUCSHZH2vC/27c0i429FBb88LegeGeTsi4fG4cbslJOmIW+f+y/H74/4AbMO1wKZVF8sAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;webauthn&quot;
        title=&quot;&quot;
        src=&quot;/static/ac1cbffa0c4e0c213e1adba8aba0af3a/f058b/webauthn.png&quot;
        srcset=&quot;/static/ac1cbffa0c4e0c213e1adba8aba0af3a/c26ae/webauthn.png 158w,
/static/ac1cbffa0c4e0c213e1adba8aba0af3a/6bdcf/webauthn.png 315w,
/static/ac1cbffa0c4e0c213e1adba8aba0af3a/f058b/webauthn.png 630w,
/static/ac1cbffa0c4e0c213e1adba8aba0af3a/40601/webauthn.png 945w,
/static/ac1cbffa0c4e0c213e1adba8aba0af3a/78612/webauthn.png 1260w,
/static/ac1cbffa0c4e0c213e1adba8aba0af3a/36909/webauthn.png 2772w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;기존의 패스워드 방식의 인증 정책은 많은 보안 문제를 야기해 왔습니다. WebAuthn은 브라우저 및 사이트가 FIDO 표준에 기반한 외부 인증자 키를 사용할 수 있게 하는 웹 API를 정의합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8c5879172014860c2981e6987d7c356a/cf0be/webauthn_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzElEQVR42j2STW8bVRSG5yfAoiqrClUiEu2CtAsqBUQaSmERoQJBfEhtkhJRuoFKZcGmP4J1i2VbCaEtyy6SFCmJXRcS2/GkiZ3EX5MWFzsTe8bzPfaMMw+aKeVIr+65r+557pHOETRNI7ueJZ1Kk0qlSKfTrK6m6HQ69Pt9dN3A83x8f4DX9xgMBrRaMvH4HMnkbyQS8yST8yQT8ygdBaFarTJ5ZYrLlycjTU1O89mnExE4OArotFUMw8a2e2iaAQRkswWGhs5x9uwFhofHOHNmjNOn3qVU3EOolCt89eXXXPkPNj11lfHxj1leXiEM13F5GY7tMAgCNjaecO7tj/jw4hdcfH+CDy58zsjIOLu7FQRZlon9EmN29lfu3b3H7/fvk0gkkSQJyzKpSVVMx8SwDQzLiMCFjS2G3xrl/Oglzr93ibHRT3hnZJy93SpCEAQvvg9g/8BC9/v/d7QvP+N6/Cd+SN7imzs3mfj5W3aaZXa2yrzy2hscP3maY6+/yasnhjh+4hR7OxUE3/cjWFmW2KhtYqmN8Irvedi2jWIodLQOsiIjqzKDI5+dUpnp6e+5/t2PzMzc4Nq1m8xcvYFUf4owODqKujF6Dkq3jedaETDs3HUcNEXBMU0818Xv9fD6PWzbiSZumiaaqmKZVrQJoS+4roujKziWFa1IaIZer9dD1zVkuYWqKlFuGnokXQtPk37f459OCPMwDBNN018MZX97naeSxGG7zeHhIQcHB4T+80aDZ3UJudmkI8uRWs0mjcZz2u02qtql/neLbrcb1YW+UK/XWc+LFIslarUatWqNSqUS5cXSNovpRRZSCyw+WuLB8gPELZFSscSjzJ8UCiJPNkVEUWRtbZ3idhEhn8+TXfuLXC4XPSgUCpE2xU1y+RxLqT9YWn3I4spDFlaWyOZzPM485vbtO8QTCWbn5ojH48RiMTKZDP8CFWnY3pyZnLsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;webauthn1&quot;
        title=&quot;&quot;
        src=&quot;/static/8c5879172014860c2981e6987d7c356a/f058b/webauthn_1.png&quot;
        srcset=&quot;/static/8c5879172014860c2981e6987d7c356a/c26ae/webauthn_1.png 158w,
/static/8c5879172014860c2981e6987d7c356a/6bdcf/webauthn_1.png 315w,
/static/8c5879172014860c2981e6987d7c356a/f058b/webauthn_1.png 630w,
/static/8c5879172014860c2981e6987d7c356a/40601/webauthn_1.png 945w,
/static/8c5879172014860c2981e6987d7c356a/78612/webauthn_1.png 1260w,
/static/8c5879172014860c2981e6987d7c356a/cf0be/webauthn_1.png 1994w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;많은 브라우저에서 지원하고 있으며, 위와 같은 생체인증이 널리 사용되고 있습니다.&lt;/p&gt;
&lt;h3&gt;Media Session API&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/ecec9c08c0f8c9b9a82c8728ac2fc848/587b0/mediasession.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACc0lEQVR42nWMWU8TARSF55f54BtBQDEmGiHI0ukChYal8oQPPhgSE02UrSXIYiI8aEiQHQot0BZoWYMtkBahM6XrTIEYSyP5DIOgD3KTL+fmnnOP4Aq5eLP4lq5VG7Z1O+3eDmwbdto9HXT5bdg3u+las2u7baNb047lTt4vttPu7by6++28W2njskvoWenlTvNd8l8UUtRaTF7LPR61PdbIf1nEg9cPKXh1X/MKW4t52leqZfJaCnjSU4JpvgbTrJnyqUr61vsRBreHKOkvQ/xooLyniso+HVUDIuKQkYpeHRUfdJT3VCIOGtEPGakdt1A9bMY8Vodlup76+UYanVaqZ8182hq8KtSN6LGM12MeraN2zKI91YzUaardxi00uqxY3c2aNi1aaVyw0uBqosHZRJPzOdWOP4W9GwOUTpRhnDEhzhjQTRsRp43oZ/4izpoQp/ToJkR0k3qqJg3oJg2IU1cYpk2Ujj+jd60P4TAVwnWwgDfqY0VaxS95WJbcuA/dLH2/whteYCmyjDfqZ0Vaxi+5tYzmH15mPVpHOBVGODz7RTIeg0SMUznCvgrpBHDBzewqOc7jcS7kEOlEhrAKZ0n+O4JTiuLzTXHk/crcngPHbgzn5hHJzCm5XJZs9ifDoX0inlF2/F+Y3PPweSuMZ/uIbC7Lee78hlwuh6Bk0ijKASepHRJqmh8nCjFFIq2mOMmcoGZUkkqMVHybZOqAmBInkY5wrEioqkomk9H0GiEUChP4FmArcMBRJIokSUTlKLIka/slshxFikSQrz35WNNr/18En28Vh2OOmaUNtncC7O4GCQSDBG8hEAzc6l3yGxKjuupbf+AmAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;mediasession&quot;
        title=&quot;&quot;
        src=&quot;/static/ecec9c08c0f8c9b9a82c8728ac2fc848/f058b/mediasession.png&quot;
        srcset=&quot;/static/ecec9c08c0f8c9b9a82c8728ac2fc848/c26ae/mediasession.png 158w,
/static/ecec9c08c0f8c9b9a82c8728ac2fc848/6bdcf/mediasession.png 315w,
/static/ecec9c08c0f8c9b9a82c8728ac2fc848/f058b/mediasession.png 630w,
/static/ecec9c08c0f8c9b9a82c8728ac2fc848/40601/mediasession.png 945w,
/static/ecec9c08c0f8c9b9a82c8728ac2fc848/587b0/mediasession.png 970w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;웹에서도 앱과 같이 풍부한 플랫폼 경험을 할 수 있다면 좋지 않을까요? 예를 들어 데스크탑이나 모바일에 있는 대부분의 운영 체제에는 재생 중인 항목을 알려주고 일시 중지, 건너뛰기 및 찾기에 대한 제어를 제공하는 일종의 미디어 통합이 있습니다. 휴대전화에서는 노래가 재생되지만 시계에서는 미디어 컨트롤이 표시되는 것이죠.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cf9f31812ddeb2eb386c63c713642aaa/024d6/mediasession_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcklEQVR42lWQXUhTYRjHl1131W032VUY6NUILwoKNCiK6iqIKOum7uouqG4CsdToxjLadBOXkZofoShkuw5itrRNcTtz03l2jmfpdnZ29vHu/OJsfj7wwPP8X/g9///rwALLsrDLsmpNdbWq+s7Tzny4K0IghKBS2dcc+zBBxdqmYqWpWPkd6O4xa+9YtXeOH6xd3VFbyghLpoKCsDSElURUMgeAUC4LtrM6maxONpcjb5rMfhtnemKElJwkaxhkdd12aJO3gRRz32fw9vWTlMNAGiHKew7sWMWyoFQWFEs1/ev717TdbGUjmai6K5UEDiHs0cTj6qL5ZD3nGhpobjpDNPazBhI1hzZoS8+RyeXRDZOVpSWePbzDYE83RahqRqFYi/wvE+fu9ctcczq5d6mV43VHefH88V5Uu8xCgWhiHWktSUJWiK2ucuV8M2/bX5JUNSLxNWLryRowX0hx/9YNWp1naWlq5NiROnredRwCGmaBJSnBcixOQk6hamkuOi/w5NHTalxZ2WQ1KeMQZXvN4/cPc7WllYb6Uzxou02hFLdx1b+jGilPILTEr8UQoegKU9MznD7RyKv2bvS8iZbeQlY3cRiGiZ5LURYJFv8G+OH3s5WJUSgmyOV0DMPAzJuk0xrBhSCBYJDF8B98Ax46O94wN+cnMP+b5UiE8HIIh6qqqKqCnAojKwuk1BAbcpCUEkdVN1EUBU3TiERWmBwfZWJshLHRYbxuF4N9Lia/DDHe52J2bITpqUkckiSx21EpTFRaRJJWkKRYTYtGicfjzM8H8Pa78fS78X78wEBnJ77uLj65evG5ehnyuPnsG+A/+xAA3suSqNQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;mediasettion1&quot;
        title=&quot;&quot;
        src=&quot;/static/cf9f31812ddeb2eb386c63c713642aaa/f058b/mediasession_2.png&quot;
        srcset=&quot;/static/cf9f31812ddeb2eb386c63c713642aaa/c26ae/mediasession_2.png 158w,
/static/cf9f31812ddeb2eb386c63c713642aaa/6bdcf/mediasession_2.png 315w,
/static/cf9f31812ddeb2eb386c63c713642aaa/f058b/mediasession_2.png 630w,
/static/cf9f31812ddeb2eb386c63c713642aaa/40601/mediasession_2.png 945w,
/static/cf9f31812ddeb2eb386c63c713642aaa/024d6/mediasession_2.png 961w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Media Session API를 사용하면 웹을 통해 이 모든 작업을 수행할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mediaSession&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;metadata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MediaMetadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Never Gonna Give You Up&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;artist&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Rick Astley&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;album&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Whenever You Need Somebody&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;artwork&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Window, Mac OS, Android 및 iOS에서 미디어 컨트롤을 표시하고 이에 반응할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Eyedropper API&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d56d447ed19e0b48e7771851663d9f07/cd13d/eyedropper.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACXklEQVR42n3M204TURTG8XkTH8AgmBAjBUEJII/jhRdKkVsl0agXSjQCJqg3aqJA6bTKoRJSaEHolENB0mmBApU5dM9Mj5D8TacgITGu5Jdvr7VXliTUINkfd7CX+rAXvejzPZgLXkTUi7XodWdW1OvOtHAP+7P33az+5yI1ItqLGb6LvRNCOog+5+ODS3x/2sj4owY+9NURfNKA/LgBX389ow/r8fU3EBtsZOheHSO9day9beRk0kMx0EQp6KH0rYWC7wpibRDJXH3NwsBVwm/aWRxqIzLYxvr7W4RethJ8doPZgVaWhm+ifmon9bmd7FgHItBJcbKLwqniVDeO3IxIvEOy1l6hfb3Gb99tTH+H62i8A8Pfgear9p1uVg8dh7qozHRRmq4eOVea7qYQaMZKjCCZygucscvkAy3Y/iZsvwenSvaQl2vpBJrJy00I33WErwkx4cGa8Li7LrkFMVpPbm0YqWL8wlYncPZDFDMzVPa+UcoEcNIBrFRNQfVj7U5R2A9R2pvkOBN0d+zUmSBWcoKimULazFXY2stQzuySSSdRjkDNQOmEv7WQrSAyaZz0NulDwcoB7Gf5Z0mrByYbMYW9SITlzXnmNg5ZUQxMI0+lnKdYyPNlY4Wd+TmiUR8z62Fm4waJjRzHx0XKpSLlck2lXEaycwa2YyPyNrawcXI6ltAwDA1d19F0DVPPolkCPZfDMHTyQkcIDU2r7tTyjJRIbBKPx1mOb7G1nURVVZLJlJvnUqhJldTpO3k2u7BTI4XDYWRZxj8dIfpTIa4oxGIKinIupsQu9P/zBwwi2QgmyjciAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;eyedropper&quot;
        title=&quot;&quot;
        src=&quot;/static/d56d447ed19e0b48e7771851663d9f07/f058b/eyedropper.png&quot;
        srcset=&quot;/static/d56d447ed19e0b48e7771851663d9f07/c26ae/eyedropper.png 158w,
/static/d56d447ed19e0b48e7771851663d9f07/6bdcf/eyedropper.png 315w,
/static/d56d447ed19e0b48e7771851663d9f07/f058b/eyedropper.png 630w,
/static/d56d447ed19e0b48e7771851663d9f07/40601/eyedropper.png 945w,
/static/d56d447ed19e0b48e7771851663d9f07/78612/eyedropper.png 1260w,
/static/d56d447ed19e0b48e7771851663d9f07/cd13d/eyedropper.png 1958w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;사진에서 컬러를 추출할 수 있는 기능입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bd28bd1d4c889a12ae79be149cc50e0e/6f175/eyedropper_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8klEQVR42gXBW09bBQDA8fPk4hywgSnQlRZOT3t6v9D2lNI77enOodBbCqX3wqYljCGXBs0Sdbjukixk3pZs2YwaTUyM8cH44JN+BfXRL/P39xMcCS+uqBU5MYtSd6Ge5cgfxek8LdP+TKM63KS6kWW03+Pek7ts9YsMBz2GzR7VtTT5gJOQZMF8c455px3BnYwQrocJ6ArqYIXth3m6LwvsfVml+/kmdz6oM3rwMc+ePOC0kWewLLPjk7idUjgvqZxqKdqKn6xsQzKbEWxuGbWZpLFXZe+oxiev9rn46ZjBqxIXP4+oDTtcnt/jZEUib5yhYjPRV7w8Kqd50SowLqUYphSSkoR5YhLBHBSJVvzoB3FSbR/ZcphOS+Xk6zLnL48YHKi8ubtNeWES3TJL3y9zEnVzP+5knPNxqDhQZRt2kxnT9ASCGBbxbNhZ/3CVxO0gyzU39ZHK6ItdSo9iXDxv8/frMRW/h4DVwrLXSzoSIx5SiPmCuF1+bpolRMmJZLUiiHEJac2BX49QutCov6ix+/37/PbPr/z37x/8+dfvfPP6IbmIl1RGJbOmEktk0IpVVH2DXEyhUNDQCyWS+SzCQtyOMenAU3TS2s/x6f0Sl2c6lwd3aGUyJKJRXKkgqcIt+p0uvf6ARtTL84SbYSFORu9xfHJGp9mm2qghFDN+OuUVmpkQj1UfvzQ8jJfnsU9NIbw9zfTMAt6im9zWGs16k05/QEo2s2uY5MaiwuZqlcOdHZqtDsVKCUEL2HhvVSa7ZKKwZKDrMpAwvsvczBwT1w1YozLShp1QNkajvk2tUuXw+JQ3z77ix/Qttq5dwRsM0mt3yesFBKfbgccjsmCa5co717n61lVmxXlmXYtMGeaQNTszvglW0kHqtTrF9XXGj5/yw7ff8ZFTRJm8RlCJ0mo0WVNzCFaLBVmy4nbL2Jw2rPIinrADZ8jFzJyRpdUANzyLRBNRNnQdTdPw+/1Idju2cASjKBKLxdA1jXg2zf+azo/mgrQC3wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;eyedropper1&quot;
        title=&quot;&quot;
        src=&quot;/static/bd28bd1d4c889a12ae79be149cc50e0e/f058b/eyedropper_1.png&quot;
        srcset=&quot;/static/bd28bd1d4c889a12ae79be149cc50e0e/c26ae/eyedropper_1.png 158w,
/static/bd28bd1d4c889a12ae79be149cc50e0e/6bdcf/eyedropper_1.png 315w,
/static/bd28bd1d4c889a12ae79be149cc50e0e/f058b/eyedropper_1.png 630w,
/static/bd28bd1d4c889a12ae79be149cc50e0e/40601/eyedropper_1.png 945w,
/static/bd28bd1d4c889a12ae79be149cc50e0e/78612/eyedropper_1.png 1260w,
/static/bd28bd1d4c889a12ae79be149cc50e0e/6f175/eyedropper_1.png 2036w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;사진에서 레서판다의 머리 부분을 선택했을 때 브라우저에 해당 컬러가 표시되고 있는 모습입니다. 크롬 및 엣지에서만 지원되는 것이 아쉽네요. 브라우저 호환성이 좋아지면 라이브러리 없이 쉽게 사진으로부터 컬러 값을 알 수 있으니 편할 것 같습니다.&lt;/p&gt;
&lt;h3&gt;Structured cloning&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f4e46527d0f37b8a79c2b15d9479332c/06868/structure.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACQklEQVR42p2P7U9SARTG71/Wh74oSs4yy5AL6mwW5r/Ql3Ll3Fpb71PwQ2urZSKiaykIyItOTAUpFZR7rzUBlYsoCmyuX+Pi24c+dbbfnvOc5+xsR0hkErwOvmUwbMO6aMO6NMRA2KrpmR9csJ5z5rVs0VbdXbDxau4NS7+WETybPq48vIquV0/Di+vonzeie6JH16enrr+B2t566vqvUf+sgZrH9eie6ql5VEft6Y5x3Ix5ooMbo7f4HP2CEJCCNL9rQbS2YbSaaXnZqqlhQMT8oUPrTe/bNYw2s0ZlLg610dTXTNdXC5bJHkzj7Yz9cCL4pSCmkXY6R7rotFe56+ii29ODxd2DZfpUz/pL/r7rAfe+dVcPTnTgqBz0bPhoGr6N6DTT6hAxOExV7CKGUROG0Us6YuSOXdQw2E3avNVhQhxro3H4JsOVl3fzaTwJN96tWfzKLCHZR1Dx4kt68WxUmUlMM53049uaIyAHCMle/MpF7t30MRV3oWQVhJ3jExLbWUjJFLYSyCqkUvCnzHmtqyeUKsPfCXJpFUWFfIZ/lpDMHjIfWyc1G2JxNYB/bZv5iEo6c0SpfEypWMQZ/0loxslM4CPOiItP32O4FuIUy0VK5RJFjSLlchnhIKdydHhI/viIwkGBwr7KQX6PXG6PbDarsa/ukMln2c3vo6qVLMVeLn2eX0ZYj8eJxVZYXlljNZ5EkiWSkoykIZ0iI2tImkqSgiwpl/ILhHA4jHtqkq/uEMH5KLGVKJFIlGj0//gLH6ezPRq/5foAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;structured&quot;
        title=&quot;&quot;
        src=&quot;/static/f4e46527d0f37b8a79c2b15d9479332c/f058b/structure.png&quot;
        srcset=&quot;/static/f4e46527d0f37b8a79c2b15d9479332c/c26ae/structure.png 158w,
/static/f4e46527d0f37b8a79c2b15d9479332c/6bdcf/structure.png 315w,
/static/f4e46527d0f37b8a79c2b15d9479332c/f058b/structure.png 630w,
/static/f4e46527d0f37b8a79c2b15d9479332c/40601/structure.png 945w,
/static/f4e46527d0f37b8a79c2b15d9479332c/78612/structure.png 1260w,
/static/f4e46527d0f37b8a79c2b15d9479332c/06868/structure.png 1974w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; clone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존에는 객체의 깊은 복제를 위해서는 위와 같은 코드를 구현해야 했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; clone &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;structuredClone&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제는 이렇게 간단히 한 줄로 깊은 복제가 가능합니다. 객체뿐 아니라 이미지, 비트맵, 배열과 같은 더 많은 것들을 복제할 수 있으며, 순환 참조가 있는 개체 구조를 복제할 수도 있습니다. 심지어 모든 브라우저에서 지원하는 기능이네요.&lt;/p&gt;
&lt;h3&gt;CreateImageBitmap&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d3b2d862d868489e27aba5fe8aabe658/82e86/createimage.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACZklEQVR42pXM/0sTcRzH8fvXAq0tKyKS0rzNc8scSj/1U1CBVGBSOgukL1QQREXGpmltU1Oz3Do372ZLXXlzzm7Lu91SM6dQz5gOI+qX3vDg83m9Xx8+grKk0DbWjvftdTonuugY99Lxpmzcizd8fVupuzbWydWRju1959uu7V2Jd+IGba/bea8nEPoTA1RctXGw/TD2SwfYe8GO7eIBKs/ZqbpyiMpzNva1VlF53s6eMxVUnLVha63Cfrn0dj/72w7R8PIkR33HGEwOIQTnQhzprsZ5X6Kmu47amyK1t0ScDxtw9TRSd89JdWcNJ+44cDyQkJ64qX/kQnrspva2SN1dJ82h04h99Yx8GkUIJkPUPhVp7PXg9jXi8jXi7j2FZ7CFplAznuEWPEO/NQ0279rtAi2I/eUPX8wGqO45jvTchaNXwtHXgKO3AYdf2snb504WfU5Efz1i6e4vd34Jqc/N0Z5jDCdfIZgrOSILYeRsnJgeR/08yZQuI2dk3qVl3i3KRBfCRJZiRLPTTOlTqLpMTC/3aRl5UWYiFcZYMxHSq1t8XMxCep689oFE7geZRfi5ye5Ec98pphfYmlfJLBnM5SCv888R4lmdQHSE6Hg/wennhJM6oViSzLLB5uYG39bXGUhOM/kmwKj8jBeJMXxKgvH4R4qbRTaKG7tKWShYBoUVC3OtgGVZrBZMrEIO01zGNE0M06CQ/8KXr3mMQoF83sCysphWDsMw/iLMzMyiKgqTyiwf5jRSmoY2n0LTSrSyFKl57Y/8Z78jlUohRCIRQqEgwZEwYVklriooyv9TVZVYLMYvXJawWAU+/moAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;createimage&quot;
        title=&quot;&quot;
        src=&quot;/static/d3b2d862d868489e27aba5fe8aabe658/f058b/createimage.png&quot;
        srcset=&quot;/static/d3b2d862d868489e27aba5fe8aabe658/c26ae/createimage.png 158w,
/static/d3b2d862d868489e27aba5fe8aabe658/6bdcf/createimage.png 315w,
/static/d3b2d862d868489e27aba5fe8aabe658/f058b/createimage.png 630w,
/static/d3b2d862d868489e27aba5fe8aabe658/40601/createimage.png 945w,
/static/d3b2d862d868489e27aba5fe8aabe658/78612/createimage.png 1260w,
/static/d3b2d862d868489e27aba5fe8aabe658/82e86/createimage.png 1978w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;blobToImg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;blob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createObjectURL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;blob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; img &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;src &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; url
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; img
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token constant&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;revokeObjectURL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존에는 blob 형태의 파일을 img로 변환하기 위해서는 위와 같이 코드를 복잡하게 짜야 했습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;blobToImage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;blob&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createImageBitmap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;blob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제는 사파리에서도 지원하기 때문에 이렇게 한 줄로 손쉽게 구현 가능합니다.&lt;/p&gt;
&lt;p&gt;아래와 같이 이미지가 로드되는 방식을 훨씬 더 많이 제어하는 것도 가능합니다. (2D 캔버스 및 WebGL용 텍스처를 로드하는 데에도 유용합니다.)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token function&quot;&gt;createImageBitmap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;blob&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; width&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;colorSpaceConversion&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;none&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;resizeHeight&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;640&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;resizeWidth&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;480&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;resizeQuality&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;high&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;premultiplyAlpha&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;premultiplay&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;colorSpaceConversion: 색 공간 변환을 사용하여 이미지를 디코딩해야 하는지 여부를 지정함&lt;/li&gt;
&lt;li&gt;resizeHeight: 출력 높이&lt;/li&gt;
&lt;li&gt;resizeWidth: 출력 너비&lt;/li&gt;
&lt;li&gt;resizeQuality: 출력 크기와 일치하도록 입력 크기를 조정하는 데 사용할 알고리즘 지정&lt;/li&gt;
&lt;li&gt;premultiplyAlpha: 비트맵의 색상 채널에 알파 채널을 곱하는지 여부를 지정&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그 밖에도 자바스크립트의 여러 기능들을 다양한 브라우저에서 지원 가능하게 되었습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/166a3/other.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACU0lEQVR42nWRW2+bShSF+f//oOrLUfvSqmrVixQlTtLGbZ2LnfgyYCBJibkZYhuTEMBcDHxHJkdHfWiXtPVpz9Is7Zkt8Qc1TQPUf3J+Y/N/9/uZlOc5aZqSZVnLvChaW1km2KbOxtTxZ7+YeAWO9XwvLir61pzSvSU0VAwvQLcgCkFKkoTFYkEQBPieT5KmbeCJbaKN+hijM7q3XU5vHjgezSjLgjDN+TwdcHPa4au8x4F2wYfLW26cJVJd1/898VlVVdHUDVldktUZ2zIjT1PKqiErC5qmpm4aku2GrE7Jk5gk35AWOWW1RXp8fMR13Xa6+XyOZTtQFHScNcr5CdaPQ36Mj3g7vKd79kS9rVjGJe+EQvD9gP75F/aF4H0vYmbmSPxFQbokymOyIsaNLOaxgxO5bOuKqtkyf3KZJx7ek40Xu9hPNkEaIkVR1E62Wq1aer7fBvbuUwz5An/QRSh9OnrOeFJBVbNOKw4Nk3TYQ7/6Ru/6juPRloVXP295s9m0FccxcZLQVDX6wsR2TDzfRV1d469CZMcgyzPiTcqlpXBtCMa+jPCmXFk6duAj7Ta8+8MdHx4eWIchURjSNz10fYgzPkcZDfip+YwnS9ZBgHsfcHprsNSGGFdnDLVfXIg15myNNJ1OGQwGqKqKZVnc3c1wbYv9S4XT/Q79gz2Oeod8PFE4PNKZGXeMtWtedj7x7f1r3hz8w6vjz7z40uXkbIQkyzK70B2FEG1NhEBTBIqqomga6lRFnwpUddL6sjxByCMup4KxIpjII4QyYCIP+RexrSiAaBzAMgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;other&quot;
        title=&quot;&quot;
        src=&quot;/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/f058b/other.png&quot;
        srcset=&quot;/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/c26ae/other.png 158w,
/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/6bdcf/other.png 315w,
/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/f058b/other.png 630w,
/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/40601/other.png 945w,
/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/78612/other.png 1260w,
/static/a0bf5f2a40ad8decfe8cd38d0dff6b26/166a3/other.png 1980w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Top level await&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;script type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;module&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;processData&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./utils.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dataResponse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;processData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataResponse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;script&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 Javascript 모듈의 최상위 수준에서 await를 사용할 수 있습니다.&lt;/p&gt;
&lt;h3&gt;Private properties, Private methods&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Whatever&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EventTarget&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  #counter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#counter
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;#fireIncrementEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatchEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;increment&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;incrementCounter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#counter&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#fireIncrementEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;class는 이제 private 속성과 private method를 가질 수 있습니다.&lt;/p&gt;
&lt;h3&gt;array.at&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; last &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; last &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;배열의 마지막 항목을 얻기 위해 기존에는 이런 코드를 작성한 적이 있을 텐데요,&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; last &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;at&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이제는 인덱스로 배열에서 항목을 가져오는 method가 생겼습니다. 음수 인덱스를 허용하기 때문에 끝에서부터 계산할 수 있습니다.&lt;/p&gt;
&lt;p&gt;이 모든 것이 크로스 브라우징이 가능합니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5a6bf108c728d1828d1aa1fd0e84e245/e548f/fin.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsklEQVR42oWRba+iMBCF/f9/aY3fdTUYo/dC4pVdFBdsoUBpaQt4Nh2X++KHvU1Opp12njkDs/v9Di+/pv2z/JJSIwxTxHGG8/kPWqmQpAkyznFjAjwv6N3sufB5TfmmsQgChvgkIISClB04Y2DshizLwBj7AP7P3XRf1wZvxxJt22EcHfregXOOsiwJVvBPDodhoIO1DkopOGNhbQdrDcZPwCgqaPSyaKG1IZiXBxfFP6C1Fq2UMEpCSwEly0dsBEXdCNzvA6R02O04fv+qIISG0obG5Ywjz/OPkdu2hZdzBtZZuH4gx+M4kib3xjjkuUBdS2jdYhh6OOe+iIC+wLscx8fo1hgCGWPgXP8ObJoOr68pGCtoRKU0qqoiCSFQV9UD2Pc9AZ2zBPFutdb0Lbuuo87jOKDgCqc3DiG8w47u0jSlP+zj9Xql5rOpy6S6rr/Ex75ClnHsdglOpytutxuKguNyueB8PiOOYyRJQjUzn/xOvvvxeMR6/ROr1RLL5RIvhxfKHQ4HbLdb7Pd7ejcLwxDfKYoiBEGA+XyO+Y85FosF1us1NpvNO2y1WiGKQvwFZTNCvPIxWEwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;fin&quot;
        title=&quot;&quot;
        src=&quot;/static/5a6bf108c728d1828d1aa1fd0e84e245/f058b/fin.png&quot;
        srcset=&quot;/static/5a6bf108c728d1828d1aa1fd0e84e245/c26ae/fin.png 158w,
/static/5a6bf108c728d1828d1aa1fd0e84e245/6bdcf/fin.png 315w,
/static/5a6bf108c728d1828d1aa1fd0e84e245/f058b/fin.png 630w,
/static/5a6bf108c728d1828d1aa1fd0e84e245/40601/fin.png 945w,
/static/5a6bf108c728d1828d1aa1fd0e84e245/e548f/fin.png 975w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;2022년에는 브라우저 간에 동적이 완전히 상호 운용될 수 있도록 이 15가지 핵심 영역에 초점을 맞추는 것을 목표로 한다고 합니다.&lt;/p&gt;
&lt;h3&gt;마무리&lt;/h3&gt;
&lt;p&gt;원래는 두세 가지 기능에 대해서만 언급하려고 했는데 쓰다 보니 굉장히 길어졌네요. 한 가지 주제에 대해 오래 발표를 했다면 다소 지루할 수 있었을 텐데, 기능 설명 위주로 아주 빠르게 발표가 진행되다 보니 몰랐던 기능에 대해서도 많이 배울 수 있었던 유익하고 즐거운 시간이었습니다. 제가 소개하지 못한 다른 흥미로운 내용들도 많으니 가벼운 마음으로 풀 영상을 한번 보시는 것도 좋을 것 같습니다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://io.google/2022/program/3c60e411-5340-4c54-a037-3aceb2825b16/intl/ko/&quot;&gt;Google I/O ‘What’s new for the web platform’ full 영상 링크&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[V 컬러링에 React Query 도입하기]]></title><description><![CDATA[이전 포스트에서도 언급했듯이 현재 V 컬러링의 API는 조회성임에도 불구하고 POST 메소드가 대부분입니다. 가볍게 도입할 수 있는 SWR도 매력적이지만 React Query…]]></description><link>https://jayoon-kong.github.io/react-query/</link><guid isPermaLink="false">https://jayoon-kong.github.io/react-query/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Thu, 28 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://jayoon-kong.github.io/swr-react_query/&quot;&gt;이전 포스트&lt;/a&gt;에서도 언급했듯이 현재 V 컬러링의 API는 조회성임에도 불구하고 POST 메소드가 대부분입니다. 가볍게 도입할 수 있는 SWR도 매력적이지만 React Query를 도입하기로 결정한 가장 큰 이유입니다. 그리고 리서치를 하다 보니 React Query가 아무래도 인기도 많고 reference도 많아 실제로 적용하기에도 좋을 것 같았습니다.&lt;/p&gt;
&lt;p&gt;우선 어떤 부분에 React Query를 적용할지에 대한 고민을 가장 먼저 시작했습니다. 캐싱 처리와 자동 갱신, 그리고 기존 코드 대비 가장 두드러진 차이를 느낄 수 있는 부분이 뭘까 고민해 보니 단연 User 정보가 제일 먼저 떠오르더군요. 사실 배포 후 사용자가 새로고침을 하지 않으면 캐시 문제 때문에 간혹 브라우저에서 예전 코드를 인식하는 경우가 종종 있었는데, V 컬러링은 작년 하반기 ID 회원체계 개편을 통해 사용자 정보를 가져오는 API 중 상당수가 v2 버전으로 변경된 바 있습니다. 그래서 위와 같은 일이 발생하면 회원가입이 제대로 되지 않거나 혹은 사용자 정보를 제대로 가져오지 못하는 등의 문제가 생기게 되었습니다. V 컬러링 같은 경우 앱을 통해 가입하는 사용자도 많고 (앱은 로그인 처리가 다름) 사용자가 사실 아주 많은 케이스는 아니지만, 그래도 모두가 이용할 수 있는 대국민 서비스인 만큼 꼭 해결해야만 하는 심각한 문제였죠. React Query를 도입하면 이러한 문제가 해결될 것이라 기대해 봅니다.&lt;/p&gt;
&lt;p&gt;먼저 범용적으로 사용되고 있는 Redux를 걷어내기 전에 전체적인 구조를 먼저 살펴보았습니다. 현재 User 정보가 변경되는 구간은 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;회원가입&lt;/li&gt;
&lt;li&gt;로그인&lt;/li&gt;
&lt;li&gt;프로필 변경&lt;/li&gt;
&lt;li&gt;부가서비스 가입 및 해지&lt;/li&gt;
&lt;li&gt;회원탈퇴&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;현재 위의 다섯 가지 경우에 User 정보를 갱신하는 API를 호출하고, 그 직후에 변경된 User 정보를 서버로부터 내려받아 Redux Store에 업데이트해 줍니다. 그러면 User 정보를 받아 오는 수많은 화면에서 &lt;code class=&quot;language-text&quot;&gt;dispatch(getUser())&lt;/code&gt;를 통해 자동으로 갱신된 정보를 받아 오게 됩니다. 본 포스트에서는 1차 목표로 사용자 정보의 갱신과 조회를 하는 프로세스에 React Query를 도입하고, 그 과정 및 결과와 트러블 슈팅 등을 기록할 예정입니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;QueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryClientProvider client&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Provider store&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;BrowserRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToastManager bind&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;ToastHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;PopupManager bind&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;PopupHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;BrowserRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;QueryClientProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  rootElement
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;기존에 Provider로 감싸져 있던 메인 컴포넌트 위에 QueryClientProvider을 최상위 컴포넌트로 감싸고 QueryClient 값을 Prop으로 넣었습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;res1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
      res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다음은 간단하게 useUser라는 hook을 만들었습니다. 첫 번째 인자로는 user 정보를 가져온다는 의미의 getUser을 key로 사용했고, 두 번째 인자(fetcher)는 실제로 사용자 정보를 받아 오는 promise 함수를 사용했습니다.&lt;/p&gt;
&lt;p&gt;다음으로는 App.tsx 컴포넌트에서 간단히 user 정보를 가져와 보았습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;app&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token operator&quot;&gt;?.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a0c7b0d37c292d1c3c12170ac12a6a8a/bf8c1/console.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 21.51898734177215%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAuUlEQVR42j2Py46FMAxD+f8PnQsXWvIstEHyKGU0iyxiOcfOQsQgFgwRjO+G2x1ihlsVUSviPBFEGKVgHPu/NvYdY/8iakEzg6XfDAsxg0UxVKfhbg1qjm6GoBcWzC+klHfPgOOYk3pzh6c/gScRKhE6M8bnB5cZSBR3QvIoIbXORn3bXlAt6OuKvn4Qxz7bad6rYBERaNLdEKWgXxesNQx3PMIIETz5TgZk4z9thtSKhxlXa7NluOMXZxAzfdc6iTwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;console&quot;
        title=&quot;&quot;
        src=&quot;/static/a0c7b0d37c292d1c3c12170ac12a6a8a/f058b/console.png&quot;
        srcset=&quot;/static/a0c7b0d37c292d1c3c12170ac12a6a8a/c26ae/console.png 158w,
/static/a0c7b0d37c292d1c3c12170ac12a6a8a/6bdcf/console.png 315w,
/static/a0c7b0d37c292d1c3c12170ac12a6a8a/f058b/console.png 630w,
/static/a0c7b0d37c292d1c3c12170ac12a6a8a/40601/console.png 945w,
/static/a0c7b0d37c292d1c3c12170ac12a6a8a/78612/console.png 1260w,
/static/a0c7b0d37c292d1c3c12170ac12a6a8a/bf8c1/console.png 1722w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;화면을 전환할 때마다 이렇게 데이터가 잘 찍히네요. 근데 좀 이상합니다. 제가 기대한 것은 캐시 처리라 원래 이렇게 API가 자주 호출되면 안될 것 같은데 네트워크 탭을 확인해 보면 주기적으로 API가 호출되고 있네요. 이 부분은 어떤 옵션으로 해결할 수 있을지 좀 더 찾아보도록 하겠습니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e2dc70f219137c17e292efa9107408ff/2bef9/api_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 77.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACHklEQVR42mWUCZOqQAyE/f8/cHc55MYD3ZJjAAUhW19gUN+zagpmJul0d4K7LD9IVdcyz7M8n09d0zRJ23ZyPJ0lzXI5HE96TozILI/HQ/LDUcZxlGEY9J4nebsgjORyvcr9ft8WCWVVib8P5Ovb0eSyrORWllJVldR1LfsglMYY6fpe39u21bxdli8MABqHQStRuWmMsoviRJI00yfAsAYwTlKp60ZBuNf8cZSdH4RSVbVK4tICEowdUZwqgyzLZZqeMk+T9H2vBYgFKEpSPVNAz98rQzZWMoGVyorE9XxxXF/CKN7sQB53EOEsjBLpum6RTPWiuKihw7tkYzTQ8wNNNqbVcxa+xSsrQHjfJOMLFfu1umWIT3hI0263m1qidytDJLNX+Un6YogUazgHlgVNCcJY2VkVgFqG5LUryAdDx/MVzDKwjYGhvw/FcT35dlw5Fxe9sx7CnMaRE0SxMiRvR/cIYGMTFLBpNsnM6TxP29B33eIhsUhmbHgugPlBTudik8shiTSFQKoze6hgGs5FocXCOFGGxH9I/nE9TbQNef9SYMfIfP04Qtz191fPsYNC2sy+X9/XpoAOQ8vu3y+FxhDDAoBft8q0g/3xpbAB8N3DUZuyeMhIEAOgaZdZpLsUwhb9UuLk5SFdtv8mH02pGx0Z7ulycbluKugoQ980zQqYvgBBN8b8Jxnj8QbvzusM2rtuZWh9573vF8l/MJTBL0GQThgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;api_1&quot;
        title=&quot;&quot;
        src=&quot;/static/e2dc70f219137c17e292efa9107408ff/f058b/api_1.png&quot;
        srcset=&quot;/static/e2dc70f219137c17e292efa9107408ff/c26ae/api_1.png 158w,
/static/e2dc70f219137c17e292efa9107408ff/6bdcf/api_1.png 315w,
/static/e2dc70f219137c17e292efa9107408ff/f058b/api_1.png 630w,
/static/e2dc70f219137c17e292efa9107408ff/40601/api_1.png 945w,
/static/e2dc70f219137c17e292efa9107408ff/2bef9/api_1.png 1024w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;( v1/user/info와 v1/user/profile이 화면이 전환될 때마다 찍히고 있음을 확인할 수 있습니다.)&lt;/p&gt;
&lt;h3&gt;React Query에서의 cache 처리&lt;/h3&gt;
&lt;p&gt;React Query에서 캐시 처리의 원리를 알기 위해서는 staleTime과 cacheTime의 차이를 알아야 합니다. 그 전에 우선 라이프 사이클에 대한 이해가 필요한데요, A 쿼리 인스턴스가 mount되면 데이터가 fetch되고 useQuery의 첫 번째 인자로 넘긴 query key로 캐싱을 합니다. 이 데이터는 fresh 상태에서 staleTime(기본값 0) 이후에 stale 상태로 변경되고, A 쿼리 인스턴스가 unmount되는 시점부터 캐시는 cacheTime(기본값 5)만큼 유지되다가 가비지 콜렉터로 넘겨집니다. 만일 cacheTime이 지나기 전에 A 쿼리 인스턴스가 새롭게 mount되면, fetch가 실행되고 fresh한 값을 가져오는 동안 캐시된 데이터를 보여주게 됩니다.&lt;/p&gt;
&lt;p&gt;그럼 이제 staleTime과 cacheTime의 차이점을 알아보겠습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;staleTime&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;데이터가 fresh 상태에서 stale 상태로 변경되는 데 걸리는 시간&lt;/li&gt;
&lt;li&gt;fresh 상태일 때는 쿼리 인스턴스가 새롭게 mount되어도 fetch가 일어나지 않는다.&lt;/li&gt;
&lt;li&gt;데이터가 한 번 fetch되고 나서 staleTime이 지나지 않았다면 unmount 후 mount되어도 fetch가 일어나지 않는다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;cacheTime&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;데이터가 inactive 상태일 때 캐싱된 상태로 남아있는 시간&lt;/li&gt;
&lt;li&gt;쿼리 인스턴스가 unmount되면 inactive 상태로 변경되며, 캐시는 cacheTime만큼 유지된다.&lt;/li&gt;
&lt;li&gt;cacheTime이 지나면 가비지 콜렉터로 수집되며, cacheTime이 지나기 전에 쿼리 인스턴스가 다시 mount되면 데이터를 fetch하는 동안 캐시 데이터를 보여준다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;즉 위의 경우 data fetch가 일어나는 이유는 새로운 쿼리 인스턴스가 Mount되었기 때문(페이지 이동이 일어남)이라고 볼 수 있는데요, 기본적으로 React Query에 아무 설정을 하지 않으면 캐싱이 되지 않는 것이 정상이기 때문에 위와 같은 현상이 일어나게 된 것입니다. 사실 V 컬러링에서는 모든 페이지 이동 시 로그인 여부 및 정회원/준회원 여부를 체크해야 하기 때문에 매번 최신 데이터로 fetch되어야 하는 것이 맞습니다.&lt;/p&gt;
&lt;p&gt;하지만 데이터의 fetch가 매번 필요하지 않은 상황이거나, 혹은 이렇게 자주 fetch하지 않고 특정 시간이 지난 이후에만 주기적으로 데이터를 갱신하고 싶다면 어떻게 해야 할까요? 이 때 위에서 살펴본 staleTime과 caheTime의 사용이 필요합니다. 이 두 값은 option으로 처리할 수 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;res1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;staleTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;cacheTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;User 정보를 받아 오는 쿼리에 위와 같이 옵션을 추가하였습니다. 이렇게 하면 staleTime으로 설정한 시간만큼 데이터의 신선도가 유지되고 (fresh 상태), 이 시간이 지나면 fresh한 상태에서 stale한 상태가 되기 때문에 다시 fetch가 일어나게 됩니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/072096770fc1513e2dc37ab05413c6a4/709cb/api_2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 102.53164556962024%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAACrklEQVR42n2UiXLiQAxE+f8v3AC+wfeNwfhCqSd7wMlubapUJh5Nu9Ut6XC5huIHFxmGpzyfawzDII/HQ67XUM6WI2fLlvZ2k2maZBxHDc8PpK4bmcZRXD+QpmllHAY5xEkiSZopgEkmAA6jWCzb0ScXqqpWEHIBzItClmXR37ftg4ckScV2Pem6ToFgx7Pve7mGkZxtRyzHlePJkjhJhfy2vUlwCSUvSlmWWSv8AKaZuF6gAICZ4P8oTsRxPXE9X6NuGmXERUBgzW8YIglEDnleiGW70vdPTeYlSc/noKUaQHKKspR5nt+AVV3La1lWhl2nZwcu2Y4rZVWpNnuGGHY8W2oKoPtzz79ImuUyzxvDtl0ZUhbJYRhJs700pqCh7XjKkg/DDBYEIEWxMnb3psRxIl+ns5rCoTEFQGV4suRk2fLneFLQJE3lduu0zCiOVabgcv0AQttVyj/7jJKNhlxGFloM3fg478qyejPkvpZMEiUDQNzvD33CkBbxg6tehgVGYcKyGUGHvF4vPTMVHtDp63hW4Unif/qNFqnrWp0lmqbRj9ANqymBpGmmpkDI6K8a8gJzbrvx6nemEJj2MWUSL7i82wjHP6YkqbYGlJd/mHKibWxHjUNTWP025cekkARDtPt7UmJlxzmS0CYY8V9TEJZy+TPlmknRHvUD1YvgQzACBCPMKDLXP0yhrCwv9KVh+Oh7ZUH/ETB9bO5zDus0W01xXH9dX2ZSnM0UM+D79WUmBT2NvtM0KkNjytrY3aohOjH4xkG9sDPFrC4q+QBO6uzvfTgDSGKW529W+5LDaJWD0gEhDKiur7Z9b563KejAVmakzK4zMx1tHcAFs3GMGTxpIXm99FzbbpnXPmRj0xLsNHRED0S+XCOVAw33OhM0NiV39/u6ecpK738DfOA30Kdi1YAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;api_2&quot;
        title=&quot;&quot;
        src=&quot;/static/072096770fc1513e2dc37ab05413c6a4/f058b/api_2.png&quot;
        srcset=&quot;/static/072096770fc1513e2dc37ab05413c6a4/c26ae/api_2.png 158w,
/static/072096770fc1513e2dc37ab05413c6a4/6bdcf/api_2.png 315w,
/static/072096770fc1513e2dc37ab05413c6a4/f058b/api_2.png 630w,
/static/072096770fc1513e2dc37ab05413c6a4/40601/api_2.png 945w,
/static/072096770fc1513e2dc37ab05413c6a4/709cb/api_2.png 1034w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;현재 위의 App.tsx와 마찬가지로 Player.tsx와 My.tsx에도 화면 진입 시 useUser를 통해 user 정보를 가져오도록 구현해 둔 상태입니다. 캐시 테스트를 하기 위해 5초 동안 player 탭과 my 탭을 여러 번 왔다갔다 했는데요, 위 네트워크 탭에서 볼 수 있듯이 v1/user/info와 v1/user/profile이 화면이 전환될 때마다 찍히는 것이 아니라 간헐적으로 (위에는 표시되지 않습니다만 5초에 한 번씩!) 찍히는 것을 확인할 수 있습니다. staleTime이 5초이기 때문에 한 번 fetch해 온 user 정보가 5초 동안 fresh한 상태로 유지되어 다음 호출 시에는 캐싱된 데이터를 가져오고, 5초가 지나면 stale한 상태로 변경되기 때문에 다시 fetch를 해오게 되는 것이죠. (위 예시는 테스트를 위한 것이고, 실제로 V 컬러링에서는 staleTime을 30분으로 지정하였습니다.)&lt;/p&gt;
&lt;h3&gt;refetchInterval, refetchOnWindowFocus, refetchOnReconnect&lt;/h3&gt;
&lt;p&gt;앞 포스팅에서 언급한 바와 같이 React Query에서는 브라우저에 다시 포커스가 된 경우나 네트워크가 재연결되었을 때 data를 자동 갱신하는 기능을 제공합니다. refetchOnWindowFocus와 refetchOnReconnect를 이용하여 해당 기능을 on/off할 수 있습니다. 사용법은 아주 간단합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;res1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;staleTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;cacheTime&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;Infinity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;refetchOnWindowFocus&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;refetchOnReconnect&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이 두 값의 기본값은 true이므로 사실 기능을 사용하고자 할 때에는 굳이 옵션으로 넣지 않아도 됩니다. 기능을 사용하고 싶지 않은 경우에는 false 값을 넣어 주면 해당 기능을 사용하지 않을 수 있습니다.&lt;/p&gt;
&lt;p&gt;그리고 refetchInterval 값을 통해 갱신 타임을 설정할 수도 있습니다. 폴링 구현 시 유용할 것 같습니다.&lt;/p&gt;
&lt;h3&gt;useMutation&lt;/h3&gt;
&lt;p&gt;위와 같이 staleTime으로 반복적인 API 호출을 제어했습니다. 그런데 회원 가입이나 로그인, 탈퇴 등의 이유로 사용자 정보가 즉각적으로 변경되어야 하는 경우에는 어떻게 해야 할까요? 데이터의 상태가 stale이 될 때까지(30분을) 마냥 기다릴 수는 없겠죠. 이런 경우에 useMutation을 사용하여 데이터를 업데이트해 줍니다.&lt;/p&gt;
&lt;p&gt;React Query에서 제공하는 useMutation은 손쉽게 데이터를 업데이트해 주는 장점도 있지만, 무려 업데이트 후 위의 useQuery에서 사용했던 get 함수를 자동으로 재실행해주는 장점도 있습니다. 사용법은 아주 간단합니다. unique key로 맵핑된 get 함수를 invalidateQueries에 넣어주기만 하면 됩니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; mutate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMutation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;EnvChecker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isApp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      NativeHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;NativeActionTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;LOGOUT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;invalidateQueries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 코드는 로그아웃 예시인데요, 이렇게 구현하기만 하면 로그아웃 시 자동으로 ‘getUser’에 맵핑된 useUser를 실행하면서 user 정보를 갱신합니다.&lt;/p&gt;
&lt;p&gt;위 예제에서는 성공했을 경우를 따로 구현했지만, useMutation에서도 함수 실행이 성공했을 경우의 처리 방법을 제공해 줍니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; mutate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMutation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;EnvChecker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isApp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      NativeHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;NativeActionTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;LOGOUT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;invalidateQueries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;조금 더 가독성이 좋아진 것을 느낄 수 있습니다. :)&lt;/p&gt;
&lt;p&gt;하지만 여러 곳에서 사용하려니 중복 코드가 되어 버리네요. useUser처럼 공통으로 사용할 수 있도록 따로 hook을 만들어 보았습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; mutate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useMutation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;api&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;onSuccess&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IResponse&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;unknown&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;callback&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;invalidateQueries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; mutate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 API와 콜백 함수를 인자로 받아 공통 처리를 하였더니 훨씬 깔끔하게 쓸 수 있네요.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; updateUser &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useUpdateUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; afterLogout&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;호출하는 곳에서는 위와 같이 컴포넌트 최상위에 선언을 해 주고 적절한 시점에 updateUser()을 불러 주면 됩니다.&lt;/p&gt;
&lt;h3&gt;trouble shooting&lt;/h3&gt;
&lt;p&gt;React Query를 적용하면서 아무 생각 없이 useMutation을 useEffect와 이벤트 핸들러 호출 부분에 넣어 구현하였더니 자주 볼 수 있는 invalid hook call 에러가 발생하였습니다. 여느 hook과 마찬가지로 함수형 component의 최상위 부분에서 호출을 해야 하는데 제가 그 부분을 간과했던 것이죠. 그래서 위 코드와 같이 선언을 하고, useEffect 내부나 이벤트 핸들러 내부에서 &lt;code class=&quot;language-text&quot;&gt;updateUser()&lt;/code&gt; 을 호출하는 방식으로 변경하였더니 에러가 해결되었습니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;추가 이슈&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;V 컬러링은 Native 앱에서 My 등 몇 가지 페이지가 웹뷰로 구현되어 있습니다. Redux를 걷어내고 React Query를 적용하는 동안 웹에서는 이슈가 없었으나, 앱 테스트를 해 보니 웹뷰로 되어 있는 부분이 호출될 경우 user 정보를 받아 오지 못해 로그인 페이지가 로딩되는 오류가 발생했습니다.&lt;/p&gt;
&lt;p&gt;원인을 파악해 보니 웹뷰가 호출될 때 앱의 토큰 정보를 실어 오고 그 토큰 정보를 바탕으로 user 정보를 갱신하고 있었는데요, 이 부분을 누락하여 user 정보를 제대로 받아오지 못하는 것이었습니다.&lt;/p&gt;
&lt;p&gt;그래서 앱 실행 시 최초에 토큰을 받아 온 후, &lt;code class=&quot;language-text&quot;&gt;prefetchQuery&lt;/code&gt;로 먼저 user 정보를 받아오도록 하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;prefetchQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;res1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
      res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;그런데 이렇게 해도 새로고침을 하면 간헐적으로 My 페이지 진입 시 user 정보를 가져오지 못하는 문제가 발생했습니다. 엄청난 삽질 끝에 (거의 10시간... 날아간 불금 ㅠㅠ) prefetchQuery를 하는 부분을 동기 처리하였더니 마침내 이슈가 해결되었습니다! 😊&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Token&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getToken&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;prefetchQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;getUser&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;res1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
      UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
      res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; res2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(바로 await 한 줄로 깔끔하게 해결하였습니다.)&lt;/p&gt;
&lt;p&gt;토큰을 가져오는 부분부터 &lt;code class=&quot;language-text&quot;&gt;prefetchQuery&lt;/code&gt;로 데이터를 초기화하고, 마지막에 렌더링을 하는 것까지 모두 await 처리를 하였습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tryingGetAuth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;EnvChecker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isDev&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ToastHelper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;version: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;VERSION&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// render&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;QueryClientProvider client&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;queryClient&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;BrowserRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;BrowserRouter&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;QueryClientProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    rootElement
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;마무리&lt;/h3&gt;
&lt;p&gt;지금까지 아주 간단하게(?) React Query를 이용하여 사용자 정보를 가져오고, 업데이트하는 로직을 구현해 보았습니다. 아직까지는 모든 부분에서 에러 없이 잘 동작하고 로그인 유지도 잘 되고 있네요. 추후에는 다른 API에도 React Query를 적용해 보도록 하겠습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Redux vs SWR vs React Query]]></title><description><![CDATA[기존의 Redux는 React 개발자라면 반드시 사용해야 할 세트 같은 개념의 라이브러리였습니다. 데이터의 상태는 크게 각 컴포넌트에서 독립적으로 사용되는 로컬 상태와 전체 어플리케이션에서 공통으로 사용되는 글로벌 상태로 나눌 수 있는데요, Redux…]]></description><link>https://jayoon-kong.github.io/swr-react_query/</link><guid isPermaLink="false">https://jayoon-kong.github.io/swr-react_query/</guid><dc:creator><![CDATA[jayoon]]></dc:creator><pubDate>Thu, 14 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;기존의 Redux는 React 개발자라면 반드시 사용해야 할 세트 같은 개념의 라이브러리였습니다. 데이터의 상태는 크게 각 컴포넌트에서 독립적으로 사용되는 &lt;strong&gt;로컬 상태&lt;/strong&gt;와 전체 어플리케이션에서 공통으로 사용되는 &lt;strong&gt;글로벌 상태&lt;/strong&gt;로 나눌 수 있는데요, Redux는 어플리케이션 전체에 하나의 store를 두고 거기서 공통의 상태를 관리해 주는 라이브러리입니다. 사실 Redux 자체도 굉장히 훌륭하고 아주 유용하게 쓰이고 있지만 Redux에서 상태 관리를 하기 위해서는 액션 처리, 리듀서에서의 작업 수행, 실제 처리 시의 dispatch 등 조금 복잡하게 코드를 작성해야 합니다. 심지어 서버 통신 같은 비동기 처리에서의 데이터 동기화 같은 경우 코드가 그다지 깔끔하게 동작하지 않습니다. 상태 관리는 대부분 서버 데이터를 효율적으로 사용하기 위해서 쓴다고 해도 과언이 아닌데 말이죠. 리듀서는 동기적으로 동작하지만 액션은 비동기로 동작하고, 스토어에 액션을 던지면서도 해당 상태가 정확히 어느 시점에 변경되는지 알 수 없는 어려움이 생기게 됩니다.&lt;/p&gt;
&lt;p&gt;심지어 Redux 자체만으로는 비동기 작업을 수행할 수 없습니다. 이로 인해 redux-thunk나 redux-saga와 같은 미들웨어를 사용하여 작업을 위임할 수밖에 없는데요,&lt;/p&gt;
&lt;p&gt;서버로부터 user 정보를 가져오기 위해 Redux에서 어떤 코드를 사용하고 있는지 알아보겠습니다. (V 컬러링에서는 redux-thunk를 사용하고 있습니다.)&lt;/p&gt;
&lt;h2&gt;Redux&lt;/h2&gt;
&lt;h3&gt;Action&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; CommonDataTypes &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token constant&quot;&gt;GET_USER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GET_USER&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; createAction &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; CommonDataTypes &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;T&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ActionCreators &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; IUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
		&lt;span class=&quot;token literal-property property&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; CommonDataTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GET_USER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
		&lt;span class=&quot;token literal-property property&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; userInfo &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token literal-property property&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Dispatch&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Actions&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;userRes&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; userInfoRes&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
		UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
		UserApi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUserInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userRes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;code &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; StatusCodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUCCESS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; userRes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ActionCreators&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
			&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;userRes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
			&lt;span class=&quot;token literal-property property&quot;&gt;currentTimestamp&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; userRes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;currentTimestamp 
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
			&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;userInfoRes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data 
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Reducer&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; CommonDataTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GET_USER&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;payload&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;userInfo
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Component&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;user 정보를 가져오기 위해서 redux-thunk를 이용하면 이렇게 액션, 리듀서, 실제 action 호출까지 무수히 많은 코드를 작성해야 합니다. 개발자가 user 정보를 갱신하고자 할 때 &lt;code class=&quot;language-text&quot;&gt;store.dispatch(getUser())&lt;/code&gt;이라는 명령어로 액션을 store에 날리면 리듀서에 의해 user 정보가 변경되죠. 하지만 위에서 보시다시피 액션은 비동기로 동작하고, 정확히 user 정보가 어떤 시점에 갱신되는지 알 수 없습니다. 이와 같은 문제를 redux-saga를 이용하면 조금 더 직관적으로 해결할 수는 있습니다. 액션이 순수 객체의 모습을 찾게 되기 때문이죠. 하지만 resux-saga 역시 코드가 길고 가독성이 그리 좋아 보이지는 않습니다.&lt;/p&gt;
&lt;p&gt;Redux의 이러한 문제점을 해결하기 위해 SWR과 React Query라는 data fetching 라이브러리가 등장했습니다. 이 두 가지의 라이브러리를 사용하게 되면 앞서 소개했던 Redux처럼 많은 코드를 작성할 필요가 없고, 어떤 데이터를 언제 fetch하는지만 작성하면 되기 때문에 보다 직관적인 프로그래밍이 가능합니다. 또한 동일한 API 호출이 여러 번 일어날 경우 한 번만 처리해 주기 때문에 불필요한 트랜잭션의 낭비를 막을 수 있습니다.&lt;/p&gt;
&lt;p&gt;data fetching 라이브러리의 주된 장점은 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;중복 API 요청 시 한 번만 처리한다.&lt;/li&gt;
&lt;li&gt;코드가 선언적이므로 가독성이 좋다.&lt;/li&gt;
&lt;li&gt;로컬 상태와 원격 상태를 동기화한다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;이제 두 라이브러리의 사용법을 한번 비교해 보겠습니다.&lt;/p&gt;
&lt;h2&gt;SWR&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; useSWR &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;swr&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isError &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSWR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/api/user&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetcher&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isLoading&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;로딩중입니다&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isError&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;에러가 발생했습니다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;hello&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&quot;SWR&quot;이라는 이름은 &lt;a href=&quot;https://tools.ietf.org/html/rfc5861&quot;&gt;HTTP RFC 5861&lt;/a&gt;에 의해 알려진 HTTP 캐시 무효 전략인 &lt;code class=&quot;language-text&quot;&gt;stale-while-revalidate&lt;/code&gt;
에서 유래되었습니다. SWR은 먼저 캐시로부터 데이터를 반환한 후, fetch 요청(재검증)을 하고, 최종적으로 최신화된 데이터를 가져오는 전략입니다.&lt;/p&gt;
&lt;p&gt;SWR의 특징은 다음과 같습니다.&lt;/p&gt;
&lt;h3&gt;불필요한 API 요청 제거&lt;/h3&gt;
&lt;p&gt;위의 Redux 코드와 비교해 보았을 때 훨씬 코드가 짧아지고, 복잡한 명령형으로 수행될 필요 없이 선언적으로 구현된 것을 알 수 있습니다. 가독성도 더 좋아졌구요. 뿐만 아니라 API 요청을 할 때에는 동일한 SWR key를 사용하며 그 요청이 자동으로 &lt;strong&gt;중복 제거, 캐시, 공유&lt;/strong&gt;되므로 단 한 번의 요청만 API로 전송됩니다. 따라서 빠르고 가볍게 데이터를 가져올 수 있습니다.&lt;/p&gt;
&lt;p&gt;위 예시에서 useSWR은 key 문자열과 fetcher 함수를 받습니다. key는 데이터의 고유한 식별자이며(일반적으로 API URL), fetcher 함수로 전달됩니다. fetcher는 key를 받고 데이터(또는 에러)를 반환하는 비동기 함수가 될 수 있습니다.&lt;/p&gt;
&lt;h3&gt;자동 갱신&lt;/h3&gt;
&lt;p&gt;기존의 Redux와 같은 다른 상태 관리 라이브러리에서도 마찬가지로, SWR을 사용하면 한 번 받아온 원격 데이터를 각 컴포넌트에서 공유할 수 있습니다. 하지만 데이터의 추가나 수정이 일어나면 개발자는 로컬 상태를 초기화하고, 다시 API 요청을 보내 원격 상태를 업데이트해야만 했죠.&lt;/p&gt;
&lt;p&gt;SWR은 로컬 상태와 원격 상태를 하나로 통합합니다. 마치 로컬 상태가 실시간으로 원격 상태의 데이터 스트림을 받는 것처럼 느낄 수 있는데요, 그 원인은 SWR이 &lt;strong&gt;내부적으로 적절한 타이밍에 지속적으로 데이터를 폴링&lt;/strong&gt;하기 때문입니다.&lt;/p&gt;
&lt;p&gt;예를 들면 사용자가 페이지에 다시 focus를 주거나 다른 탭에서 이동했을 때를 감지하여 자동으로 데이터를 갱신해 줍니다. 컴퓨터가 슬립 상태에 빠졌다가 다시 활성화되거나, 혹은 네트워크가 잠시 끊겼다가 재연결이 되는 등의 상황에서도 데이터를 최신으로 유지할 수 있기 때문에 아주 유용합니다. 이 자동 갱신 기능은 옵션을 통해 비활성화할 수도 있습니다.&lt;/p&gt;
&lt;h3&gt;조건부 데이터&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 조건부 가져오기&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSWR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shouldFetch &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/api/data&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...또는 falsy 값 반환&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSWR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; shouldFetch &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/api/data&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...또는 user.id가 정의되지 않았을 때 에러 throw&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSWR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/api/data?uid=&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이렇게 데이터를 조건부로 가져오는 것도 가능합니다.&lt;/p&gt;
&lt;h3&gt;Mutation&lt;/h3&gt;
&lt;p&gt;SWR의 데이터 갱신을 기다릴 필요 없이 로컬에서 바로 상태 변경을 하고 싶은 경우에는 mutation 기능을 이용할 수 있습니다. mutate 함수가 호출되면 해당 상태를 즉시 다시 fetch 하고 데이터를 갱신합니다. 만약 fetch를 원하지 않는다면 옵션 값으로 로컬 상태만 변경할 수도 있습니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; useSWR&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useSWRConfig &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;swr&apos;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Profile&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; mutate &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSWRConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;profile&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setProfile&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Polly&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleEditProfile&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;updateProfile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;profile&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// mutate 함수에 data 인자를 전달하면 refetch 없이 즉시 변경 가능합니다.&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/user/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;userId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; profile&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;React Query&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useQuery &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-query&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;useUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/api/user/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetcher&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Example&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isError &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Polly&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isLoading&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;로딩중입니다&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isError&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;에러가 발생했습니다&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;hello&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;React Query 역시 SWR과 마찬가지로 &lt;strong&gt;선언적&lt;/strong&gt;이고, 불필요하게 코드를 작성할 필요 없이 아주 &lt;strong&gt;간단하게&lt;/strong&gt; 작성할 수 있으며, 강력한 &lt;strong&gt;캐싱&lt;/strong&gt; 기능을 통해 자동으로 오래된 데이터를 갱신합니다.&lt;/p&gt;
&lt;p&gt;React Query의 가장 큰 특징은 Server State를 관리하는 것인데요, 쉽게 말하자면 Redux는 전역 상태를, React Query에서는 서버에서 받아온 데이터(Server State)를 관리한다고 생각하면 편할 것 같습니다. React Query에서 말하는 Server State란 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;클라이언트에서 제어하지 않는 원격 상태로 관리&lt;/li&gt;
&lt;li&gt;비동기 요청으로 받아올 수 있는 백엔드 데이터&lt;/li&gt;
&lt;li&gt;항상 최신임을 보장할 수 없음&lt;/li&gt;
&lt;li&gt;여러 클라이언트에 의해 수정될 수 있음&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;위 예시에서 볼 수 있듯이 useQuery를 사용하여 요청을 보낼 수 있습니다. useQuery가 반환하는 객체의 프로퍼티로 Query들의 상태를 확인할 수 있습니다. Query의 상태는 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;fresh : active 상태의 시작으로, 호출이 끝나고 바로 stale 상태로 변경됩니다. 기본 stale time은 0이고, stale time을 늘려줄 경우 fresh한 상태가 유지됩니다. 이 때 쿼리가 다시 마운트되면 fetching이 발생하지 않고 기존의 fresh한 값을 반환합니다.&lt;/li&gt;
&lt;li&gt;fetching: 요청 수행 중&lt;/li&gt;
&lt;li&gt;stale : 이미 fetcing이 완료된 상태입니다. 같은 fetching이 시도되면 캐싱된 데이터를 반환합니다.&lt;/li&gt;
&lt;li&gt;inactive: active instance가 없는 상태로, cacheTime이 지나면 소멸됩니다.&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;React Query 역시 사용하는 방식의 차이만 있을 뿐 SWR과 거의 유사한 특징을 가지고 있습니다.&lt;/p&gt;
&lt;h3&gt;불필요한 API 요청 제거&lt;/h3&gt;
&lt;p&gt;클라이언트가 소유하며 지속적이지 않은 Clinet State와 달리 Server State는 사용자가 직접 매번 요청을 보내지 않는 이상 업데이트되지 않기 때문에, 사용자가 명시적으로 fetching을 수행해야만 하고 복수의 컴포넌트에서 중복으로 여러 번 수행하는 통신 낭비가 발생할 수 있게 됩니다. 위 예시에서 볼 수 있듯이 useQuery을 사용하여 fetching을 하면 개발자가 따로 처리하지 않아도 캐싱을 가능하게 해 줍니다.&lt;/p&gt;
&lt;p&gt;첫 번째 인자인 unique key (여기서는 API 주소) 는 리패칭, 캐싱, 공유 등을 할 때 참조되는 값입니다. 위 예시와 같이 URL 주소가 될 수도 있고 문자열이나 배열이 될 수도 있습니다. 만약 배열이 들어가게 된다면 배열의 요소로는 쿼리의 이름을 나타내는 문자열과 프로미스를 리턴하는 함수의 인자로 쓰이는 값을 넣습니다. 이 때 배열 요소의 순서가 중요합니다. 내용은 같아도 순서가 다르면 다르게 해싱됩니다.&lt;/p&gt;
&lt;p&gt;두 번째 인자는 SWR과 마찬가지로 fecher 함수인데 promise 형태의 모든 함수가 올 수 있습니다.&lt;/p&gt;
&lt;h3&gt;자동 갱신&lt;/h3&gt;
&lt;p&gt;다음과 같은 경우 자동 갱신이 일어납니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;런타임에 stale인 특정 Query instance가 다시 만들어진 경우&lt;/li&gt;
&lt;li&gt;window에 다시 focus된 경우&lt;/li&gt;
&lt;li&gt;네트워크가 끊겼다가 다시 연결되었을 경우&lt;/li&gt;
&lt;li&gt;refetch interval이 있을 경우 (요청 실패한 Query가 있으면 default로 3번 더 호출합니다.)&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Mutation&lt;/h3&gt;
&lt;p&gt;useMutation을 사용할 수 있습니다. 서버의 데이터 변경 요청을 할 때 사용하는 함수로, useQuery와는 다르게 Create, Update, Delete 요청과 같이 API 통신으로 server state에 side effect를 일으키는 경우에 사용합니다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useQueryClient &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-query&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Profile&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; queryClient &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useQueryClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;profile&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setProfile&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Polly&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;handleEditProfile&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;updateProfile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;profile&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// unique key를 통해서 data가 invalid 상태임을 전달합니다.&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// react query에서는 해당 데이터를 즉시 refetch 하게 됩니다.&lt;/span&gt;
    queryClient&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;invalidateQueries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/user/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;userId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위 예시에 Invalidation에 대한 코드도 있는데 Create, Update, Delete와 같이 Mutation 요청 시에는 서버의 값이 변하게 되므로 React Query에 들고 있는 server state는 낡은(stale) 데이터가 되게 됩니다. 이때 QueryClient에서 제공하는 invalidation 메서드들을 사용한다면 해당 Key를 들고 있는 Query들이 refetch가 발생하게 할 수 있습니다.&lt;/p&gt;
&lt;p&gt;지금까지 SWR과 React Query를 비교해 보며 data fetching 라이브러리의 특징을 간단하게 살펴보았습니다. 확실히 언뜻 보기만 해도 서버의 데이터를 관리하기에는 Redux보다 훨씬 간결하게 사용할 수 있는 것 같네요. SWR과 React Query 모두 편하게 사용할 수 있지만, 조사를 해 보니 SWR을 사용하게 되면 자동 갱신은 GET 요청인 경우에만 지원을 하는 것 같습니다. V 컬러링에서는 조회 API 중에도 POST가 많기도 하고, 또 여러 reference가 많은 것도 고려해서 아마도 React Query를 도입하지 않을까 합니다.&lt;/p&gt;
&lt;p&gt;다음 포스트에서는 V 컬러링에서 Redux로 관리되던 상태를 실제로 React Query로 적용한 내용에 대해 소개하도록 하겠습니다.&lt;/p&gt;</content:encoded></item></channel></rss>